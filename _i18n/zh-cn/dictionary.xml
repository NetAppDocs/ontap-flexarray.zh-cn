<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="534d9f4d2a6fd9c02cba0b016abd82d1" category="summary">您可以将ONTAP系统上的一个FC启动程序端口连接到同一系列中不同存储阵列上的多个目标端口。ONTAP中的MetroCluster配置支持此配置。</block>
  <block id="94ecf8fbb95e33953d29b6bc77ecf79d" category="doc">将FC启动程序端口连接到多个目标端口</block>
  <block id="18c0aa1f9069ce043576a1336cd7f920" category="paragraph">ONTAP支持与HA对和独立系统中的多个目标端口共享一个FC启动程序端口。此配置支持与互操作性表中列出的所有存储阵列一起使用、就像在系统上运行的ONTAP版本支持的那样。</block>
  <block id="2e21d9bdc46518f36c14799861cff9d1" category="paragraph">有关与多个目标端口共享FC启动程序端口和分区的详细信息、请参见_ FlexArray虚拟化安装要求和参考_中的信息</block>
  <block id="684edefacd69c43e74394b62563359a2" category="section-title">连接到不同存储阵列上的目标端口的单个ONTAP FC启动程序端口</block>
  <block id="5f1135e7e04c2c8b972b9a5f96bee438" category="paragraph">以下示例显示了一个HA对、其中一个ONTAP FC启动程序端口连接到不同存储阵列上的多个目标端口：</block>
  <block id="0e152a5791757bfcdd702cba9c841a3e" category="image-alt">连接和分区在周围的文本中进行了介绍。</block>
  <block id="d33f2a600ba4fe43084a26e95e4908c0" category="paragraph">* 相关信息 *</block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="inline-link">NetApp 互操作性表工具</block>
  <block id="687d97208bee730c33801be1d460abf6" category="paragraph"><block ref="687d97208bee730c33801be1d460abf6" category="inline-link-rx"></block></block>
  <block id="70894d5c0a41692947485c0d0a19e60a" category="inline-link">FlexArray 虚拟化安装要求和参考</block>
  <block id="458876feaed6a906ecafed4badb622d0" category="paragraph"><block ref="458876feaed6a906ecafed4badb622d0" category="inline-link-rx"></block></block>
  <block id="5bf1678517b4e7d065d78a458ca7ed44" category="inline-link">光纤连接的 MetroCluster 安装和配置</block>
  <block id="4980aa8a93c404e256f38b26e322faea" category="paragraph"><block ref="4980aa8a93c404e256f38b26e322faea" category="inline-link-rx"></block></block>
  <block id="a6e77985feb87e43c0d356ef7a5cfb4f" category="summary">集群模式V系列系统以及可以使用阵列LUN的ONTAP系统均支持八端口LUN组配置。</block>
  <block id="f1fb0bca912fac0063b1b986b027d4c4" category="doc">八端口阵列LUN组配置</block>
  <block id="33c6969c0a75f9fdc2eb416b88ac4cc7" category="paragraph">此配置支持与互操作性表中列出的所有存储阵列一起使用、就像在系统上运行的ONTAP版本支持的那样。</block>
  <block id="543221353f960ce0ac542e83ef617946" category="paragraph">部署此配置的方法有两种：交叉后端连接和非交叉后端连接。</block>
  <block id="11d69708210e75de12ad35539fb2d79f" category="section-title">交叉后端连接</block>
  <block id="0b1495160d246522106651250f589dd4" category="paragraph">在此配置中、如果后端连接发生交叉、则来自同一存储阵列控制器的FC连接将同时连接到两个光纤交换机(冗余)。</block>
  <block id="1ea4372d211bf0b0bbb224ee84c704fc" category="paragraph">在此交叉后端连接图中、请注意节点是如何连接到交换机和存储阵列的。在连接到存储阵列控制器1端口1A和控制器2端口2C时、VS1使用交换机1；在连接到存储阵列控制器2端口2A和控制器1端口1C时、VS1使用交换机2。这样可以优化交换机端口和阵列端口的使用、从而降低交换机或存储阵列控制器故障的影响。</block>
  <block id="1e04890dea8a7a99087570d46826c823" category="image-alt">八端口阵列LUN组配置已交叉</block>
  <block id="83082011a8ff6693312f245a7b26b635" category="section-title">后端连接未交叉连接</block>
  <block id="e9dac999b65eb926b09daf9f50331f7b" category="paragraph">在此配置中、不会交叉后端连接、来自同一存储阵列控制器的FC连接只会连接到一个光纤交换机。</block>
  <block id="18509d92b60754b2afe8c3b499a87a47" category="paragraph">下图显示了未跨越后端连接时的此配置。</block>
  <block id="f297ee642fb4482386f2ad2096330989" category="image-alt">八端口阵列LUN组配置</block>
  <block id="ebf951e059f32f37248cb2096fe3ea4c" category="summary">最多可以将节点间的两个ONTAP FC启动程序端口连接到存储阵列上的一个目标端口。ONTAP中的MetroCluster配置支持此配置。</block>
  <block id="232a2d6c394ca37d5fe0479f2ee03ea2" category="doc">与两个FC启动程序端口共享一个目标端口</block>
  <block id="cea71410a906c5cd4a55b47089c5f4ff" category="paragraph">下图显示了具有HA对的共享目标端口配置。独立系统和HA对均支持与两个FC启动程序端口共享目标端口。</block>
  <block id="e1d3799399c979308ebbf698cab0b536" category="paragraph">有关与多个目标端口共享FC启动程序端口和分区的详细信息、请参见_ FlexArray虚拟化安装要求和参考_</block>
  <block id="18d08e2f55f20b8e6742a3098dadc034" category="section-title">连接到FC启动程序端口的共享目标端口</block>
  <block id="706c6d4ffeacfa69edff8a3efa39b3a3" category="paragraph">以下示例显示了一个HA对、其中一个目标端口连接到两个FC启动程序端口：</block>
  <block id="a7972793b565fe3af77f0c09bb237349" category="image-alt">本图在周围的文字中进行了说明</block>
  <block id="60673892b6cbc04f959310690f137b1a" category="paragraph">控制器VS1和VS2的启动程序端口0a连接到存储阵列端口1A、控制器的端口0c连接到存储阵列端口2A。</block>
  <block id="5485bde913fdce014422e9675eb1b567" category="summary">此配置包含一个4端口LUN组、其中每个目标端口均由HA对中的一个ONTAP FC启动程序端口访问。由于分区的原因、每个ONTAP系统中的特定阵列LUN只允许有两个路径。</block>
  <block id="884b7352aac7c31b6dbd6125e80db98c" category="doc">单个4端口阵列LUN组配置</block>
  <block id="e3c0dcce3545808f691eaa65d5be7f2b" category="paragraph">下图显示了此配置：</block>
  <block id="c1c8e692d05749a6d42ba6f8e0389d38" category="image-alt">本图通过周围的文字进行了说明。</block>
  <block id="c2cc43aff9c6835eb398f3fc2c6acfaf" category="summary">使用阵列LUN的ONTAP系统的独立基本配置是一种简单的光纤连接配置、其中、一个FC启动程序端口对可访问一个LUN组。</block>
  <block id="a7cd287de63ffc2798f7e8d08da00057" category="doc">独立的基本配置</block>
  <block id="8f23fdecd33078dbb005639b9c983279" category="image-alt">在具有独立系统的单个双端口阵列LUN组配置中</block>
  <block id="e4c0b911a064e996d18b46397267ff1d" category="summary">在采用简单光纤连接配置的独立ONTAP系统中、ONTAP系统上的每个FC启动程序端口对都会访问一个单独的阵列LUN组。</block>
  <block id="45e3ed5dd99cdd6a7e72a0e6c22e0e04" category="doc">具有两个双端口阵列LUN组的独立系统</block>
  <block id="b5a787c81b86e9cf2890808e3225dd61" category="paragraph">下图显示了光纤连接的简单配置：</block>
  <block id="12646216ba28d492958ba228572d96e8" category="summary">您可以将受支持的FAS和V系列系统与阵列LUN结合使用。</block>
  <block id="27d5d528b2d6f06fe0d71a3255cabfd1" category="doc">可以在存储阵列上使用阵列LUN的ONTAP系统</block>
  <block id="fadee2af7757b3621327baa6c99d41c3" category="paragraph">NetApp互操作性表工具列出了支持的硬件和软件组合。</block>
  <block id="9badeaf7ba71e38d6a62c54fad9be090" category="summary">在此配置中、每个ONTAP FC启动程序端口对都会访问一个单独的阵列LUN组。分区是指一个ONTAP FC启动程序到一个阵列目标端口。</block>
  <block id="c90eb18b40aa89e2c309b20e9ae7ff7b" category="doc">两个4端口阵列LUN组配置</block>
  <block id="ba9eb48c58afab69d8da8e1fc6fda8f2" category="paragraph">下图显示了此配置的结构图：</block>
  <block id="93152fade102e16cec2733b87b8f2453" category="image-alt">两个4端口阵列LUN组</block>
  <block id="fcd28d7c016b936e5fa05daf1a1fdec0" category="summary">并非所有ONTAP版本都支持相同的功能、配置、系统型号和存储阵列型号。在部署规划期间、您必须检查ONTAP支持信息、以验证您的部署是否符合部署中所有系统的ONTAP硬件和软件要求。</block>
  <block id="e4c02ff71c86b599a590bc96782a2a27" category="doc">从何处查找有关ONTAP对存储阵列的支持的信息</block>
  <block id="79c5c653af3de6ed482c193be0965adf" category="paragraph">下表列出了包含与ONTAP系统相关的硬件和软件要求详细信息的信息源：</block>
  <block id="855dee0f8be3a9fb95ed8d6444d6c28d" category="cell">有关的信息</block>
  <block id="e57719dda593721a28fa6f7ca9405b1a" category="cell">您应查看此处...</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="c9408527da83739d1f1cb159e17a819f" category="paragraph">使用存储阵列实施ONTAP的任务、包括以下任务：</block>
  <block id="f5402b581f118c07ed117d69be976ec2" category="list-text">规划实施</block>
  <block id="549dddf4e9cd6ba011ac383fc4a6ebf3" category="list-text">连接ONTAP系统和阵列</block>
  <block id="2441ab3d5f95273ddb1c23f27801bd96" category="list-text">验证安装</block>
  <block id="f1e054ef441716f247d0ddb5f80f0894" category="paragraph">ONTAP可与以下设备配合使用：</block>
  <block id="d6c177b2384d60af9e3f05987a1cbfb3" category="list-text">支持的存储阵列和存储阵列固件</block>
  <block id="4f91e25e00a7465ce95a3e34ceac4ca5" category="list-text">支持的交换机和交换机固件</block>
  <block id="9d11c7bee216fca4926e668484bb1773" category="list-text">存储阵列是否支持存储阵列固件的无中断(实时)升级</block>
  <block id="6aaac31841fa06ad42ed2d2320ef02af" category="list-text">存储阵列是否支持MetroCluster配置</block>
  <block id="8b4ba805fad4b5d16bf4047f048561b8" category="paragraph">您可以参阅互操作性表中适用于后端存储的V系列和FlexArray虚拟化解决方案页面上的相应注释来查看有关支持采用FlexArray虚拟化的E-Series存储阵列的高级功能的信息</block>
  <block id="70bd9e2b4972f54b701fb2df586df1fc" category="paragraph">版本和平台的ONTAP限制、包括以下内容：</block>
  <block id="1672024c90e2b79b38f010136495b004" category="list-text">最小和最大阵列LUN大小、包括根卷和备用核心阵列LUN的最小阵列LUN大小</block>
  <block id="70dd4bcc1586341572c24c1f5d82f856" category="list-text">包含阵列LUN的聚合的最小聚合大小</block>
  <block id="cc603b2d989af4b4c8db625cc3d67277" category="list-text">支持的块大小</block>
  <block id="d8bf4c13e22bdebce42eea76c7529b01" category="list-text">最小和最大容量</block>
  <block id="725c199d7e2bf8c5d54c08416c603eba" category="list-text">邻居限制</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe</block>
  <block id="25c779b977dab5ebed0156b6fb5f864b" category="paragraph"><block ref="25c779b977dab5ebed0156b6fb5f864b" category="inline-link-rx"></block></block>
  <block id="2418743c8cead0e6ce36a3e5478f8c0c" category="paragraph">设置E-Series存储阵列、包括以下内容：</block>
  <block id="70fa97734dbda59cdbdf50b981776abd" category="list-text">站点准备要求</block>
  <block id="db293c8edf64696f2f1c02a71f7d4d7c" category="list-text">布线说明</block>
  <block id="f5ecc8741ce9001db5944c44be64d3cc" category="list-text">SANtricity软件安装和配置说明</block>
  <block id="81cfd34ef0c79fa388ced831f5a20983" category="paragraph">以下E-Series文档：</block>
  <block id="8571ff15b31692ca23bc4a46a3f5bd3e" category="list-text">_ E-Series存储系统站点准备指南_</block>
  <block id="29456ee3e766f199ebc871d90f47d238" category="list-text">_ E-Series存储系统硬件布线指南_</block>
  <block id="32750741c03cb696381c2c47059b0938" category="list-text">_Storage ES SANtricity文档_</block>
  <block id="4453079b3901bc814f7a5612657936cc" category="paragraph">您可以从NetApp支持站点访问这些文档。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="cba784dbb6dad30cadc1fcb2d1b5ee81" category="paragraph"><block ref="cba784dbb6dad30cadc1fcb2d1b5ee81" category="inline-link-rx"></block></block>
  <block id="11774e9bde09e59646a7f2490c4f9d0a" category="summary">在规划将ONTAP系统与存储阵列结合使用的配置时、除了产品文档之外、您还应查看各种来源、了解有关阵列LUN配置的信息。</block>
  <block id="264620778fd3a53deb53bd104f87b820" category="doc">从何处查找有关使用存储阵列的配置的信息</block>
  <block id="92728f738d539ab4813b08ee21492bd3" category="paragraph">NetApp支持站点上提供的工具可在一个中央位置提供有关特定版本支持的功能、配置和存储阵列型号的特定信息。</block>
  <block id="ee45a702b0dc81d89797c93f919802e6" category="summary">欢迎使用ONTAP FlexArray信息库。您可以在此处找到有关如何将E-Series存储阵列用作集群后端存储的信息。</block>
  <block id="a04d33a90f53a5989bcfa3578c381dce" category="doc">针对NetApp®E-Series存储的FlexArray®虚拟化实施</block>
  <block id="b2dba63c9ea9f15a29d64cd8e28ee9f5" category="summary">您必须为E-Series存储阵列设置适当的主机类型选项、才能与ONTAP系统进行通信。您可以使用SANtricity Storage Manager设置主机类型。</block>
  <block id="ee1326b37042c0d871fce0c0932f0667" category="doc">E-Series存储阵列所需的主机类型</block>
  <block id="45391e7a9bb1f6d5d03082f33427105e" category="paragraph">对于给定的ONTAP版本、您可以根据存储阵列固件版本设置所需的主机类型。</block>
  <block id="cd6c816128e062a7be2f1290702a2dbe" category="paragraph">如果您的固件版本为08.10.15.00及更高版本、请将主机类型设置为_ALOA (Data ONTAP)_。</block>
  <block id="03afa9228d559ce15cc63cbb7ef6b1bf" category="paragraph">固件版本08.10.15.00及更高版本支持的最低SANtricity Storage Manager版本为11.10.0G00.0026。</block>
  <block id="57154e3f7dfb9a7003bfa70dfb7888ad" category="paragraph">使用E-Series控制器固件8.25时、E-Series系统不再支持将ONTAP RDAC作为主机类型。因此、如果您使用的是ONTAP RDAC、则在将后端阵列升级到CFW 8.25或更高版本之前、必须按照此知识库文章将其转换为ONTAP ALOA。</block>
  <block id="4e950581ade3649b92e6cff127a8e03e" category="inline-link">如何在连接到集群模式Data ONTAP系统的NetApp E-Series阵列上无故障切换主动-被动和ALOA故障转移模式</block>
  <block id="176a7e328226595e0e5930922c3751da" category="paragraph"><block ref="176a7e328226595e0e5930922c3751da" category="inline-link-rx"></block></block>
  <block id="7eabdd7dabcf27c16a1e4d608b96230e" category="summary">在配置存储阵列以使用ONTAP系统时、必须设置一些系统参数并牢记一些注意事项。</block>
  <block id="6166d1c96b51f311944494024e4aa8c3" category="doc">配置E-Series存储阵列的要求</block>
  <block id="a160cd08c303bc5d3bb30b52f96754c7" category="summary">您可以使用E-Series存储阵列连接直连配置中的ONTAP系统。您必须验证ONTAP系统和存储阵列之间的连接冗余、以避免发生单点故障的可能性。FlexArray延伸型MetroCluster支持使用E-Series存储阵列的直连配置。</block>
  <block id="6e5818dbd209217bc52df74474d8c22c" category="doc">支持使用E-Series存储阵列的直连配置</block>
  <block id="1b08617a7ef3c5fcc662a93b91e986f1" category="inline-link">延伸型 MetroCluster 安装和配置</block>
  <block id="95fe5ea8061d02fa1306ff3747a33b04" category="paragraph">您可以使用E-Series存储阵列连接直连配置中的ONTAP系统。您必须验证ONTAP系统和存储阵列之间的连接冗余、以避免发生单点故障的可能性。FlexArray延伸型MetroCluster支持使用E-Series存储阵列的直连配置。有关详细信息，请参阅、<block ref="ae0acc7a1cf35a69eb7b42685c902841" category="inline-link-rx"></block> 和<block ref="fadf4e92a0285084b50a2f28813e046c" category="inline-link-rx"></block>。</block>
  <block id="d345ecc1015dd94decaa70187ff34bd4" category="paragraph">互操作性表提供了有关在使用ONTAP系统的直连配置中支持的特定E-Series阵列型号的信息。</block>
  <block id="36b70151633ac64b0366da085e83af48" category="paragraph">ONTAP支持使用E-Series存储阵列的以下直连配置：</block>
  <block id="9b94e9ccd761cba80233e4d0788e4c8e" category="paragraph">在独立基本配置中、ONTAP系统中的两个FC启动程序端口可访问双端口阵列LUN组的端口。</block>
  <block id="2d1f2a44e4f79599f4f133be4942ad94" category="paragraph">下图显示了一个直连配置、其中、ONTAP FC启动程序端口0a和0h访问双端口阵列LUN组的目标端口：</block>
  <block id="9cc2eee37f8c521f60eeef7091d98980" category="image-alt">DA 2端口独立</block>
  <block id="68dbe6fe3715917821a12852fa3926e5" category="section-title">四端口阵列LUN组</block>
  <block id="9b0c1a487ca91ee7f02c364a2b83b1db" category="paragraph">HA对中每个ONTAP系统的两个FC启动程序端口可访问四端口阵列LUN组中的不同存储阵列端口、以实现连接冗余。</block>
  <block id="62478044dfad2708ad047afe3fc2666b" category="paragraph">下图显示了一个直连配置、其中、ONTAP FC启动程序端口可访问四端口阵列LUN组的目标端口。</block>
  <block id="894bc21b2092036e3d432e378977706c" category="image-alt">4端口的沙波特</block>
  <block id="3652c8e84080a7effa50c57d2c37a51c" category="paragraph">此外、您还可以将HA对中每个ONTAP系统的四个FC启动程序端口连接到两个不同的四端口阵列LUN组、以便端口对中的每个FC启动程序端口访问备用LUN组。</block>
  <block id="3cb219d2eef32efb15d1c9c9fd45aaeb" category="paragraph">下图显示了一个直连配置、其中、ONTAP FC启动程序端口可访问两个四端口阵列LUN组的目标端口：</block>
  <block id="a380ac84669a2a5b925ba66f9c4bda25" category="image-alt">包含两个四端口阵列LUN组的直连配置</block>
  <block id="1a6341a2bba1a380d104239eedad9b11" category="section-title">八端口阵列LUN组</block>
  <block id="2c871676865113b2c377c8d73bfe8d29" category="paragraph">HA对中每个ONTAP系统的四个FC启动程序端口可访问一个八端口阵列LUN组中的不同存储阵列端口、以实现连接冗余。</block>
  <block id="64caf589f952339a352aa7d84f93131b" category="paragraph">下图显示了一个直连配置、其中、ONTAP FC启动程序端口可访问八端口阵列LUN组的目标端口：</block>
  <block id="a3372e7bb99054e9a509773f21966f5e" category="image-alt">八端口直连HA对配置</block>
  <block id="0f7a85d0b5458e28db3290e13ed24719" category="summary">您只能将光纤连接配置中的某些E-Series存储阵列连接到ONTAP系统。</block>
  <block id="a667a7c484730d5fec21af866ae92396" category="doc">E-Series存储阵列支持的光纤连接配置</block>
  <block id="de9cd65194dfa62c8f79de0430235cee" category="paragraph">您只能将光纤连接配置中的某些E-Series存储阵列连接到ONTAP系统</block>
  <block id="83f620287fc6051774002314ab67efdd" category="paragraph">互操作性表提供了有关特定阵列型号的其他信息。</block>
  <block id="046ddfc61ca3fffd914d2ef2ffc501dd" category="summary">ONTAP不支持在聚合中混用某些类型的存储。为了帮助您确定可在聚合中混用的阵列LUN、每个供应商的存储阵列会分组到各个系列中。创建聚合时、不能在同一聚合中混用来自不同供应商和不同存储阵列系列的阵列LUN。</block>
  <block id="e966b0ff43198c0554dc3f1060e240fc" category="doc">3PAR存储阵列系列</block>
  <block id="2f9e4e6dd5e4fbb1ec974e2bbe2ace7b" category="paragraph">同一系列中的存储阵列具有相同的性能和故障转移特征。例如、同一系列的成员都执行主动-主动故障转移、或者都执行主动-被动故障转移。可以使用多个因素来确定存储阵列系列。例如，具有不同架构的存储阵列可能属于不同的系列，即使其他特性可能都相同。</block>
  <block id="8f175e320cd48a29f9bd8b163afd9c7d" category="paragraph">以下列表显示了按不同系列组织的受支持3CAR存储阵列：</block>
  <block id="6f93570dec84b4e9ee80c32c2cca051a" category="list-text">系列1：3PAR InServ存储</block>
  <block id="9d3b328ee76c990de0fa25e8fad3b9bc" category="list-text">Tx00</block>
  <block id="e7eced18d118f2031ee8bcc52681bbee" category="list-text">系列2：3PAR InServ存储</block>
  <block id="9c07ae37d8c3f78b6bb61955482ba4b8" category="list-text">Fx00</block>
  <block id="3213733a6f4f3218da6a236cd3505e8f" category="list-text">系列3：3PAR StoreServ存储</block>
  <block id="d9798cdf31c02d86b8b81cc119d94836" category="list-text">20000</block>
  <block id="26c764c688e12e56d64896b2b10e7432" category="list-text">208xx</block>
  <block id="b38b9210c9f2002ef08c2825074e0ff8" category="paragraph">互操作性表是获取有关每个供应商支持的存储阵列信息的最终权威。</block>
  <block id="7749763daee992e42169297d774a440a" category="summary">尽管所有EMC CLARiON和VNX阵列都使用ALUA (非对称主动-主动)故障转移模式、但VNX2存储阵列的ALUA行为可能有所不同。</block>
  <block id="817fdb14e2dcc4d9a0e1c2689c2b1b32" category="doc">VNX2存储阵列的AUA行为</block>
  <block id="9f473d82b4ceb9d94a95f8a7483b960b" category="paragraph">与所有其他EMC阵列LUN一样、从动态磁盘池提供给ONTAP系统的VNX2阵列LUN也会使用ALUA故障转移模式。但是、传统RAID组提供给ONTAP系统的VNX2阵列LUN会使用主动-主动故障转移模式、所有路径都会报告为 <block ref="2c64c5cf613d8b9f4f7f3980d29aca10" prefix="*" category="inline-code"></block>*(活动优化)。在某些操作(例如在后端阵列中创建Snapshot)期间、阵列LUN的这种行为会发生变化。</block>
  <block id="c5b1befc1048f7d1c311294b3d4ca6cc" category="paragraph">因此、为了保持VNX2阵列LUN的行为一致、ONTAP会将这些LUN视为ALUA、而不管这些阵列LUN是从传统RAID组提供的还是从动态磁盘池提供的。</block>
  <block id="1dbf407d8ded1665d0b3a260a5f8f618" category="paragraph">在这种情况下、给定VNX2 LUN的I/O请求只会分布在报告为*(正在使用)状态的路径上、而不会分布 <block ref="eb74a6cb4d3de7fff01515a888a3760d" prefix="*" category="inline-code"></block>在报告为*(主动-优化)的所有路径上 <block ref="2c64c5cf613d8b9f4f7f3980d29aca10" prefix="*" category="inline-code"></block>。</block>
  <block id="64f2a4ecfec64d62af1d6713dc3258c8" category="paragraph">例如、如果从传统RAID组向ONTAP系统提供的VNX2阵列LUN有四个路径、则所有路径都会报告为 <block ref="2c64c5cf613d8b9f4f7f3980d29aca10" prefix="*" category="inline-code"></block>*； 但是、只有两个路径处于 <block ref="eb74a6cb4d3de7fff01515a888a3760d" prefix="*" category="inline-code"></block>*状态、而其他两个路径未使用、但处于 <block ref="a668ed2e5c2094adede3bb5a070e8068" prefix="*" category="inline-code"></block>*(就绪)状态。</block>
  <block id="48d3a839c74cbc77d94a6d1ff6f65c63" category="summary">增加了对HP EVA阵列的非对称逻辑单元访问(AUA)的支持。</block>
  <block id="743657e615161951507a614abad1c87d" category="doc">AUA支持HP EVA存储阵列</block>
  <block id="d011926a21eaf7a0d9a12501b1d7cd1d" category="paragraph">默认情况下、ONTAP以及所有HP EVA存储阵列均会启用ALOA支持。</block>
  <block id="96a2f853dba4f3a42bf45b3d3e0b1274" category="summary">在VMAX阵列上、如果客户请求使用ACLX、则会在初始化期间创建ACLX (Access Control Logix) LUN。ACLX LUN不是存储LUN、因此不应映射到ONTAP。</block>
  <block id="942ed3e9d0e49a1730730747def5ba99" category="doc">有关使用ACLX LUN的注意事项</block>
  <block id="b0b075737d54c394d7a512d9b67d4adf" category="paragraph">如果ACLX LUN映射到ONTAP系统、则ONTAP会记录一条消息、指出ACLX LUN小于所需的最小大小、并将LUN标记为故障。记录此错误消息后、ONTAP系统仍可正常运行、但无法使用LUN。</block>
  <block id="56a988ecb0e3bbc60bae53f5e9cb4afd" category="paragraph">应取消ACLX LUN与ONTAP系统上的前端控制器端口的映射。</block>
  <block id="fbefb39b16c5d8f6ba298411b3ca8d34" category="summary">要启用VCMDB (卷配置管理数据库)、必须存在VCMDB LUN。VCMDB LUN是一个命令类型的LUN、而不是存储LUN。VCMDB通常映射到LUN 0、但可以映射到LUN 0以外的阵列LUN。</block>
  <block id="e8751c2c414649919465fc40edab394d" category="doc">有关使用VCMDB LUN的注意事项</block>
  <block id="e8041cc7adbae2da58c913b4691749dd" category="paragraph">要启用VCMDB (卷配置管理数据库)、必须存在VCMDB LUN。VCMDB LUN是一种<block ref="1dccadfed7bcbb036c56a4afb97e906f" prefix=" " category="inline-code"></block> 类型的LUN、而不是存储LUN。VCMDB通常映射到LUN 0、但可以映射到LUN 0以外的阵列LUN。</block>
  <block id="02f40b908f8d71a5b46ff1a956a56730" category="paragraph">如果VCMDB LUN映射到ONTAP系统、则ONTAP会定期记录一条消息、指出VCMDB LUN小于所需的最小大小、并将VCMDB LUN标记为失败。记录此错误消息后、ONTAP系统仍可正常运行、但无法使用LUN。</block>
  <block id="bf61ad2f2594ecff8e8280476f3cd2ac" category="paragraph">应取消VCMDB LUN与ONTAP系统的映射。</block>
  <block id="f2acb1268f0e7873dc3d3485313eab4f" category="summary">如果您在存储环境中使用运行固件版本FOS 6.3.1或更高版本的8 Gb Brocade交换机、则必须验证连接到ONTAP系统的交换机端口上是否配置了适当的填充字设置、以及交换机端口是否连接到存储阵列。如果提供的填充词不正确、可能会导致交换机端口中的链路初始化失败。</block>
  <block id="e479f3bad055162e4aea278a2b9e2f40" category="doc">8 Gb Brocade交换机端口所需的填充字设置</block>
  <block id="8c6305546aa16c4ee2f81341ce06a1b1" category="paragraph">对于ONTAP系统、必须将相应交换机端口上的填充字设置为3。</block>
  <block id="c888c0ead4ab40e435dd9c2dbc23b3bf" category="paragraph">对于存储阵列、您必须按照Brocade交换机文档中的说明、根据以下建议值设置填充字：</block>
  <block id="30b94fdc4d03e992be9a202d81dfb34b" category="cell">存储阵列</block>
  <block id="efeed7843733d83ed4ea01fe2950c770" category="cell">在Brocade交换机端口上填写字值</block>
  <block id="c76e5f5afd86d0ca4d39ff7bb3fd722d" category="paragraph">Hitachi</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="cell">2</block>
  <block id="13e78ee01ffaba63090c33cc03de0ffc" category="paragraph">HP XP</block>
  <block id="75ff8918dee2f97b26cbc416a1f1fa6d" category="paragraph">Data ONTAP系统支持的所有其他存储阵列</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="cell">3</block>
  <block id="6085851b947b47aba7cff5a0a40e11c6" category="doc">EMC Symmetrix存储阵列系列</block>
  <block id="6e05b678d4c15a81b7ffa50a9f797d28" category="paragraph">ONTAP系统支持以下EMC Symmetrix存储阵列系列：</block>
  <block id="352b9cf6757e9b073e6cdaa67e08a66a" category="list-text">系列1：VMAX</block>
  <block id="ffe23fbacacc7bc1fb8e8f393053c07b" category="list-text">系列2：VMAX3</block>
  <block id="9af85f9ac4ab4b6c43a469ac9d70d642" category="doc">EMC VNX存储阵列系列</block>
  <block id="557c285b54dca5528f95f8d14f27520d" category="paragraph">ONTAP系统支持以下EMC VNX存储阵列系列：</block>
  <block id="c9a350e4c125b469cb2b513b60e3e033" category="list-text">系列1：VNX1</block>
  <block id="26fe3c37062dcb9d80eb5a12ef203c29" category="list-text">系列2：VNX2</block>
  <block id="797e146a7661aabd1f8ac58a34c0786a" category="paragraph">这些阵列使用非对称主动-主动(AUA)故障转移模式。</block>
  <block id="8da205032232a1e40a9e0cb257cf8d1a" category="summary">对于ONTAP支持的任何存储阵列、必须遵循特定的配置准则。</block>
  <block id="691caa8daf7394e639469b5f86d12d2f" category="doc">适用于所有存储阵列的常规配置准则</block>
  <block id="437dccfd5bfdd3eb2d908264ccb915fd" category="summary">在Hitachi存储阵列上配置端口时、应遵循某些准则。</block>
  <block id="1c6a8d3ab3a02e57acacd9f08cf79564" category="doc">在Hitachi存储阵列上配置端口的准则</block>
  <block id="e979c3f854f37f5d9f3a63c199177f01" category="paragraph">在Hitachi存储阵列上配置端口的准则如下：</block>
  <block id="600644104bf2ca45a4633395a16b2b45" category="list-text">每个端口只能添加一个主机组。</block>
  <block id="83bc5ec11a2c47107e572afd519bba25" category="list-text">您应确保主机组包含阵列LUN邻居中V系列系统的所有FC启动程序端口。</block>
  <block id="5a91e9131b918de19647615d54f0621f" category="summary">在HP XP存储阵列上配置端口时，应遵循特定的准则。</block>
  <block id="7f755fd1e37a376b28d2785b7caa583f" category="doc">在HP XP存储阵列上配置端口的准则</block>
  <block id="1458e7952e80c55ef061b11474c882a1" category="paragraph">在HP XP存储阵列上配置端口的准则如下：</block>
  <block id="cafed8d3e3cdd699df6c36afbe144626" category="summary">CLARIION和VNX阵列增加了对非对称逻辑单元访问(ALUA)的支持。</block>
  <block id="4ef405d5d12c7647844744fa2d6297b8" category="doc">在EMC VNX存储阵列上启用ALOA的准则</block>
  <block id="f79c0e2f00ab75c92316982933afb567" category="paragraph">默认情况下、ONTAP中启用了对AUA的支持。但是、要使用它、必须在存储阵列上启用ALOA。</block>
  <block id="18a4e92fa3df24cb131ea89ca55577d7" category="paragraph">您应仅在新配置上启用AUA。您不应在现有配置中启用AUA。</block>
  <block id="af5c62a685f913d1ac96af5c8c10d340" category="paragraph">如果要在存储阵列上设置ALUA、则必须确保存储组中的所有主机都处于相同的故障转移模式、即故障转移模式4 (ALUA)。</block>
  <block id="934c9168ecac5a3dad7ec0410e25dd0a" category="doc">Hitachi存储阵列系列</block>
  <block id="64432c441e870116643f238003951a5e" category="paragraph">以下列表显示了ONTAP系统支持的Hitachi存储阵列系列：</block>
  <block id="5ae785afc11e2a607b9dace27bc37971" category="list-text">系列1：VSP</block>
  <block id="678061b085ef8de53b287659786b8da8" category="list-text">系列2：VSP Gx00</block>
  <block id="52e7344e37c89e23e9a953e3c2b801b7" category="list-text">系列3：AMS 2x00</block>
  <block id="d9f439bef2008d98d8689cc9a3d44bc7" category="list-text">家庭4：Hus</block>
  <block id="65d6b4fa8fbda1964f31b5c9a1afd0fd" category="list-text">系列5：Hus VM</block>
  <block id="0fc3296e36c3a1446e5ba67526cfa847" category="summary">EMC VNX阵列使用存储组来控制对数据的访问。存储组是指存储阵列中的一个或多个LUN、只有与这些阵列LUN关联的一个或多个主机才能访问这些LUN。主机无法访问或修改不属于其存储组的任何阵列LUN中的数据。</block>
  <block id="d51254c4e779d18396a9b1cb93602a65" category="doc">EMC VNX存储阵列如何控制对数据的访问</block>
  <block id="84a4a7457841aecb00242e795d88937a" category="paragraph">如果遵循以下规则、则ONTAP支持多个存储组：</block>
  <block id="c1675795bddd96bcac329be0e72e4b52" category="list-text">交换机分区必须定义ONTAP系统上的FC启动程序端口用于访问每个阵列LUN组的目标端口。</block>
  <block id="c8044d0206f3b70cdd3b7ce72822b663" category="list-text">必须使用LUN屏蔽限制主机对阵列LUN的访问。</block>
  <block id="6618d1aa4d8563704d0ed5d9ce59bc50" category="list-text">存储组必须定义向每个FC启动程序端口提供哪些阵列LUN组。</block>
  <block id="da7f411d2c5ae64d8aad6165cb596c25" category="list-text">每个阵列LUN组需要在每个ONTAP系统上配置一个FC启动程序端口对。</block>
  <block id="baaa9870e06463ab304a61c35be8b087" category="paragraph">如果使用阵列LUN相邻关系、则同一相邻关系中的V系列系统必须位于同一存储组中。</block>
  <block id="ac0b801010adc61e33306d41c5f87392" category="doc">HP EVA存储阵列系列</block>
  <block id="0ecdee86cfce599675bc4dd303489baf" category="paragraph">以下列表显示了按系列组织的HP EVA存储阵列：</block>
  <block id="688503149d42fb05ed429ce1b7654ac6" category="list-text">系列1：P6xxxx</block>
  <block id="8fa0339f311510b4ce6a6610ab8f2add" category="list-text">系列2：HP EVA x100</block>
  <block id="2acafdbb9dc57275f667598c2f787669" category="list-text">系列3：HP EVA x400</block>
  <block id="d76d45036d1c8975f0a2141fa046af02" category="doc">HP XP存储阵列系列</block>
  <block id="1d68557d46412d5509b8ffed2bf8074f" category="paragraph">以下列表显示了按系列组织的存储阵列：</block>
  <block id="f308356bd6f109db625bdd82b73dc2fe" category="paragraph">以下列表显示了ONTAP系统支持的HP XP存储阵列系列：</block>
  <block id="a86edeafe4348c36799e6c52cba3e985" category="list-text">家庭1.</block>
  <block id="3deb6e61aaa9d8e94a7751ce45172bad" category="list-text">P9500</block>
  <block id="becd46daee8be66fee2893803683de2a" category="list-text">XP7</block>
  <block id="076cbdbb8f812d15db86b319cdda844c" category="doc">IBM DS存储阵列系列</block>
  <block id="17ba582820616138584b897723062df6" category="paragraph">以下列表显示了按系列组织的阵列：</block>
  <block id="1e767ee1695c69b2002be94047de6f6f" category="list-text">DS8300</block>
  <block id="0148e3379a8b1df5ccf2f2ccc1e46d41" category="list-text">DS8100</block>
  <block id="310d7436d764e478611c3aff678f815c" category="list-text">家庭2.</block>
  <block id="b49f741f2f5f1248ac0e9e892c8f238c" category="list-text">DS8800</block>
  <block id="1182059871b0e38d1e39dc5569f2bccd" category="list-text">DS8700</block>
  <block id="ebc0bc1740c9f0da6a4a50cc96b9bca7" category="list-text">DS8870</block>
  <block id="f0732bdb028e067d0de3729b530e03c1" category="doc">IBM Xiv存储阵列系列</block>
  <block id="904d960f772dcfd94630578759f55eee" category="paragraph">ONTAP系统支持IBM Xiv Gen3存储阵列。</block>
  <block id="9e39614af0da8c4c1a8ec074ad7835e6" category="summary">EMC VNX存储阵列仅支持从0到255的阵列LUN编号。编号超过此范围的阵列LUN对ONTAP不可见。</block>
  <block id="6658d54e195d69ddd186ef392410ee7d" category="doc">EMC VNX阵列中阵列LUN编号的限制</block>
  <block id="4bf89f98becfc2246a56a6d6db706723" category="summary">在规划ONTAP配置时、您必须考虑某些存储阵列限制。</block>
  <block id="4d0d3a06db8c031eb02c7422dc24188c" category="doc">限制使用存储阵列的配置的类型</block>
  <block id="ef8b390a533a872e7b342db3952f1c1f" category="paragraph">Hardware Universe包含存储阵列和本机磁盘的特定限制值。</block>
  <block id="2c13d5f82a8ceb42e56950e631306d14" category="paragraph">以下类型的限制仅适用于存储阵列、而不适用于本机磁盘：</block>
  <block id="bb22d988fb15632d6e5406072708ef84" category="list-text">ONTAP支持的最小和最大阵列LUN大小</block>
  <block id="03396b020fa5f37c2c9dcabf4006972f" category="list-text">根卷的阵列LUN的最小大小</block>
  <block id="a285d7d0df525d793e5368beaac3bab6" category="list-text">备用核心阵列LUN的最小大小</block>
  <block id="1eba154ecca8064a44e866662eb6dbea" category="list-text">包含阵列LUN的RAID组的限制</block>
  <block id="a77c46114d5777287a5b5ab24f91488b" category="list-text">阵列LUN聚合的最小聚合大小</block>
  <block id="545842fb843137ac841a64d2ed0b7abb" category="list-text">每个平台的最大阵列LUN和磁盘总数</block>
  <block id="deec02b736b988fa24e3630c18af5998" category="summary">在典型的光纤通道(Fibre Channel、FC)网络结构中、存储阵列端口会初始化为N端口(节点端口)、其对应的交换机端口会初始化为F端口(光纤端口)。在某些情况下、这些F端口可能会脱机并恢复为L端口(环路端口)的操作、从而导致网络结构错误。</block>
  <block id="5de7081453ef8244af72d614c47d53c2" category="doc">8-GB阵列端口初始化的要求</block>
  <block id="412dfb8a58b484637dccd0a0f5a3123a" category="paragraph">此行为是由Brocade交换机中的拓扑自动协商问题导致的。</block>
  <block id="c7ac079152b8b74e8f1e7e93c667b460" category="paragraph">要确保交换机端口始终初始化为F端口、您必须对连接到存储阵列的Brocade交换机端口运行<block ref="3c29eeebbdeee38a872c1840412f3c30" prefix=" " category="inline-code"></block><block ref="c88e58a15a47d8acee9e836f358e58b5" prefix=" " category="inline-code"></block> 命令。您必须在开始配置系统时运行此命令以避免此问题、如果出现此问题、您必须予以修复。</block>
  <block id="842a798be8054ea2dea08350e0d27f56" category="paragraph">要从整体上提高网络结构的效率、您还可以在连接到ONTAP启动程序端口的任何Brocade端口上使用此变通办法。</block>
  <block id="fd8523c1efe336738ab822235bddf672" category="summary">如果将ONTAP系统上的FC启动程序端口与HP EVA存储管理服务器上的启动程序端口与常用EVA目标端口共享、则会导致兼容性问题。</block>
  <block id="d857844463fe61a286422bf35abcc172" category="doc">配置HP EVA存储管理服务器的要求</block>
  <block id="7bfbad7317b895f758ea50a839b4d96b" category="paragraph">之所以出现兼容性问题、是因为ONTAP系统上的FC启动程序端口和EVA存储管理服务器启动程序端口的主机设置不同。</block>
  <block id="044e8b56ad21f89e9699c3207537b87e" category="paragraph">HP建议将驻留在网络结构中的所有HP EVA存储管理服务器配置在与所有操作系统分开的区域中。</block>
  <block id="3910f42ec7b7a2e1d7fe4151a9ecf111" category="summary">在动态池中创建LUN时、请勿过度配置池容量。</block>
  <block id="beaddf13230d5cb6b8b77290d1687a28" category="doc">在动态池中创建LUN的要求</block>
  <block id="b4436fda5d10b8e818eb8040e64381b3" category="summary">您可以执行不同类型的阵列LUN格式化。每种类型都会影响LUN或整个存储阵列的可用性。</block>
  <block id="18c4eb95e6eb4322adb8ea09372b6ef5" category="doc">格式化阵列LUN的要求</block>
  <block id="fa8fe68c2064a6bb0f17e4c4d131c27d" category="paragraph">如果必须立即向ONTAP系统提供新的LUN、则应使用快速格式化。如果您计划将来向ONTAP系统提供LUN、则建议进行快速格式化、但可以进行联机格式化。</block>
  <block id="714e4c37019f04615a401fa566b928e6" category="paragraph">建议进行快速格式化、因为联机和脱机格式化会将磁盘发现延迟到LUN格式化完成之后、如以下列表所述：</block>
  <block id="dbd10204ff904de05eaa56904536eed8" category="list-text">联机格式化会使正在格式化的阵列LUN完全脱机、并且阵列LUN不会响应任何SCSI命令。</block>
  <block id="ae6c06213054fc548e8cb281b5eba06c" category="paragraph">一次对一个阵列LUN执行格式化、直到对所有阵列LUN进行格式化为止。</block>
  <block id="b3ac16c6ce454d10d7b7009f2e178cc0" category="list-text">脱机格式化会使整个存储阵列脱机、并且存储阵列不会对任何SCSI命令做出响应。</block>
  <block id="815444b45789ab3c44d1f35774bf5005" category="paragraph">每个控制器一次对六个阵列LUN进行格式化、直到格式化完成为止。</block>
  <block id="45bbeb5e888deccd8e0df75d44b80e22" category="paragraph">在所有格式化完成之前、存储阵列不会响应。</block>
  <block id="0b70b751883ed5622a63c61d282183f5" category="list-text">如果在初始设置ONTAP系统后创建阵列LUN (对于任何主机)、并且使用脱机格式化、则系统将发生故障。</block>
  <block id="0de4727c6cde753ff356185d25e53bb5" category="paragraph">在格式化完成之前、映射到ONTAP系统的所有阵列LUN (包括根卷中的阵列LUN)都将不可用。</block>
  <block id="f79ad8aef08eb7b64597dfaf2a036481" category="list-text">联机快速格式化其他主机的LUN不会影响ONTAP系统。</block>
  <block id="1b36d4cc806754eff6935e8783948793" category="summary">您可以使用LUN安全性来消除主机向非该主机所拥有的LUN写入数据的可能性。</block>
  <block id="08085626d8396eeb3d42ef74aec23905" category="doc">在EMC Symmetrix存储阵列上实施LUN安全性的要求</block>
  <block id="4bcd23e044c5966ee4633fd5a19f92f0" category="paragraph">要避免非ONTAP主机覆盖ONTAP系统拥有的EMC Symmetrix阵列LUN或反之、您必须通过主机(通道)控制器端口通过以下方式之一提供Symmetrix逻辑设备：</block>
  <block id="fc6bfac85f7ab9d4396f0550d93349aa" category="list-text">仅在专用于ONTAP的特定Symmetrix主机(通道)控制器端口上提供ONTAP的Symmetrix逻辑设备。</block>
  <block id="6e4c1bc6d26e143d66512f20e3705f16" category="paragraph">如果端口不能专用于ONTAP、则应确认使用这些端口的所有其他主机均符合ONTAP要求。这是因为连接到Symmetrix阵列的每个主机都需要不同的端口属性设置。在连接到Symmetrix存储阵列的多个主机之间共享端口可能会导致无法实施配置。</block>
  <block id="d8663e5dc925acff8265ae786ca28667" category="list-text">对于VMAX存储阵列、通过创建端口组、存储组和启动程序组来为所需映射和屏蔽创建屏蔽视图。</block>
  <block id="22178c2a776a591c3eb34d409f8df84a" category="paragraph">为此、必须先在VMAX存储阵列端口上启用ACLX端口属性。</block>
  <block id="6f36a403275b4a566b15e1c226f3f373" category="paragraph">默认情况下、不要向所有主机提供VCMDB LUN。配置全局设置、以限制VCMDB的可见性、除非已明确对特定主机可见。</block>
  <block id="3de9060b963f4c0a0fce7d8cfa2633b7" category="summary">ONTAP支持在供应商支持的存储阵列后面使用相同的磁盘(即存储阵列外部的磁盘)。在部署使用外部磁盘的存储阵列时、ONTAP会接受存储阵列与外部磁盘之间的配置。</block>
  <block id="ff50794d84a467c76cc215a0cac27caa" category="doc">使用存储阵列外部磁盘的要求</block>
  <block id="fcda5dcbd560b15cc93a55f78150c170" category="paragraph">以下是部署使用外部磁盘的存储阵列的限制和最佳实践建议：</block>
  <block id="291ca7a9fe914354cdf0d72f7eae648b" category="list-text">外部磁盘支持根卷和备用核心LUN。</block>
  <block id="cd9938c00c9c0e933ad6a503af86c056" category="list-text">外部磁盘和内部磁盘中的阵列LUN不应位于同一个ONTAP聚合中。</block>
  <block id="61f44a5f2571e8d510b9fc4324b05793" category="list-text">SATA驱动器中的阵列LUN和FC驱动器中的阵列LUN不应位于同一聚合中。</block>
  <block id="924f522537116e67362da0b4f62ada96" category="list-text">外部磁盘上阵列LUN的路径数规则与存储阵列上磁盘上的阵列LUN的规则相同。</block>
  <block id="f6e6b09e41d111cfd9383959059236d3" category="paragraph">对于外部磁盘、路径从ONTAP系统通过存储阵列传输到外部磁盘。</block>
  <block id="610a25b71bb00c57074249dec7bebe19" category="list-text">外部磁盘上的阵列LUN仅支持块校验和。</block>
  <block id="3ce2072300942df27321b0c0692f9351" category="summary">您必须了解配置DS8xxx阵列时可用于LUN组的卷组数量限制。</block>
  <block id="5b36a23392fa5a7f967c2e623f979ac0" category="doc">DS8xxx存储阵列上的卷组要求</block>
  <block id="73dc2bbc0987ae3c5390124ac523bc12" category="paragraph">您必须为DS8xxx存储阵列上的每个LUN组使用一个卷组、以确保DS8xxx阵列LUN始终提供给访问它们的所有FC启动程序(位于ONTAP系统上)。</block>
  <block id="c372f4b9dda0fb1436156181278aa23f" category="paragraph">如果阵列LUN的显示不一致、则可能会导致数据损坏。</block>
  <block id="7e8aaf310487cd11b01cde0f11ac4ae0" category="summary">如果提供了网关守逻辑设备(LUN)、则不得将其映射到ONTAP系统。ONTAP系统不能使用gatekeeper LUN。关守LUN是Symmetrix逻辑设备、SYMAPI或ControlCenter代理通过此设备与存储阵列进行通信。</block>
  <block id="14c47f8530d1a5cac69af6e9645310d9" category="doc">使用关守LUN的限制</block>
  <block id="d2ff95f57d03c64d631c240285d661c6" category="summary">除非互操作性表中另有说明、否则ONTAP不支持存储阵列的高级功能。</block>
  <block id="ffe99eee92808895cf3d197c3a4af575" category="doc">支持存储阵列的高级功能</block>
  <block id="173411ac1ab2300ee9a144597b3a273d" category="summary">欢迎使用ONTAP FlexArray信息库。您可以在此处找到有关如何将第三方存储阵列用作集群后端存储的信息。</block>
  <block id="2dad7e560a72e7fda783d07a08b52b0b" category="doc">第三方存储的FlexArray®虚拟化实施</block>
  <block id="f4aebfbf739f1eaa515abdaa9901e413" category="summary">在配置存储阵列以使用使用阵列LUN的ONTAP系统时、您必须满足特定要求。这些要求包括在存储阵列上设置配置参数以及仅部署受支持的配置。</block>
  <block id="6e7cfcfe0f36d95fd64105bae0aa0a43" category="doc">3PAR存储阵列</block>
  <block id="374152016dfa585ad380e9284fda7050" category="summary">在配置存储阵列以使用使用阵列LUN的ONTAP系统时、您必须满足特定要求。这些要求包括在存储阵列上设置配置参数以及仅部署受支持的配置。</block>
  <block id="fc05e2faefbee990edbc6563a423ff4d" category="doc">EMC Symmetrix存储阵列</block>
  <block id="1221c6855cabfa0b9a9b580a63af8fc0" category="summary">在配置EMC VNX存储阵列以使用使用阵列LUN的ONTAP系统时、您必须满足特定要求。这些要求包括在存储阵列上设置配置参数以及仅部署受支持的配置。</block>
  <block id="367bfacc8c5e9f23e1ae70502035b54f" category="doc">EMC VNX存储阵列</block>
  <block id="ccb452edcbd5f78c7fe32180aaae304f" category="summary">在将Hitachi存储阵列配置为与使用阵列LUN的ONTAP系统配合使用时、您必须满足特定要求。这些要求包括在存储阵列上设置配置参数以及仅部署受支持的配置。</block>
  <block id="3817ce87677da16b9b85c8c15f37d38a" category="doc">Hitachi存储阵列</block>
  <block id="f9602749bfb008d66f06b5622152c4c6" category="summary">在配置存储阵列以使用ONTAP系统时、您必须满足特定要求。这些要求包括在存储阵列上设置配置参数以及仅部署受支持的配置。</block>
  <block id="0ee289026ad13238b5aca77af68bb046" category="doc">HP EVA存储阵列</block>
  <block id="3abdc782afff858b7d7cb638d3aaa1d1" category="doc">HP XP存储阵列</block>
  <block id="e8cc86399676e52a6617f61b7c735daf" category="doc">IBM DS存储阵列</block>
  <block id="5613bc6950c3d1390c535925ea0bedb9" category="doc">IBM Xiv存储阵列</block>
  <block id="515fa10dfa23047a044cf46dbef13f46" category="summary">要使存储阵列成功与ONTAP系统配合使用、需要在存储阵列上设置某些参数。</block>
  <block id="48fafaf46879bb8c6512ceb7806ba54c" category="doc">使用ONTAP系统的3PAR阵列所需的参数</block>
  <block id="70c89a0a19dde6c2d8b6ae4c3016b17b" category="section-title">主机个人设置</block>
  <block id="6ec2d3d90bb35bd010553a97e8d2308f" category="paragraph">对于固件为3.3.1及更高版本的3CAR阵列、必须按下表所示设置所需的主机个人身份值：</block>
  <block id="d0afed67605524c7117536fe92ce3da8" category="cell">连接类型</block>
  <block id="9dd79f40c36f574f1dd8d68c1deea6d2" category="cell">主机个人身份</block>
  <block id="eb7e971bcf26f65f0b800db3b6fb403d" category="paragraph">直接连接</block>
  <block id="d3d9446802a44259755d38e6d163e820" category="paragraph">10</block>
  <block id="c23d1cfc222afdf3aa4b1db0b446645a" category="paragraph">光纤连接</block>
  <block id="5e8529eac16514d4df9441d60e6c7407" category="paragraph">在对交换机进行分区以将ONTAP系统连接到3CAR存储阵列之前、应在3CAR存储阵列上创建具有所需主机角色的主机定义。如果在定义主机之前配置了分区、则ONTAP会发现3PAR LUN为LUN 254和产品类型SES、而ONTAP无法使用这些LUN。因此、无法将新映射的3PAR LUN分配给ONTAP系统、并且无法使用某些可能已添加到聚合的3PAR LUN、因为ONTAP会看到LUN 254、而不是3PAR LUN。如果发生此问题、ONTAP将生成以下EMS消息：</block>
  <block id="1fd315f14fb13e01f788612b946bf167" category="paragraph">如果在定义主机之前配置了分区、则可以通过执行路径重新初始化来强制重新发现从3CAR存储阵列映射的阵列LUN来解决此问题。有关此问题的解决方法、请参见"解决3CAR存储阵列中未知设备(L254/SES)问题"一节。</block>
  <block id="1e9511ee4fca6236f57a13d45aff57e0" category="inline-xref-macro">3CAR存储阵列的未知设备(L254/SES)问题的解决方法</block>
  <block id="7e3393d39305ef7911016c62a7312439" category="paragraph"><block ref="7e3393d39305ef7911016c62a7312439" category="inline-xref-macro-rx"></block></block>
  <block id="8ddc8042d73e95950ee1411aa779761e" category="section-title">端口个人设置</block>
  <block id="fb7450f7d11bff5c30ab1358f60edb7f" category="paragraph">对于固件为2.2.x的3CAR阵列、必须按下表所示设置所需的端口个人身份值：</block>
  <block id="2248ecf6dd03b5d7ff08b970efd30389" category="cell">端口个人身份</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="paragraph">18</block>
  <block id="1f0e3dad99908345f7439f8ffabdffc4" category="paragraph">19</block>
  <block id="4c6a90cfae0fd61990e48c64a279d5fc" category="doc">ONTAP系统存储阵列上所需的参数设置</block>
  <block id="c25c172111d3af8890bbd3c15cb74c3d" category="section-title">所需的主机通道控制器端口配置参数</block>
  <block id="fcbffd57b4a67dc97ac4bbaf5c8b7847" category="paragraph">下表显示了必须在存储阵列上设置的主机通道控制器端口配置参数：</block>
  <block id="1d44119261cd708c40d68c8518cd4120" category="cell">参数(GUI和CLI的名称可能不同)</block>
  <block id="51ac4bf63a0c6a9cefa7ba69b4154ef1" category="cell">设置</block>
  <block id="1a73df38298a6b7564ec4785d9f4ae79" category="paragraph"><block ref="0d495bfab484ce1bff0d4fe009650c67" prefix="" category="inline-code"></block> (通用序列号或C位参数)</block>
  <block id="2faec1f9f8cc7f8f40d521c4dd574f49" category="paragraph">启用</block>
  <block id="555a8fec482fd133d8296749781de967" category="paragraph"><block ref="4baee84af7a92177c9064ddc2fc010ce" prefix="" category="inline-code"></block> (点对点参数)</block>
  <block id="92039f8b069fd37f4498fd76a9991f35" category="paragraph"><block ref="64aa6d1b12ce0cf692961f6d6f060d78" prefix="" category="inline-code"></block> (SCSI-3)</block>
  <block id="fd95f6c455141df0b9b28e9f8bcbf5b2" category="paragraph"><block ref="ca835d92d7397d9718b1e9eede189ed4" prefix="" category="inline-code"></block> (SCS2_Protocol_version、SCSI Primary Command 2参数或<block ref="ce9be728857c5e1b31c34cecb601f697" prefix=" " category="inline-code"></block></block>
  <block id="36f6ca3da389f603e91316d6319f7464" category="paragraph"><block ref="40f65f5d097a6e56e8a1a45565a0a38a" prefix="" category="inline-code"></block> (唯一全球通用名称)</block>
  <block id="cce446eb8900bcaef180ec4ba1483afc" category="paragraph"><block ref="852d00525c262dda5c456568a71e300d" prefix="" category="inline-code"></block></block>
  <block id="bcfaccebf745acfd5e75351095a5394a" category="paragraph">禁用</block>
  <block id="5786636e34a8e10a236aee21d0dc6b9d" category="paragraph"><block ref="852d00525c262dda5c456568a71e300d" prefix=" " category="inline-code"></block>必须在LUN映射到的所有通道控制器端口上以相同方式设置参数。如果设置不同、ONTAP会在输出和EMS消息中报告LUN ID不匹配的情况<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 。</block>
  <block id="3631d7ce503264c3f1a2838e987a60af" category="doc">使用ONTAP系统的EMC VNX存储阵列所需的参数</block>
  <block id="db7d779b10d7354f81ab34ba8b006744" category="paragraph">下表列出了必须在存储阵列上设置的主机配置参数。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">参数</block>
  <block id="d0b9a7f8ff24642b227c591113418ae0" category="paragraph"><block ref="e8072aa8a8443b75cf78b32239cc4653" prefix="" category="inline-code"></block></block>
  <block id="f0e1f2a9cea5bf7c671eeacaa7106986" category="paragraph">CLARi/VNX</block>
  <block id="d0992dd69e424ebf3fd327652c4fe301" category="paragraph"><block ref="b1ebd6bb1912670a8fb3d98cede3e562" prefix="" category="inline-code"></block></block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="paragraph">已启用</block>
  <block id="a32ea4e7810743b49ce834f8d373b1e8" category="paragraph"><block ref="30c6d1c8c0304b5b54693cf09bccff9b" prefix="" category="inline-code"></block></block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="paragraph">4</block>
  <block id="e35abb15d355b9f1dccae36f8908ebf2" category="paragraph"><block ref="7ed605961d68ae1a8b11de69125aa975" prefix="" category="inline-code"></block></block>
  <block id="b26e74ed6e2892c7e2bb95e414d460c6" category="paragraph">LUN</block>
  <block id="58380b9ccb430fab72fc140d3d6e2560" category="paragraph"><block ref="dae4a538d4ca7b6c0789932062fe718d" prefix="" category="inline-code"></block></block>
  <block id="4c24e64b9779773520485af6583a85f7" category="paragraph">用户提供的主机名和端口号</block>
  <block id="bcade9c0ff948ba3ee93f782d7ce8364" category="paragraph"><block ref="75ba8d70e3692ba200f0e0df37b4d2ae" prefix="" category="inline-code"></block></block>
  <block id="1ab4c4c8aadc8b62aa4d88ddc13a0393" category="paragraph">唯一伪IP地址您必须确保未在存储阵列配置中的任何其他位置输入此IP地址、并且此IP地址不是网络上存在的IP地址。</block>
  <block id="1451114192fc378e16aea151e69e28d0" category="doc">使用ONTAP系统的Hitachi存储阵列所需的参数</block>
  <block id="54eaa5c6476bb20bf06aa72b534b99ed" category="section-title">AMS和HUS存储阵列所需的系统参数</block>
  <block id="e9622d7b535336ef569039838cb3546c" category="paragraph">下表列出了必须设置的参数：</block>
  <block id="97ff921ab5378fe049c46d287f01885b" category="paragraph"><block ref="c6d636b35d3f23d8f49131cf397ad940" prefix="" category="inline-code"></block></block>
  <block id="8cf2e3bcf4ad0cc360667b00ee9c5808" category="paragraph"><block ref="e097b8ecac76d9752d8c30326a6a9a61" prefix="" category="inline-code"></block></block>
  <block id="e92a643797cf77b33c654c177207e252" category="paragraph"><block ref="4e624ac37eaed7100109160643a0e875" prefix="" category="inline-code"></block></block>
  <block id="f71efdf959dea666f6974a773c8b11f3" category="paragraph">标准模式</block>
  <block id="91adea9197065bbb632c01a74113869f" category="paragraph"><block ref="419f3742e6de8e0ec4b22cce005e7630" prefix="" category="inline-code"></block></block>
  <block id="dd3195ced9c1810388e28ca2b4eb921f" category="paragraph">未指定</block>
  <block id="5683e70dbfc91212a037648621bc7bf8" category="paragraph"><block ref="a112bfee20b0d63490e93e7c687338df" prefix="" category="inline-code"></block></block>
  <block id="ec02830e1b1e786de98b1b286bbdc32c" category="section-title">VSP和HUS VM存储阵列所需的系统参数</block>
  <block id="59cbb9a306d6af4143c68c583ce1fa66" category="paragraph"><block ref="cc7f159a9ea1fa424339f581d2a8e50d" prefix="" category="inline-code"></block></block>
  <block id="a60240b1c4e5e6bf624e0006dfcab1ff" category="paragraph">标准或00</block>
  <block id="01722d8d9b7761319f7ee7b916a1416a" category="paragraph"><block ref="c964378a1b7af535f1912ca284d3bdf5" prefix="" category="inline-code"></block></block>
  <block id="fbe9197e3397346d8bca6fce78cbbfc9" category="paragraph">应为每个启动程序-目标端口对创建一个与默认主机组不同的主机组。</block>
  <block id="04c1ee6cd8842b47941d4f0e1231c83c" category="paragraph">在对交换机进行分区以将ONTAP系统连接到Hitachi存储阵列之前、应设置存储阵列参数并将LUN映射到主机组。</block>
  <block id="66fa2ce091ce9cfcb7338d691d45b266" category="paragraph">如果在设置存储阵列参数之前已将ONTAP FC启动程序端口与Hitachi阵列目标端口分区、并且LUN已映射到主机组、则可能无法看到提供给ONTAP接口的任何LUN。</block>
  <block id="f62d4dc290755850bfd049fe216208db" category="paragraph">在这种情况下、ONTAP会生成以下EMS消息之一：</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="section-title">临时解决策</block>
  <block id="81d4aaf8c9975b28426073051ffe5b9d" category="paragraph">如果在设置参数并将LUN映射到主机组之前配置了分区、则可以通过执行路径重新初始化来强制重新发现从Hitachi存储阵列映射的阵列LUN、从而解决LUN不可见的问题。有关此问题的解决方法、请参见"在Hitachi存储阵列中看不到LUN时的解决方法"一节。</block>
  <block id="8a425ac84e838b82d808b4dde625526e" category="inline-xref-macro">在Hitachi存储阵列中看不到LUN时的解决方法</block>
  <block id="d9ba4877c50ec44b6ca00fc7c5f998e7" category="paragraph"><block ref="d9ba4877c50ec44b6ca00fc7c5f998e7" category="inline-xref-macro-rx"></block></block>
  <block id="dbe97359d496fa90f69f49d4dc23c563" category="doc">使用ONTAP系统的HP EVA阵列所需的参数</block>
  <block id="0b1893ef0c0caa2d1e55e54ec3b64579" category="paragraph">下表提供了系统参数设置：</block>
  <block id="e8de6ec537bf949b63cd7def8e894cc3" category="paragraph"><block ref="f10475ef438ec27ff53b1f5ce5e4f5d8" prefix="" category="inline-code"></block></block>
  <block id="ed8be8b1dc56a6ed496e90e3dfaeda05" category="paragraph">除VRAID0之外的任何RAID级别</block>
  <block id="7f90e0e6f4635093a6240391a1bc26a3" category="paragraph"><block ref="d99181aaf359446eca1e244fa4364d29" prefix="" category="inline-code"></block></block>
  <block id="d403e4dd4b1155cec32331c06f9f3577" category="paragraph">无首选项(默认)</block>
  <block id="e49fa6a3ec39c239958aafd61ec81494" category="paragraph"><block ref="7cc99f0871ef035e270d488aaa7481c5" prefix="" category="inline-code"></block></block>
  <block id="57114d44ee4dae9cace215954b1f576a" category="paragraph">SUN Solaris</block>
  <block id="2a6981c3d5f23e5dd0153912a1c49613" category="summary">要使此存储阵列成功用于ONTAP系统、需要在该存储阵列上设置某些参数。</block>
  <block id="cf7d53f108d6e2603a97f9f58abdba51" category="doc">使用ONTAP的HP XP存储阵列所需的参数</block>
  <block id="9bc61aa1f8f46a7be8040f4c9282c449" category="section-title">HP XP存储阵列所需的系统参数</block>
  <block id="98b5175c26612a7c9f7514606fec48b4" category="paragraph">下表显示了所需的参数设置：</block>
  <block id="98b7304f452b848cb771310e503e29b9" category="paragraph">在对交换机进行分区以将ONTAP系统连接到HP XP存储阵列之前、应设置存储阵列参数并将LUN映射到主机组。</block>
  <block id="55491320d35b35ec6bcb9f32fbf8012d" category="paragraph">如果在设置存储阵列参数之前已使用HP XP阵列目标端口对ONTAP FC启动程序端口进行分区、并且LUN已映射到主机组、则可能无法看到提供给ONTAP接口的任何LUN。</block>
  <block id="0576eb07d1c4ddbb255831c78a349d6c" category="paragraph">如果在设置参数并将LUN映射到主机组之前配置了分区、则可以通过执行路径重新初始化来强制重新发现从HP XP存储阵列映射的阵列LUN、从而解决LUN不可见的问题。</block>
  <block id="63488b36f9754da8300a0e93453d7aa9" category="inline-xref-macro">在HP XP存储阵列中看不到LUN时的解决方法</block>
  <block id="60fe8d5530e2681bf4c7b3c67b3b37e4" category="paragraph"><block ref="60fe8d5530e2681bf4c7b3c67b3b37e4" category="inline-xref-macro-rx"></block></block>
  <block id="19c8455e3b2fc3d47ea4ab73f848077a" category="doc">使用ONTAP系统的IBM DS存储阵列所需的设置</block>
  <block id="40edb2534764ad2c17a8c647cd202c62" category="section-title">DS8xxx存储阵列所需的主机类型</block>
  <block id="2b3b86cfbe5fb2f8f1bd85fc02c84128" category="paragraph">下表显示了所需的主机类型设置：</block>
  <block id="71bd159d5007583b2981f3f50d0ccb76" category="paragraph">N系列网关</block>
  <block id="d23a377090172b7c8e4508e75d934091" category="section-title">DS8300 9A2 LPAR型号的配置要求</block>
  <block id="65c3bd180a36808a10e61546092a863f" category="paragraph">在设置DS9300 9A2 LPAR (系统逻辑分区)模型以与ONTAP系统交互时、您必须设置对每个阵列LUN的访问权限、以便冗余路径都访问同一个LPAR。</block>
  <block id="a4a3348fc41e0a7286a2fcd516567de6" category="doc">使用ONTAP系统配置IBM Xiv阵列的要求</block>
  <block id="31ea99384ab6c666de2e458a6b30123c" category="section-title">系统参数设置</block>
  <block id="51c819dc96b5d16bb37987a93b4ca4f7" category="paragraph">下表列出了IBM Xiv Gen3阵列的系统参数设置：</block>
  <block id="883e5ee58fcff55b813ff95b82e53765" category="paragraph"><block ref="a1fa27779242b4902f7ae3bdd5c6d508" prefix="" category="inline-code"></block></block>
  <block id="7a1920d61156abc05a60135aefe8bc67" category="paragraph">默认</block>
  <block id="42348c07f83f7b8607ff0ae8a8b33fc8" category="paragraph"><block ref="c2ca16d048ec66e04bca283eab048ec2" prefix="" category="inline-code"></block></block>
  <block id="4f0c3f6632816bcd493cff26cb441967" category="paragraph">用户提供的主机名</block>
  <block id="3f5b00065eea9c8556be77e7806c9933" category="paragraph"><block ref="249694a485fc5d3289c38986b4f8e887" prefix="" category="inline-code"></block></block>
  <block id="4a1c37c48e116c012944d47973915eb0" category="paragraph">用户提供的集群名称</block>
  <block id="f0aadd1a7d9cacc68cd028b501d1a13c" category="summary">除非另有说明、否则所有存储阵列供应商都支持各种光纤连接配置。</block>
  <block id="6dbf2de05653ce503786dbbb2725b597" category="doc">支持的光纤连接配置</block>
  <block id="b846bf2fd98047734ad3dc64085afe19" category="summary">在对交换机进行分区以将ONTAP系统连接到3PAR存储阵列之前、应在3PAR存储阵列上创建主机定义、并在"使用ONTAP系统的3PAR阵列所需参数"部分中指定主机角色。如果在定义主机之前配置了分区、则ONTAP会发现3PAR阵列LUN为LUN 254和产品类型SES、而ONTAP无法使用这些LUN。</block>
  <block id="4cb5baa0b3609d80e02e7e5c34643806" category="paragraph"><block ref="4cb5baa0b3609d80e02e7e5c34643806" category="inline-xref-macro-rx"></block></block>
  <block id="b7f1aaf606482d31550089d6dec1c5da" category="paragraph">当ONTAP发现3PAR阵列LUN为LUN 254且产品类型为SES时、新映射的3PAR LUN无法分配给ONTAP系统、并且某些可能已添加到聚合的3PAR LUN无法使用、因为ONTAP会发现LUN 254。ONTAP会为其发现的LUN (LUN 254和产品类型SES)生成EMS消息、并将某些LUN报告为未知设备。</block>
  <block id="2729dd794e0f8aa407ea71f3b22c06c3" category="paragraph">如果在定义主机之前配置了分区、则可以通过强制重新发现从3CAR存储阵列映射的阵列LUN来解决LUN 254/SES未知设备问题。您使用的过程取决于是否已在ONTAP系统上配置具有3PAR阵列LUN的聚合。(在以下过程中、假设节点1和节点2是ONTAP节点的名称。)</block>
  <block id="b8d852bbf325bf12552db254f3538264" category="section-title">如果已在ONTAP系统上创建包含3PAR阵列LUN的聚合</block>
  <block id="2535f3e78024ec4f85dd22cb6d24c2e8" category="list-text">运行以下命令、确保已在ONTAP系统上启用HA配置： <block ref="801da29841523bcd41f9523752bc0f86" prefix="*" category="inline-code"></block>*</block>
  <block id="9a940b51cdd2b2d508cffc6eecff9e32" category="paragraph">此时将显示以下输出：</block>
  <block id="1e7a94185199d6d366a6790604209949" category="list-text">运行以下命令、确保已在ONTAP系统上配置存储故障转移： <block ref="ddf400f1cb6b8b9330ed6c79c508123c" prefix="*" category="inline-code"></block>*</block>
  <block id="e5e2d3fb43df8465ae0c96e95a9e371a" category="list-text">运行以下命令、对节点1执行接管操作： <block ref="311608dac7b1e21df0f867a4bfe52cd7" prefix="*" category="inline-code"></block>*</block>
  <block id="10dba5395d3cdbe00fa4e35d18bcf5c6" category="list-text">再次运行以下命令、以验证节点2是否已准备好进行恢复操作： <block ref="ddf400f1cb6b8b9330ed6c79c508123c" prefix="*" category="inline-code"></block>*</block>
  <block id="e560810d0ad149237d1e9c2e66421077" category="list-text">运行以下命令、在节点1上执行一个回给操作： <block ref="94c85818f42dca1741275251c5a2a956" prefix="*" category="inline-code"></block>*</block>
  <block id="d382f7d4419aa03fee8b3d9284c2c570" category="list-text">在集群中的其他节点上、重复步骤3到步骤5。</block>
  <block id="c71e794c848907b8ece35e7713c8b188" category="section-title">如果尚未在ONTAP系统上创建包含3PAR阵列LUN的聚合</block>
  <block id="9070364daddca0025f79eff6cb60a275" category="list-text">运行以下命令以列出连接到3PAR存储阵列的所有ONTAP FC启动程序端口： <block ref="0768e99328d0d82ade81684e484e7847" prefix="*" category="inline-code"></block>*</block>
  <block id="4c1c196747c3bd5379fcec214e3a931c" category="paragraph">以下示例显示了包含特定节点名称的命令： <block ref="b39b61c8706d7ff75504306c235acf78" prefix="*" category="inline-code"></block>*</block>
  <block id="0912e41fe42aebc5b67dee31d3da1884" category="list-text">运行以下命令、使列出的所有端口脱机： <block ref="81ecf94baa138dd9e926ae62b052f0a1" prefix="*" category="inline-code"></block>*</block>
  <block id="e01502ab3b813137b36ee52df5d22f04" category="paragraph">以下示例显示了包含特定节点名称和适配器的命令： <block ref="d9e4953a3ef215d609ba85afcff3381d" prefix="*" category="inline-code"></block>*</block>
  <block id="18ef7026f45401817bd421c9221d50aa" category="list-text">运行以下命令、使列出的所有端口联机： <block ref="75c2e7ff39306185c09fd6b95c37c9f5" prefix="*" category="inline-code"></block>*</block>
  <block id="7f724bf2bcd5ca160edee0f0a37eff4b" category="paragraph">以下示例显示了包含特定节点名称和适配器的命令： <block ref="c3d1ec4c63b9aabed4fa2e1d8ead0ca0" prefix="*" category="inline-code"></block>*</block>
  <block id="7c76b4f787ac104948df3df4c08034a2" category="summary">在对交换机进行分区之前、应设置"Required parameters for Hitachi storage arra如 使用运行ONTAP的系统的Hitachi存储阵列"部分中指定的存储阵列参数、并将LUN映射到主机组、以便将使用阵列LUN的ONTAP系统连接到Hitachi存储阵列。</block>
  <block id="fec78394509bfc75331cf948871cd79c" category="inline-xref-macro">系统运行ONTAP时Hitachi存储阵列的必需参数</block>
  <block id="3857f0ef7d2c3435dce40550e73212b4" category="paragraph"><block ref="3857f0ef7d2c3435dce40550e73212b4" category="inline-xref-macro-rx"></block></block>
  <block id="01d7030ae261449d4ed67c11e61953fb" category="paragraph">如果在设置参数并将LUN映射到主机组之前配置了分区、则可以通过执行路径重新初始化来解决LUN不可见的问题。路径重新初始化会强制重新发现从Hitachi存储阵列映射的阵列LUN。</block>
  <block id="c4a7448fa84426f1dfc6e12beaba535f" category="paragraph">您使用的过程取决于是否已在ONTAP系统上配置使用Hitachi阵列LUN的聚合。(在以下过程中、假设节点1和节点2是ONTAP节点的名称。)</block>
  <block id="3a8888dff0040c4d135699b2eeb1248e" category="section-title">如果在使用阵列LUN的ONTAP系统上已创建包含Hitachi阵列LUN的聚合</block>
  <block id="4bfbcef6622f172b3ed1989de6b82089" category="list-text">运行以下命令、确保已在ONTAP系统上启用HA配置： <block ref="801da29841523bcd41f9523752bc0f86" prefix="*" category="inline-code"></block>*</block>
  <block id="0633002b9cd0c9331160211433f8ac31" category="list-text">运行以下命令、确保已在ONTAP系统上配置存储故障转移： <block ref="ddf400f1cb6b8b9330ed6c79c508123c" prefix="*" category="inline-code"></block>*</block>
  <block id="db7c9ab47a1b72d353f4fe7cca9dc6c6" category="list-text">运行以下命令对节点1执行接管操作： <block ref="311608dac7b1e21df0f867a4bfe52cd7" prefix="*" category="inline-code"></block>*</block>
  <block id="1fc478662a1b49e8667aafb79c34a669" category="list-text">再次运行以下命令、以验证节点2是否已准备好进行恢复操作： <block ref="ddf400f1cb6b8b9330ed6c79c508123c" prefix="*" category="inline-code"></block>*</block>
  <block id="a576e484fce37c294d82e8452e8064aa" category="list-text">运行以下命令、对节点1执行一次回给操作： <block ref="94c85818f42dca1741275251c5a2a956" prefix="*" category="inline-code"></block>*</block>
  <block id="635ca9c1f4ef81a295fde620c23e71e9" category="section-title">如果尚未在使用阵列LUN的ONTAP系统上创建包含Hitachi阵列LUN的聚合</block>
  <block id="842ac7939290794293a646d42ed8e0e2" category="list-text">运行以下命令、列出连接到Hitachi存储阵列的所有ONTAP FC启动程序端口： <block ref="0768e99328d0d82ade81684e484e7847" prefix="*" category="inline-code"></block>*</block>
  <block id="aa20fcdc8a32f8c541539f1dccaba621" category="paragraph">例如： <block ref="b39b61c8706d7ff75504306c235acf78" prefix="*" category="inline-code"></block>*</block>
  <block id="95bcac28028a02e284c6c2f0b8eb5416" category="list-text">运行以下命令、使列出的所有端口脱机： <block ref="81ecf94baa138dd9e926ae62b052f0a1" prefix="*" category="inline-code"></block>*</block>
  <block id="e95a6d211e961645dac52e9bfa68374a" category="paragraph">例如： <block ref="d9e4953a3ef215d609ba85afcff3381d" prefix="*" category="inline-code"></block>*</block>
  <block id="da924b7393c25eed375e347a36c32d36" category="list-text">运行以下命令、使列出的所有端口联机： <block ref="75c2e7ff39306185c09fd6b95c37c9f5" prefix="*" category="inline-code"></block>*</block>
  <block id="eeab6be8e0f11fb03f95695db7717f84" category="paragraph">例如： <block ref="c3d1ec4c63b9aabed4fa2e1d8ead0ca0" prefix="*" category="inline-code"></block>*</block>
  <block id="9a8b51873c008dd3402f6619b8481a8b" category="summary">在对交换机进行分区以将使用阵列LUN的ONTAP系统连接到HP XP存储阵列之前、应设置"使用ONTAP系统的HP XP存储阵列所需参数"部分中指定的存储阵列参数、并将LUN映射到主机组。</block>
  <block id="f53b57a9201f40ec1156104cc0cc7519" category="inline-xref-macro">使用ONTAP系统的HP XP存储阵列所需的参数</block>
  <block id="a673f8580f76adfbf94b3ef07297006e" category="paragraph"><block ref="a673f8580f76adfbf94b3ef07297006e" category="inline-xref-macro-rx"></block></block>
  <block id="5722ba2da2bdd059817c5fa87b65c1f0" category="paragraph">如果在设置参数并将LUN映射到主机组之前配置了分区、则可以通过执行路径重新初始化来解决LUN不可见的问题。路径重新初始化会强制重新发现从HP XP存储阵列映射的阵列LUN。</block>
  <block id="797e68ec3b8d96cd60aa953fd3285cea" category="paragraph">您使用的过程取决于ONTAP系统上是否已配置具有HP XP阵列LUN的聚合。(在以下过程中、假设节点1和节点2是ONTAP节点的名称。)</block>
  <block id="b8f46dc11ec1c91b90cbbeff0e481494" category="section-title">如果在使用阵列LUN的ONTAP系统上已创建包含HP XP阵列LUN的聚合</block>
  <block id="856b1585dd35279c4c4bf8857aa445f2" category="section-title">如果尚未在使用阵列LUN的ONTAP系统上创建包含HP XP阵列LUN的聚合</block>
  <block id="51e8d151db4fdb2905684473162b537c" category="list-text">运行以下命令、列出连接到HP XP存储阵列的所有ONTAP FC启动程序端口： <block ref="0768e99328d0d82ade81684e484e7847" prefix="*" category="inline-code"></block>*</block>
  <block id="3680e1c7187a80534495404d57c2d9f8" category="summary">在固件升级期间，HP EVA存储阵列往往会使目标端口脱机。ONTAP提供的命令可提高ONTAP故障恢复能力、以便在固件升级期间目标端口脱机时、ONTAP系统不会中断。这些命令只能用于运行ONTAP的存储系统。</block>
  <block id="d8f29f6cfbb5b951b1425a807cd8ebaa" category="doc">为NDU准备HP EVA存储阵列</block>
  <block id="db34d7af4dc3b342efa0c50b075b6bee" category="paragraph">您必须遵循HP提供的固件升级准则、包括有关加载建议(HP EVA)的准则。您只能升级到HP支持的固件。此过程适用于HP EVA固件升级类型_online upgrade。</block>
  <block id="88da612c4bd87018647fac1f85167b2a" category="paragraph">固件升级期间，两个HP EVA控制器都会重新启动。</block>
  <block id="3e9bd749ccd750dfe97a9f40102ad0d1" category="paragraph">此过程将指导您使用ONTAP命令在整个固件升级过程中提高ONTAP故障恢复能力。固件升级完成后、您可以再次使用ONTAP命令将端口恢复到其正常运行模式。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="5c314a85ff9db5411fb17b51c9ac9d34" category="list-text">在ONTAP系统上、将命令会话的权限级别设置为advanced: <block ref="0581d0d071ad835f74bf419081ce5d75" prefix="*" category="inline-code"></block>*</block>
  <block id="e7e0e1f0c0a5e8638195a18f46fc70c9" category="list-text">将正在进行固件升级的HP EVA存储阵列的参数设置<block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block> 为*TRUE*： <block ref="1ff714252f56189102bcd534d4a513a4" prefix="*" category="inline-code"></block>*</block>
  <block id="5cae27f2b8a90a0095717ad4cc1a6729" category="list-text">在存储阵列上、开始固件升级。</block>
  <block id="1b937ff10ee17762e5e45167b119e4f3" category="list-text">固件升级完成后、如果需要、请再次将权限级别设置为高级、然后在ONTAP系统上将参数设置<block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block> 为*错误*、以使存储阵列端口恢复正常运行： <block ref="6d6309730d1dde774353d78b19f5e5df" prefix="*" category="inline-code"></block>*</block>
  <block id="22e092f40edd7cdf6b13a242c10a27c3" category="paragraph">如果您在步骤2中未退出高级模式、则无需再次访问它。</block>
  <block id="3d45b6a141e59eb274d5f556f77fc94e" category="paragraph"><block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block>参数包含以下功能、可确保正确使用命令：</block>
  <block id="55c3e25e555612f3177616ef7aef6466" category="list-text">如果在存储阵列上进行升级时尝试设置<block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block> 为*false*，则该命令将失败，并返回EMS消息。</block>
  <block id="26b6f55bde978f4fecfb1245b0f213b8" category="list-text">如果<block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block> 状态在设置为*TRUE*后的60分钟内未返回到*false*，则每小时记录EMS消息，直到返回到*false*为止<block ref="cbdc84a92ecd37816f3f86c7de16ad5f" prefix=" " category="inline-code"></block> 。</block>
  <block id="3ab52ee402a1818b670f52807660b0ca" category="summary">32xx系统存在一些不适用于其他型号的限制。在配置系统时、您必须了解这些信息。</block>
  <block id="b512f01902f761bf09fe77759a291839" category="doc">32xx系统配置限制</block>
  <block id="f0ceec04ee8f45d0921fccf391bc7382" category="paragraph">标有0c和0d的两个板载FC端口不在独立的主板上。因此、它们不会提供存储冗余。某些端口故障可能会导致系统崩溃。要配置冗余端口对、您需要在可用扩展插槽中使用FC HBA。</block>
  <block id="072f7fd6509cabff77014fb30255e918" category="summary">完成使用阵列LUN的ONTAP配置的安装和测试后、您可以向ONTAP系统分配其他阵列LUN、并在系统上设置各种ONTAP功能。</block>
  <block id="00e5cb19f2767b91db5da05ac92ac704" category="doc">安装和测试使用阵列LUN的ONTAP配置后的其他任务</block>
  <block id="a4ebeb46837147f45001a138e251e0e6" category="paragraph">以下是在完成使用阵列LUN的ONTAP系统的安装和测试后可以执行的一些任务：</block>
  <block id="28f3c76e5757ecfbd45311cf7c5cc26c" category="list-text">根据需要向ONTAP系统分配其他阵列LUN。</block>
  <block id="4451c1e26b8ddff949eeec18a623dfc7" category="list-text">根据需要创建ONTAP聚合和卷。</block>
  <block id="c99743f45e3961d5da1550a6eef09d5c" category="list-text">根据需要在系统上设置其他ONTAP功能，例如用于备份和恢复的功能。</block>
  <block id="671a1a802f9ccfda27d356a9bc6fd89f" category="paragraph">有关配置各种ONTAP功能的信息、请参见相应的ONTAP指南。</block>
  <block id="5f623990b2bb4062b87f9fead6b861d0" category="summary">在为ONTAP规划阵列LUN的路径数时、需要考虑是设置两个路径还是四个路径。</block>
  <block id="129df265c3530b05fa0ed83a930ce250" category="doc">一个阵列LUN使用四个路径的优势</block>
  <block id="1ae92fc11639c064e142dee380756134" category="paragraph">设置阵列LUN的四个路径具有以下优势：</block>
  <block id="50eb76302814332421fd4369d3543094" category="list-text">如果交换机发生故障、两个存储阵列控制器仍可用。</block>
  <block id="ba5454483e198969ccb890ecee34405f" category="list-text">如果存储阵列控制器发生故障、则两个交换机仍可用。</block>
  <block id="4557765d1ef78aedabffae747e0c9b6c" category="list-text">由于负载平衡采用四个路径而非两个路径、因此性能可以提高。</block>
  <block id="b470f2dba21e94b82d1eb08dca33fbf5" category="summary">当存储阵列来自不同供应商或来自同一供应商的不同存储阵列系列时、如何在聚合中布局阵列LUN适用特定规则。</block>
  <block id="50042b63c7f3468ef62a314b75976c22" category="doc">存储阵列来自不同供应商或系列时的聚合规则</block>
  <block id="6440683ac7503f26c3b784618c748551" category="paragraph">如果您的存储阵列来自不同供应商或来自同一供应商的不同系列、则需遵循以下规则：</block>
  <block id="80f1535af83ba687f1e400f469a07808" category="list-text">您不能在同一聚合中混用来自不同供应商或同一供应商不同系列的存储阵列的阵列LUN。</block>
  <block id="17ab819869d6aed0db3be9fd0f68e64c" category="list-text">无论存储阵列的系列类型如何、您都可以将包含根卷的聚合与任何存储阵列相关联。</block>
  <block id="9232058edcce87cc92f6cc3e69902409" category="paragraph">创建聚合时、请确保明确指定要添加到聚合的阵列LUN的ID。请勿使用参数指定要选取的阵列LUN的数量和大小、因为系统可能会自动选取来自不同系列或不同供应商存储阵列的LUN。在不同系列或供应商的阵列LUN位于同一聚合中之后、解决聚合中混用阵列LUN问题的唯一方法是销毁聚合并重新创建它。</block>
  <block id="e58b6c93a5988b998e12273f4a82e035" category="paragraph">以下示例显示了当存储阵列来自_不同供应商或来自同一供应商的不同系列_时如何在聚合中布局阵列LUN的选项。</block>
  <block id="341a2efcad03cc6ce9b8b2a251ffefda" category="section-title">示例1：两个存储阵列中的LUN位于不同的聚合中</block>
  <block id="2e124d9a0536cf492474bcf1cdaa66e2" category="paragraph">在此示例中、ONTAP的某些LUN来自存储阵列1 (系列A)、而ONTAP的其他LUN来自存储阵列2、 系列B。无法将两个存储阵列中的LUN添加到同一聚合中、因为这两个存储阵列来自同一供应商的不同系列。如果这两个存储阵列来自不同的供应商、情况也是如此。</block>
  <block id="7420923b3f82de52d2f36bc43153ff24" category="section-title">示例2：可以在同一聚合中混用某些LUN、而不能混用某些LUN</block>
  <block id="89005b6d706249bf226ec86892c6c1f9" category="paragraph">在此示例中、 一个存储阵列来自系列A、另两个存储阵列来自系列B。系列A存储阵列中的LUN不能添加到与系列B存储阵列中的LUN相同的聚合中、因为这些存储阵列来自不同的系列。但是、可以将存储阵列3的LUN 1分配给聚合2、该聚合还包含存储阵列2中的LUN、因为这两个存储阵列属于同一系列。</block>
  <block id="adce7944726b77ed80384b0cf5666368" category="summary">如果存储阵列来自同一存储阵列供应商和型号系列、则如何在聚合中布局阵列LUN适用特定规则。</block>
  <block id="505437d7513dd453d6235ce53f783d10" category="doc">存储阵列属于同一系列时的聚合规则</block>
  <block id="81db50c74cf79b7c1a2a886ac680bef6" category="paragraph">如果您的存储阵列来自同一供应商、则将阵列LUN添加到聚合的规则如下：</block>
  <block id="7f9b199fda76710579232cbfa11153a8" category="list-text">如果存储阵列属于同一系列、则可以在同一聚合中混用存储阵列中的阵列LUN。</block>
  <block id="5f8ed06ddaeddc122bbabc1694801104" category="list-text">您可以将阵列LUN分隔为不同的聚合。</block>
  <block id="11b2e17b41175c1b5248de533c5c50aa" category="paragraph">以下示例显示了当ONTAP系统背后的存储阵列属于_the some供应商系列_时、在聚合中布置阵列LUN的一些选项。</block>
  <block id="dc30116bac1879bc4e6f9dff85035079" category="paragraph">为简单起见、图中仅显示两个存储阵列；您的部署可以包括更多存储阵列。</block>
  <block id="1121a8af7310612381532464a485f72a" category="section-title">示例1：将所有存储阵列中的LUN添加到单个聚合</block>
  <block id="1851422b129d0463022868da2af2f7f1" category="paragraph">如下图所示、您可以创建一个聚合、然后将同一系列中所有存储阵列中的所有LUN添加到同一聚合：</block>
  <block id="7246d73e72544ee450d9e6f007457454" category="section-title">示例2：在多个聚合上分布和混合存储阵列中的LUN</block>
  <block id="2aec7c1a9a6521bbb8fc4c7b62367bb8" category="paragraph">如下图所示、您可以创建多个聚合、然后在这些聚合上分布和混合来自同一系列中不同存储阵列的阵列LUN：</block>
  <block id="22bca5e6b3bbdb50b3762dddd34dabab" category="paragraph"><block ref="22bca5e6b3bbdb50b3762dddd34dabab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="215c79a2567ae02f7c9086d569733c59" category="paragraph">如果您的存储阵列型号相同、其中一个包含光纤通道驱动器、而另一个存储阵列包含SATA驱动器、则不支持此示例。在这种情况下、这些存储阵列不会视为属于同一系列。</block>
  <block id="ae89c8d7a345276492064f9427b44f2f" category="summary">您可以将备用阵列LUN的分配从一个ONTAP系统更改为另一个LUN系统。您可能需要更改节点上负载平衡的所有权。</block>
  <block id="8741542b1109c583f4d2ef90ac836de2" category="doc">阵列LUN分配发生更改</block>
  <block id="732b787dc3135bcc4879d57a38985305" category="paragraph">您可以将_spare_阵列LUN的分配从一个ONTAP系统更改为另一个LUN系统。您可能需要更改节点上负载平衡的所有权。</block>
  <block id="1fc6ae19dbaf7379188bbfa523d85423" category="summary">分配给阵列LUN的名称采用新格式、以确保名称在集群中是唯一的。</block>
  <block id="83af0ff8ca064e5e079e14d43df8d3b4" category="doc">阵列LUN名称格式</block>
  <block id="935fc99c6600dc8872c89200d9e69bdd" category="paragraph">阵列LUN名称由两个部分组成、如下所示：</block>
  <block id="f4b3cdd7eda95d16ce73bf941ef8fde5" category="paragraph"><block ref="e78d27404a959f061f381e688d3ab8bb" prefix="" category="inline-code"></block>，例如<block ref="1afc134b0a4a7b3cae832e221d54e4b5" prefix=" " category="inline-code"></block>。</block>
  <block id="7e048b497fadc6bd0abe5687ce54f9c2" category="list-text"><block ref="046295e093cbf68ffe13334186be1f83" prefix=" " category="inline-code"></block>是ONTAP默认分配给每个存储阵列的唯一前缀。</block>
  <block id="60f297dbd2a2a3b6d87aa6904433ab8e" category="paragraph">此字段在本例中由组成 <block ref="382c0db56f0f360af4610bdf3635e409" prefix="" category="inline-code"></block> )。</block>
  <block id="95a2e8ce350dd0efec92ee56fc614925" category="paragraph"><block ref="099cfdd2c294e49ea9a5f4f5c37767bc" prefix="" category="inline-code"></block> 可以用供应商名称的前三个字母表示。</block>
  <block id="8b5b416e515e0a1cd3bb1377774b1a39" category="paragraph">如果有多个阵列来自同一供应商、则的值将按升序排列<block ref="5a3612665deeeedffb6e0472fce87fb4" prefix=" " category="inline-code"></block> 。</block>
  <block id="bf432d3d7afae7366bea56ff5af85b1e" category="list-text">偏移量是ONTAP分配给每个LUN的按升序排列的虚拟磁盘编号。它与主机的LUN ID无关。</block>
  <block id="82f48698d47fae4de4b93249dfdf4583" category="paragraph">您可以使用命令修改此 <block ref="d0216afaea2fdef0f4644e541632c590" prefix="" category="inline-code"></block> 字段<block ref="c6263ddf5be3a077a6b2e5eff026b445" prefix=" " category="inline-code"></block> 。</block>
  <block id="77c5db44e092a93b12ee806b7c620029" category="summary">您只能将存储阵列LUN映射到ONTAP。如果LUN 0是存储类型的LUN、则可以将其映射到ONTAP。</block>
  <block id="3ab5edd1c6e3340e214b04827440393c" category="doc">ONTAP支持的阵列LUN类型</block>
  <block id="e9d3a46dfbc54cd95095a3e86b64220d" category="paragraph">某些存储阵列具有非storage _command_ LUN。您不能将命令类型LUN映射到ONTAP系统。</block>
  <block id="2e97596bf006ab4a63eb1ab1532e9166" category="inline-link">第三方存储的 FlexArray 虚拟化实施</block>
  <block id="cac75528257d480d7397192a839ba0d5" category="paragraph"><block ref="cac75528257d480d7397192a839ba0d5" category="inline-link-rx"></block></block>
  <block id="9508b9bf6dd733b05401748ac2d58263" category="summary">各种LUN安全方法可帮助您指定哪些主机可以访问特定阵列LUN。您可以使用端口级安全或LUN安全产品、也可以使用专用存储供ONTAP系统使用。</block>
  <block id="0f939ecab93bef54e19c10261cb3149e" category="doc">可用的LUN安全方法</block>
  <block id="7a038865c2b584221fa4953faf4c93df" category="section-title">端口级安全性</block>
  <block id="8534c90d8c5f8f772ce411dccbae59c0" category="paragraph">您可以使用端口级安全性仅显示特定主机的阵列LUN。然后、该端口将专用于该主机。</block>
  <block id="36d446c5058eb58ec0b274ee009a689a" category="paragraph">并非所有存储阵列都支持端口级安全性。默认情况下、某些存储阵列会在所有端口上显示所有LUN、并且无法将LUN的可见性限制为特定主机。对于这些阵列、您必须使用LUN安全产品或将存储阵列专用于ONTAP系统。您应查看存储阵列文档、以确定存储阵列是否支持端口级安全性。</block>
  <block id="8dc15ff94f599e19c208821baa6baae2" category="section-title">LUN安全产品</block>
  <block id="2304f51beec9c5e88e1d4dbdb7b643ce" category="paragraph">您可以使用LUN安全产品来控制分区到同一端口的主机、使其只能通过该端口访问特定阵列LUN。这样、其他主机就无法访问这些相同的阵列LUN、方法是屏蔽其他主机。</block>
  <block id="cf737d7ad189dc0deddebb0391885a3e" category="section-title">将存储阵列专用于ONTAP</block>
  <block id="f3f6d07ae5779853c19088264bf779fc" category="paragraph">您可以将存储阵列专用于ONTAP系统。在这种情况下、除ONTAP系统外、没有任何其他主机连接到存储阵列。</block>
  <block id="474b577f10d0f5daadc0b0b9289604cc" category="paragraph">您应同时使用分区和LUN安全性来为ONTAP系统提供额外的保护和冗余。</block>
  <block id="38697657575a67c51efed186f25d050c" category="paragraph">除了遵循LUN安全方法之外、您还应检查有关供应商存储阵列的LUN安全性的任何其他详细信息。某些存储阵列必须专用于ONTAP系统。</block>
  <block id="82d37cddebcbc53beaf89f22ddf1f310" category="inline-link">适用于 NetApp E 系列存储的 FlexArray 虚拟化实施</block>
  <block id="3138277a1efabcf24fa83e482712e213" category="paragraph"><block ref="3138277a1efabcf24fa83e482712e213" category="inline-link-rx"></block></block>
  <block id="c11cb0056e5e0d020ec0d519f2cb6c73" category="summary">storage errors-show命令可在阵列LUN级别提供有关常见后端配置错误的详细信息。您还可以使用storage disk error show和storage disk show -errors命令查看错误。</block>
  <block id="81c6699aa46948e15a85033dfe4b2ae2" category="doc">ONTAP命令检测到后端配置错误</block>
  <block id="1d76da2a401bca93939c83d1b70e7f24" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>命令可在阵列LUN级别提供有关常见后端配置错误的详细信息。您也可以使用<block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block> 和<block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 命令查看错误。</block>
  <block id="64d673e5cf7bea8927d4e06fec42433b" category="paragraph">您必须先修复这些命令确定的后端配置错误、然后才能将ONTAP配置为使用阵列LUN。</block>
  <block id="faa4ab6e49031d63bcdac9df085b7a58" category="paragraph">命令仅提供与阵列LUN相关的错误详细信息、而<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 和命令则<block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block><block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 可提供与阵列LUN以及磁盘相关的错误详细信息。</block>
  <block id="8d4f62809fb19d1ebf2076a7eeb7be68" category="paragraph">如果出现后端配置错误、导致配置中的设备无法协同工作、则此命令会<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 指示您运行storage errors-show以获取此错误的详细信息。</block>
  <block id="8df76be75f2c1e3fd4b062698c406a03" category="section-title">后端配置错误列表</block>
  <block id="82e4e367c08170fc8447e46f3862692a" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block><block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block>和<block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 命令有助于识别后端配置错误，例如：</block>
  <block id="ba9eab080ce38bbba6627437ba2b417e" category="list-text">一个阵列LUN的路径少于两个。</block>
  <block id="7c130f632dadfb6c31a53336f1b16d44" category="list-text">一个阵列LUN的所有路径都指向同一个存储阵列控制器。</block>
  <block id="a2b4b29c0325cc527d7c750a2efef4f6" category="list-text">两个阵列LUN会显示相同的LUN ID。</block>
  <block id="f839571e2ff65cf6da5c71f4bd5a09fb" category="list-text">同一LEV的LUN ID在可显示LEV的所有目标端口上不匹配。</block>
  <block id="1c855b02f6a7317fef64930cb6ec86d6" category="list-text">阵列LUN超过ONTAP最大LUN大小。</block>
  <block id="bb9a5fe798010e204fc2f0314cdc3daf" category="list-text">阵列LUN不满足ONTAP最小LUN大小要求。</block>
  <block id="9db01b00e768a2b3557aa0f34e4fb566" category="list-text">阵列LUN的块大小无效。</block>
  <block id="4f459a407e3cd1339904259ffb138267" category="list-text">访问LUN将提供给ONTAP。</block>
  <block id="ba7d1f79b965d2453f9d06410364519b" category="section-title">显示后端配置错误的输出示例</block>
  <block id="69fa5871dd89af2851f58176ec5ffa10" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>输出将按存储阵列进行分组(如果ONTAP系统支持多个存储阵列)。如果适用、将显示阵列LUN的名称和唯一标识符(UID)。</block>
  <block id="9ddf8b37387edc54e7e268d12fb4c4d9" category="paragraph">以下输出示例显示了一种类型的错误，即只有一个指向阵列LUN的路径。这是一个错误、因为ONTAP需要两个指向一个阵列LUN的路径。</block>
  <block id="b2c6edf74ae2e18bb8d57779dd00c94d" category="paragraph">集群模式配置支持使用四个路径访问一个阵列LUN。</block>
  <block id="3c8f04e5f868f488c510462c87aa873e" category="paragraph">以下示例显示了命令因仅为阵列LUN配置了一个路径而返回的错误<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> ：</block>
  <block id="925be469775dc138a9d69a93314c9fe8" category="paragraph">以下示例显示了命令返回的类似错误<block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> ：</block>
  <block id="e932dce6fec7993b725b0bd4faf33a60" category="summary">ONTAP支持对阵列LUN、磁盘和聚合使用块校验和类型(BCS)和高级分区校验和类型(Advanced zoned Checksum Type、Array、磁盘和聚合)。</block>
  <block id="1c20170f10e28260c17d8ec643dbc99d" category="doc">ONTAP支持的校验和类型的特征</block>
  <block id="92806b1aeadbaed26ff1376a8418fb62" category="paragraph">在ONTAP中分配给阵列LUN的校验和类型可能会影响阵列LUN的性能或可用空间。因此、根据分配给阵列LUN的校验和类型、可能会影响所需的阵列LUN的数量和大小。</block>
  <block id="742659576567de57bc1fa3d5ea4c5486" category="section-title">块校验和(BCS)</block>
  <block id="688e7d07a8b442163b8eaf75c4797ec6" category="paragraph">BCS是阵列LUN的默认和建议校验和类型。BCS为阵列LUN提供的性能优于BACS。</block>
  <block id="301f455526dba0a8f6dbda7399271b7c" category="paragraph">BCS对阵列LUN中可用空间的影响大于A安全 磁盘。BCS使用阵列LUN中12.5%的可用空间。</block>
  <block id="495e03c408e4ebd407ee361e9893cd9c" category="section-title">高级分区校验和(高级分区校验和、ZCS)</block>
  <block id="84415cdedf89cd56e49412b5a50419cb" category="paragraph">它是BCS的替代方案。与使用BCS相比、使用的是设备容量的1.56%、而使用的是使用的设备容量的1.56%。但是、您必须权衡对更多可用空间的需求与性能。有时、可能会导致阵列LUN出现性能问题。</block>
  <block id="829378bc461107b74c88110a272a6dba" category="paragraph">对于高性能随机工作负载、建议不要对阵列LUN使用Array LUN。但是、您可以对灾难恢复、归档或类似工作负载的阵列LUN使用阵列LUN。</block>
  <block id="a5f595a9c6dd4f0fd30d392aa3cdf508" category="paragraph">对于本机磁盘、不会影响到任何一种使用。</block>
  <block id="935e5f8b62c0066ef2d4c250af2e471e" category="paragraph">校验和类型的准则因磁盘大小和类型而异。有关详细信息、请参见_TR3838存储子系统配置指南_。</block>
  <block id="53b4984a1882e1bdbeb4edc737880619" category="inline-link">NetApp 技术报告 3838 ：《存储子系统配置指南》</block>
  <block id="e21360dd35f27084558acc5c49983870" category="paragraph"><block ref="e21360dd35f27084558acc5c49983870" category="inline-link-rx"></block></block>
  <block id="6cb381740ce13899ad0b2e8114a3b695" category="summary">向聚合添加备用阵列LUN时、必须考虑与校验和类型相关的某些注意事项。例如、如果您计划通过指定备用阵列LUN的名称将其添加到聚合中、则必须确保阵列LUN和聚合具有相同的校验和类型。</block>
  <block id="dabc218ea2dbc240f845eeb8951499c9" category="doc">向聚合添加备用阵列LUN时的校验和类型注意事项</block>
  <block id="51cd112a11970064ef13695580aac4fd" category="paragraph">以下是向聚合添加备用阵列LUN时需要注意的一些校验和类型注意事项：</block>
  <block id="72c053371b0885716f8932204d007f01" category="list-text">不能在一个阵列LUN聚合中混用不同校验和类型的阵列LUN。</block>
  <block id="6cde697fc741f9fdc11e1c3e380c1544" category="list-text">如果您指定了要添加到聚合中的多个备用阵列LUN、则默认情况下、ONTAP会选择与聚合具有相同校验和类型的阵列LUN。</block>
  <block id="bd88d3bdf1058a55585a104ad29f4a36" category="list-text">如果将分区校验和类型的阵列LUN添加到现有分区校验和聚合中、则这些阵列LUN仍会成为分区校验和阵列LUN。</block>
  <block id="8ff5ef9353360a4dc5e1da393685b59f" category="list-text">已添加到高级区域校验和(Advanced Zone Checksum、ZCS)类型聚合的分区校验和备用阵列LUN会使用此类阵列LUN校验和方案。</block>
  <block id="9fb22d501fd3af80199a8eab38e26970" category="paragraph">您可以使用命令检查备用阵列LUN的校验和类型<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block> 。有关命令的详细信息，请参见手册页。</block>
  <block id="2182fa1574efeec1d0be0424ec927be5" category="summary">如果要部署多个ONTAP系统以使用阵列LUN、则必须确定哪个系统拥有哪些阵列LUN。磁盘所有权可确保只有拥有特定阵列LUN的ONTAP系统才能从此阵列LUN读取数据或向其写入数据。</block>
  <block id="685c5363e034fbe14020e64d0aedb865" category="doc">规划磁盘所有权时的注意事项</block>
  <block id="c835a502a6e8cdba4455f53d9ac18395" category="paragraph">如果要部署多个ONTAP系统以使用阵列LUN、则必须确定哪个系统_owns_哪个阵列LUN。磁盘所有权可确保只有拥有特定阵列LUN的ONTAP系统才能从此阵列LUN读取数据或向其写入数据。</block>
  <block id="c6af3aab1d7c0641dec0cd56a685fe2b" category="paragraph">在规划哪个系统将拥有哪些阵列LUN时、应考虑以下事项：</block>
  <block id="cbe97dc6261a53dab3ad7e263aeff043" category="list-text">您的平台支持的最大已分配设备限制</block>
  <block id="4b4faafb9207a990c610ba967ac70dcd" category="paragraph">Hardware Universe _显示了不同平台支持的最大已分配设备限制。这是一个硬编码限制。如果您的系统同时使用阵列LUN和磁盘、则此最大限制为磁盘和阵列LUN的总和上限。在确定可分配给系统的阵列LUN和磁盘数量时、必须同时考虑这两种类型的存储。</block>
  <block id="77adff04f30b75c28bb76ef798bddc7f" category="list-text">环境中使用的不同应用程序预计生成的负载量</block>
  <block id="2cf8043a54d84d4e32eccf8b2423f9af" category="paragraph">某些类型的应用程序可能生成大量请求、而其他应用程序(例如归档应用程序)生成的请求较少。您可能需要考虑根据特定应用程序的预期负载来权衡所有权分配。</block>
  <block id="40714f48d27d86046d848b225475d274" category="summary">在规划ONTAP所需的阵列LUN的数量和大小时、必须考虑校验和类型对阵列LUN中可用空间量的影响。必须为分配给ONTAP系统的每个阵列LUN指定校验和类型。</block>
  <block id="06f1f8a732f94bbc83875844bdff9640" category="doc">规划阵列LUN大小和数量时考虑校验和类型</block>
  <block id="113ff745d2662faed944926858424432" category="paragraph">当存储阵列上的阵列LUN映射为供ONTAP系统使用时，ONTAP会将该阵列LUN视为未格式化的原始磁盘。将阵列LUN分配给ONTAP系统时、您可以指定校验和类型、这会告知ONTAP如何格式化原始阵列LUN。校验和类型对可用空间的影响取决于您为LUN指定的校验和类型。</block>
  <block id="7aa9edcf49d5f6352e2bfeb23fdf7b70" category="summary">如果在分区定义中发生错误、则可能需要重新配置主机组定义、反之亦然。</block>
  <block id="cc71da48796ffe62e1bd80ca936b9788" category="doc">区域和主机组定义之间的依赖关系</block>
  <block id="d4a9dc17cc929f062e47c25f4f5a80be" category="paragraph">构建分区定义时、会指定两个端口：ONTAP系统上FC启动程序端口的WWPN以及该分区的存储阵列端口WWPN或WWNN。同样、在存储阵列上配置ONTAP系统的主机组时、系统会指定要成为主机组成员的FC启动程序端口的WWPN。</block>
  <block id="60cade88afea211ed83642225f11a3f0" category="paragraph">典型的配置顺序如下：</block>
  <block id="9f09305a9464ab97c7602ee99fb83bd3" category="list-text">构建分区定义。</block>
  <block id="90e0793a4d862e594afd4a782427099e" category="list-text">在存储阵列上构建主机组(从选择列表中选取ONTAP系统上FC启动程序端口的WWPN)。</block>
  <block id="572afdf42bab4221d47ef19413f26cf8" category="list-text">向端口提供阵列LUN。</block>
  <block id="0597b67dbae6d231f8b943c1b27a28c9" category="paragraph">但是、有时、主机组会在分区定义之前进行配置、这需要在存储阵列的主机组配置中手动输入WWPN。</block>
  <block id="091b00c47221e29f3168306a96bf03c0" category="section-title">常见错误</block>
  <block id="4e7511c86b70aac784379167a1a6aed0" category="paragraph">在ONTAP输出中，ONTAP系统上的FC启动程序端口通过适配器编号来标识，例如0a、0b、0c、0d、 等适用于具有板载端口的型号。WWPN显示在交换机GUI和存储阵列GUI中。由于WWPN较长、采用十六进制格式、因此经常出现以下错误：</block>
  <block id="3a8f39d0e1291e27ac2fc4238d428507" category="cell">如何指定WWPN</block>
  <block id="bf67f873e4f9af2ba5c833e38a047d08" category="cell">常见错误</block>
  <block id="8f4f00a13ad82eac85548e434842096d" category="paragraph">管理员以WWPN形式键入</block>
  <block id="80705dbb3ec5d7de3b52d4caca157d30" category="paragraph">出现键入错误。</block>
  <block id="df6ef01e480c2fbc8dcbbf024d89749a" category="paragraph">交换机会自动发现WWPN</block>
  <block id="a38575b0b20c0291051701b10c13c8e0" category="paragraph">从选择列表中选择的FC启动程序端口WWPN不正确。</block>
  <block id="ac386a3bf0253aef7f917a6b505a5340" category="paragraph">将ONTAP系统、交换机和存储阵列连接在一起后、交换机会自动发现ONTAP系统的WWPN和存储阵列端口。然后、WWPN将显示在交换机图形用户界面的选择列表中、从而可以选择每个区域成员的WWPN、而无需键入WWPN。为了消除键入错误的可能性、建议交换机发现WWPN。</block>
  <block id="07a23a8f2de72aa46c0c6a9cbcf531d6" category="section-title">错误的级联影响</block>
  <block id="230a3ea5675af62adc60f606f2480b2b" category="paragraph">在排除光纤连接配置问题时、显而易见的第一步是检查分区配置是否正确。考虑主机组与区域定义之间的关系也很重要。修复问题可能需要重新配置分区定义和主机组定义、具体取决于配置过程中出错的位置。</block>
  <block id="45c1e71ee188a871115eeb2b37c5e7c5" category="paragraph">如果交换机自动发现WWPN、并且首先配置了分区定义、则用于访问存储阵列上LUN的FC启动程序端口的WWPN会自动传播到存储阵列图形用户界面中的主机组配置选择列表。因此、任何分区错误也会传播到存储阵列主机组选择列表。选择列表显示的是长的十六进制WWPN、而不是ONTAP系统上可见的短FC启动程序端口标签(例如0a、0b等)。因此、您预计要列出的WWPN不存在并不容易。</block>
  <block id="a6d0f5eb31e4a6c09a8b4db8e92822a2" category="paragraph">下表显示了某些错误的影响：</block>
  <block id="765409008bf9a1015e4c54893d1f37d1" category="cell">交换机上的分区定义</block>
  <block id="e684e4acd5dbfb1bfb56ca589c646d73" category="cell">存储阵列上的主机组配置</block>
  <block id="cd5a911650bd0d320137e91599c8b42c" category="cell">ONTAP输出中的症状</block>
  <block id="4618a8850daeae5f5b4ee4e64ed50804" category="paragraph">分区定义中的FC启动程序端口不正确。这会导致将不正确的FC启动程序端口WWPN传播到主机组配置。</block>
  <block id="95506d07d567951ec4d0761c3476ca15" category="paragraph">选择了选择列表中显示的FC启动程序端口的WWPN、而不是所需的WWPN。</block>
  <block id="0022f7902f81655b45e7681da6534c36" category="paragraph">在可以看到预期LUN的FC启动程序端口上、无法看到阵列LUN。</block>
  <block id="104f0b7f475bbc625ce16ec19052a9b5" category="paragraph">分区定义包括正确的FC启动程序端口。</block>
  <block id="62f23ae28fc89fd29b58f7f4445d680f" category="paragraph">由于以下任一原因、主机组定义中的WWPN不正确：</block>
  <block id="21052bc7d674e7a25783ec049465265a" category="list-text">选择的WWPN不正确。</block>
  <block id="fc72efb0e54d529557388b4a82945c0d" category="list-text">主机组是在配置分区定义之前手动配置的、并且在键入FC启动程序端口的WWPN时出现键入错误。</block>
  <block id="38682ab5967fd268bbafe54d64a1af5e" category="summary">在使用阵列LUN的ONTAP系统所特有的聚合中混用不同类型的存储时、需要遵循许多规则。在规划要向哪些聚合添加哪些阵列LUN和磁盘时、您必须了解这些规则。</block>
  <block id="dc546e075857af9f46ce82e0d6d647ae" category="doc">确定特定聚合的阵列LUN</block>
  <block id="2f27eff4cab10b6a483ec8f9bcb79ec5" category="summary">阵列LUN中的可用空间会受到多种因素的影响。在规划所需数量和大小的阵列LUN时、您必须根据所使用的校验和类型以及可能配置的元素考虑阵列LUN中的可用空间。</block>
  <block id="d808678dc6eea6d370b4ba7e2a7c7272" category="doc">用于减少阵列LUN中可用空间的元素</block>
  <block id="8713bf6dae355ef03c171d87bfca1c78" category="paragraph">计算阵列LUN中的可用空间时、必须考虑以下因素来减少LUN的可用空间：</block>
  <block id="942b627ac4d50f990ca179c5c250b153" category="list-text">为ONTAP预留的空间</block>
  <block id="4ff36d2aadcd5148c548c2e32ab7ec73" category="list-text">用于核心转储的空间</block>
  <block id="b2be52657dcc6bdd5705d620e3f42722" category="list-text">卷级Snapshot预留</block>
  <block id="6b66d9f5ebaae2e907bc958754a4ff3b" category="list-text">聚合级Snapshot副本</block>
  <block id="b2b796e81f0969e2a6443b82e46a8c37" category="list-text">校验和类型(您分配一种类型)：</block>
  <block id="9fa8f0828e7318a0325505c534559832" category="list-text">高级分区校验和(高级分区校验和、ZCS)</block>
  <block id="2f28b42e1d6048a1abaae9ae941b7015" category="summary">ONTAP系统上的一个FC启动程序端口最多可以连接到不同存储阵列上的四个目标端口、对于某些存储阵列、也可以连接到同一存储阵列上的四个目标端口。</block>
  <block id="9a61dd35a4369d53ce579a82851de24b" category="doc">配置示例：共享FC启动程序端口</block>
  <block id="6ae7e1d00297ae59f14e33c6442d2598" category="paragraph">最佳实践分区建议是、将每个FC启动程序-目标端口对置于一个单独的分区(1：1)中、即使同一个FC启动程序正在与多个目标端口进行通信也是如此。</block>
  <block id="febbb4e4c5672eedfc0db15e0855f17d" category="section-title">连接到_SETTLGE_存储阵列上多个目标端口的共享FC启动程序端口</block>
  <block id="a0cbba39a72f650bff004df037a9eada" category="paragraph">下图显示了用于与_煌_存储阵列上的目标端口共享FC启动程序端口的连接和分区。</block>
  <block id="ed4a800307f8e5ed740473506b94df9c" category="paragraph">下图中的实线显示了从系统VS1上的FC启动程序端口进行的连接、虚线显示了从系统VS2上的FC启动程序端口进行的连接。</block>
  <block id="710cde3271b6eb55cd86ab979ccff693" category="image-alt">共享启动程序端口不同的阵列</block>
  <block id="2f74043d0f2904cd452d0d6599fb39dd" category="paragraph">下表显示了一个FC启动程序端口在不同存储阵列上共享多个目标端口的示例中的1：1分区定义。</block>
  <block id="b3ff996fe5c77610359114835baf9b38" category="cell">分区</block>
  <block id="239aedca5ee36cd71a1cf9ea2882861e" category="cell">ONTAP系统和FC启动程序端口</block>
  <block id="72be3cab576c552263b273dfbaea5e16" category="paragraph">* 交换机 1*</block>
  <block id="3b770ebe9b04f171f0ead0e07d8e2882" category="paragraph">z1</block>
  <block id="a97790362af4f4953cfcfbc03cb63b98" category="paragraph">VS1：0A</block>
  <block id="286157157d0b0b2799be2a9a44b48055" category="paragraph">存储阵列1：控制器1端口1A</block>
  <block id="5cb7e380d019de63c643aef55b8534d0" category="paragraph">z2</block>
  <block id="c7634e17bd6cb186524d4882e6486393" category="paragraph">存储阵列2：控制器1端口1A</block>
  <block id="a61d1457beb4684e254ce60379c8ae7b" category="paragraph">z3</block>
  <block id="1c0a3c24c875dbece6c92c2fc2889c44" category="paragraph">VS2：0A</block>
  <block id="05690528f7871cc3a0aeb039892f2820" category="paragraph">存储阵列1：控制器1端口1B</block>
  <block id="8ed54f04419ffb305225370abdaba82d" category="paragraph">z4</block>
  <block id="39968b6039a36a4046d171e58d438695" category="paragraph">存储阵列2：控制器1端口1B</block>
  <block id="bb12412086f61c678c1c222a3af43eca" category="paragraph">* 交换机 2*</block>
  <block id="4afbd36dfbe0916ea993c5ca93ffedb5" category="paragraph">z5</block>
  <block id="66ab15ad42fec313daffec84dbb54cfa" category="paragraph">VS1：0c</block>
  <block id="5f4382b265bdac4ec07ad5c9ad22648d" category="paragraph">存储阵列1：控制器2端口2A</block>
  <block id="4d0ce1d0c3837c91f11658e2cf303259" category="paragraph">z6</block>
  <block id="48f9b40df90fcb4d5c3f737a8dde0967" category="paragraph">存储阵列2：控制器2端口2A</block>
  <block id="9ab4c1b5e09f493aa9b452766cddb7ee" category="paragraph">z7</block>
  <block id="4edac85834610ed6b56f0fb3d60245e6" category="paragraph">VS2：0c</block>
  <block id="18189c0e7144de92817edd601759dff2" category="paragraph">存储阵列1：控制器2端口2B</block>
  <block id="298a60807e4f1433233c2dc093f01258" category="paragraph">z8</block>
  <block id="a7a0f41211ef7d7c46e5b5983683f87e" category="paragraph">存储阵列2：控制器2端口2B</block>
  <block id="d695c08e99251223601cbe9e716b66ce" category="section-title">连接到_send_存储阵列上多个目标端口的共享FC启动程序端口</block>
  <block id="7db2c1b431795e17f38df267199f558f" category="paragraph">此配置只能用于LUN屏蔽、表示或主机组功能允许根据所访问的目标端口向同一FC启动程序提供不同LUN组的存储阵列。</block>
  <block id="7a7454583489a72b4a991ffe55f2a509" category="paragraph">根据要访问的目标端口、某些存储阵列可以为FC启动程序提供不同的逻辑设备集。这些类型的存储阵列允许同一个FC启动程序位于多个主机组中。在具有此功能的存储阵列上、每个FC启动程序都可以访问同一存储阵列上的多个阵列目标端口、每个目标端口向FC启动程序提供不同的LUN组。请查看存储阵列文档、以确定存储阵列是否允许同一个FC启动程序位于多个主机组中。</block>
  <block id="d5302d00393fc5746d88a019452672d1" category="paragraph">下图显示了用于与_send_存储阵列上的多个目标端口共享FC启动程序端口的连接和分区。在此示例中、分区定义配置为1：1、即一个FC启动程序到一个目标端口。</block>
  <block id="47efa020a31bb18117f22ee28011fa5a" category="paragraph">下图中的实线显示了从系统VS1上的FC启动程序端口进行的连接、虚线显示了从系统VS2上的FC启动程序端口进行的连接。此配置需要两个LUN组。</block>
  <block id="c82c0d8b895bb90221194642c96247d6" category="paragraph">下表显示了一个FC启动程序端口在同一存储阵列上共享多个目标端口的示例中的1：1分区定义。</block>
  <block id="89ac24dd869aeea545adf048ee6c0a21" category="cell">存储阵列和端口</block>
  <block id="e79bc5599ed43bf573992c327fb00274" category="paragraph">交换机 1</block>
  <block id="974c3af19b2a39e2386d35dce4d4dd78" category="paragraph">控制器1端口1A</block>
  <block id="d956f0f8d1d7be30386805ed19d98e40" category="paragraph">控制器1端口1C</block>
  <block id="6edbe3c2db9aced683e7e9ea82d437fc" category="paragraph">控制器1端口1B</block>
  <block id="59e3e4db3469dba9eb20b4f87dbf3fcf" category="paragraph">控制器1端口1D</block>
  <block id="14b42c7d1896b7605692e8c1af5df50d" category="paragraph">交换机 2</block>
  <block id="0dc2b3a42d8450a0b3c09adfadeedfa7" category="paragraph">控制器2端口2A</block>
  <block id="585341b862b47491ceca4781cf0d9d84" category="paragraph">控制器2端口2C</block>
  <block id="70c9ffc2a3eb53becae1bf2d7cc3cafc" category="paragraph">控制器2端口2B</block>
  <block id="a900cec6ed2ac2fa726398b2115188e5" category="paragraph">控制器2端口2D</block>
  <block id="f1b01414b2d8a1bdbc4df4d4d43f8e0a" category="summary">最多可以将两个ONTAP FC启动程序端口连接到存储阵列上的一个目标端口。</block>
  <block id="3cafa0adf97f97d79e9002651dd1c94f" category="doc">配置示例：共享目标端口</block>
  <block id="c6dfa2efc14fd9e7c0f8d221b03c66f7" category="paragraph">分区的最佳实践是、将每个FC启动程序-目标端口对置于一个单独的分区中(1：1)。</block>
  <block id="b94ee14a099cb7c569b81f1cca35e864" category="section-title">连接到多个启动程序端口的共享目标端口</block>
  <block id="4b32137aaf38d5388307111499d46f6b" category="paragraph">下图显示了用于与不同ONTAP系统上的多个FC启动程序端口共享目标端口的连接和分区。</block>
  <block id="5d78cb0689abd804565d174de3d6a5b2" category="image-alt">有关共享目标端口配置的连接和分区、请参见周围的文本。</block>
  <block id="ce15c6840b0592c413543c405f30a1f0" category="paragraph">下表显示了一个目标端口共享HA对中控制器的两个FC启动程序端口示例中的1：1分区定义：</block>
  <block id="676645a069386ea107dd51009aac22f9" category="cell">控制器1：端口1A</block>
  <block id="18003de25ad1ed02fb5f1b21927cae7c" category="cell">控制器2：端口2A</block>
  <block id="67ea9d2618c3b6eb0c0787d26c9ed44f" category="summary">您可以使用多个LUN组配置将工作负载分布到多个目标端口上、从而提高系统性能。</block>
  <block id="f8e7acea0895104db4449897af261faa" category="doc">包含多个LUN组的配置示例</block>
  <block id="67cf89e5a5de6d85976eabd529477863" category="paragraph">大多数存储阵列均支持多LUN组配置。请参见_互操作性表_以确认您的存储阵列支持此配置。</block>
  <block id="ceb31570bbc39d2c1b3bc780ac873081" category="paragraph">下图显示了ONTAP系统上的一个FC启动程序端口对(0c和0f)如何通过一个存储阵列端口对访问一个LUN组、 第二个FC启动程序端口对(0a和0h)通过不同的存储阵列端口对访问同一存储阵列上的第二个LUN组。</block>
  <block id="65be604bc2889ee56e601a449894f697" category="paragraph">此配置称为"_Stand-alone with two 2-port array LUN groups_"(具有两个双端口阵列LUN组的独立配置)。多LUN组配置可以使用HA对、而不是独立系统。</block>
  <block id="720dec973b789dfbd4c66653ec9a12d3" category="paragraph">通过这种多LUN组配置、您可以在存储阵列上的RAID组(奇偶校验组)之间分布I/O。您可以对配置进行设置、以使不同的FC启动程序端口对访问存储阵列上的不同LUN组。ONTAP系统只能通过两个路径看到任何给定阵列LUN、因为给定的LDEV (逻辑设备)仅映射到存储阵列上的两个冗余端口。每个LUN组都通过一个不同的目标端口对进行访问。</block>
  <block id="65e95cb4b5637d4ae478f52be4d0850c" category="paragraph">每个LEV都通过一个LUN ID在外部进行标识。LEV必须映射到所有存储阵列端口上的相同LUN ID、ONTAP系统可以通过这些端口识别LEV。</block>
  <block id="1e9bb36bfa6e6f6f780055a1e99736c2" category="paragraph">同一LUN ID不能引用两个不同的LDE、即使使用相同ID的LUN位于目标端口上的不同主机组中也是如此。尽管不支持在同一目标端口上重复使用LUN ID、但如果LUN映射到不同的存储阵列端口、则存储阵列上也支持重复使用LUN ID。</block>
  <block id="9ba194819857500cb4881f1831505754" category="paragraph">下表总结了此示例中的分区。建议使用单启动程序分区策略。</block>
  <block id="13933ac616b88f63a4d8fdab725a7ae5" category="cell">ONTAP系统上的FC启动程序端口</block>
  <block id="14a3f4c4a271cd5e56849cad18945bc9" category="paragraph">端口0A</block>
  <block id="2204fe4f0eb440a26bd26165c7f643a0" category="paragraph">控制器1端口B</block>
  <block id="11cb573933b8a35b4eecdca928ad8523" category="paragraph">端口0c</block>
  <block id="73a2c3e8952a3cc2a670d8dd268b7482" category="paragraph">控制器1端口A</block>
  <block id="eb78f181b9b63cfb3f7c38ed16c3979e" category="paragraph">端口0f</block>
  <block id="53a78fbd9aa47cc76e05d0810f3dc958" category="paragraph">控制器2端口A</block>
  <block id="65a2dade0d3809181682651c571dd3fe" category="paragraph">端口0h</block>
  <block id="f5ad9293b252491dbe47ae217dda598e" category="paragraph">控制器2端口B</block>
  <block id="01520a7d7334ede42dd14d3ab4ca37f3" category="summary">区域定义中的错误可能会影响主机组定义、反之亦然。如果LUN在路径上不可见、则需要检查分区和主机组配置错误。</block>
  <block id="9805a9c4ad8b1c5325e0fbbcc8fb8758" category="doc">级联分区和主机组配置错误示例</block>
  <block id="a2a0610dc8642e697f1f7b7309f16322" category="paragraph">假设您的配置顺序如下：</block>
  <block id="145f7aa7140fe2c106f47ee22d688028" category="list-text">已在交换机上创建分区定义。</block>
  <block id="6141da2d3f4fe408d5ce56c19da8ba9a" category="paragraph">已将ONTAP系统的FC启动程序端口0A的WWPN置于分区定义中。但是、其目的是将FC启动程序端口0c的WWPN置于分区定义中。</block>
  <block id="2ef0d6fe66329cb31904f3f807b9eca4" category="list-text">已在存储阵列上创建主机组。</block>
  <block id="db98d93068a98214c906776a6ed3d864" category="paragraph">选择了FC启动程序端口0a的WWPN (因为这是唯一可用的WWPN、并且不明显是0a的WWPN而不是0c的WWPN)。</block>
  <block id="02cace75b5426fa2bcd7592ce61c17e7" category="list-text">在ONTAP中、您查看了FC启动程序端口上的阵列LUN、希望看到0c以上的阵列LUN。</block>
  <block id="ccc5c23d8b27dcdfd4e274c2b06a7c64" category="paragraph">但是、0c以上的阵列LUN不存在、因为分区定义和主机组定义都错误地包含FC启动程序端口0a的WWPN。</block>
  <block id="d0187e8f247077e41bd37e022f7a2af4" category="paragraph">您已使用<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 命令查看阵列LUN信息。</block>
  <block id="db46c0a0b24d3d17587029e8ae25ad61" category="list-text">您之所以开始进行故障排除、是因为在您希望看到的启动程序上看不到LUN。</block>
  <block id="af2eba3b10a1002d63619d2bbb2593af" category="paragraph">您需要同时检查分区和主机组配置、但首先检查以下哪个过程并不重要。您可能会看到不同的消息、具体取决于您是先从主机组开始修复内容、还是先从分区开始修复内容。</block>
  <block id="cd2fb58a6ccd9d999b89686ea12062cc" category="section-title">通过首先检查分区进行故障排除</block>
  <block id="0be873c158481543d995f694d28dbdeb" category="list-text">检查ONTAP系统的分区定义。</block>
  <block id="77722c4f8b13970baa1f5bd0106f329c" category="paragraph">您发现其中有两个分区的FC启动程序端口0a具有WWPN、而其中没有任何分区的WWPN为0c。</block>
  <block id="f30ef1dea9fd605cec7156885263024b" category="list-text">修复错误的分区定义并激活它们。</block>
  <block id="cb1e4e10b3049b3f54ad701740f42f76" category="paragraph">运行时，您将无法通过启动程序端口查看阵列LUN<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block>。</block>
  <block id="8ce7861235e5980447d5a947982aab72" category="list-text">转到阵列并重新配置主机组、以包含FC启动程序端口0c的WWPN。</block>
  <block id="49101be8ed7377be8e8de210f31b2cc9" category="paragraph">现在、0c的WWPN位于已激活的分区定义中、0c的WWPN将显示在存储阵列上主机组配置的选择列表中。</block>
  <block id="d5f0c11f4e5a9431932fc2577ce3402d" category="list-text">在ONTAP系统上、运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以检查FC启动程序端口上的阵列LUN、以确认阵列LUN显示在0c上。</block>
  <block id="7ff41c490bf8e6c967db9848660a421d" category="section-title">首先检查主机组进行故障排除</block>
  <block id="fe780382b26cf269947408ec6f1511e7" category="list-text">从ONTAP系统的控制台中，运行<block ref="d2de728a19b01f001173b14cbb4fea64" prefix=" " category="inline-code"></block>，然后记下此示例中缺少的适配器的WWPN --0c。</block>
  <block id="e17883cf3d400de91e471bfab01e7445" category="list-text">转到存储阵列、将您记下的WWPN与主机组选择列表中显示的WWPN进行比较、以查看是否列出了您所需的FC启动程序端口的WWPN。</block>
  <block id="552d0b0b344800baf3b0117575a94742" category="paragraph">如果未显示所需的WWPN、则表示分区定义中不存在所需的启动程序。</block>
  <block id="dfa1a842a2e49e8caf05dd82695ce9f3" category="list-text">如果存储阵列允许您修改主机组中的WWPN、则可以修改显示为您记下的WWPN的WWPN。</block>
  <block id="e9fd746b8c817d96253def26a2d71012" category="paragraph">如果存储阵列不允许您修改主机组中的WWPN、则需要在修改分区定义后修改主机组定义。</block>
  <block id="e93c30e35b38d7824faf242573cc726a" category="paragraph">由于分区尚未修复、您仍然看不到所需启动程序上的LUN。</block>
  <block id="60a0c56548e7b1d979181171669da7b1" category="list-text">转到交换机、将不正确的WWPN替换为正确的FC端口启动程序、然后激活分区定义。</block>
  <block id="566b14bdb8d715381ed0c24d98fdf2a6" category="list-text">如果在此过程的前面部分中无法更正主机组定义中的WWPN、请转到存储阵列并重新配置主机组、以包括FC启动程序端口0c的WWPN。</block>
  <block id="203f3474a73b0edc4b9fbb7f0053c57d" category="paragraph">现在、您应该可以看到通过FC启动程序端口访问LUN。</block>
  <block id="90bc272d7410078f899b4f4a1aeac0b7" category="summary">如果在给定存储阵列目标端口上排队的I/O请求数超过该端口可处理的请求数、则会导致目标端口利用率未优化。</block>
  <block id="a764f84d9a6c4b8cfdf863038e9d937a" category="doc">存储阵列目标端口的非优化使用示例</block>
  <block id="e5f84f69e99723192d4fd1c845f21bd0" category="paragraph">您可以在命令的输出显示中检测给定目标端口的此类非优化使用情况<block ref="d90ba20b63acab53952d68665c50ec47" prefix=" " category="inline-code"></block> 。</block>
  <block id="cfde20dd35b8c84b08f246387f88f56d" category="section-title">在检测目标端口的非优化使用情况时显示错误的输出示例</block>
  <block id="5ae918725b12f890b10eca8cb096fd71" category="paragraph">以下示例显示了命令在检测给定目标端口的非优化使用情况时返回的错误<block ref="d90ba20b63acab53952d68665c50ec47" prefix=" " category="inline-code"></block> ：</block>
  <block id="491a63a8977e5e81db00aa39061362b6" category="summary">在为交换机配置分区时使用LUN安全性可确保不同主机不会看到映射到其他主机的LUN。</block>
  <block id="0c6738627233a7f0e9d2fc0869f3e10d" category="doc">使用存储阵列的配置中的分区示例</block>
  <block id="9c993f990d76e6751e877c6c08ec3b58" category="section-title">在一个4端口LUN组配置中进行分区</block>
  <block id="827daaefa99df5d26fcf686d334a056f" category="paragraph">下表显示了HA对中ONTAP系统的此示例配置的分区。建议使用单启动程序分区策略。</block>
  <block id="afe751bc263aef0788cbf17a1014eb3e" category="cell">ONTAP 系统</block>
  <block id="93e9fa0fcb7aba0522283d98215b5d88" category="paragraph">vs1</block>
  <block id="8d1fc7e767a7204d770eb56c7989e03b" category="paragraph">控制器 1</block>
  <block id="937bc752933a1d2f43140d6838632208" category="paragraph">端口 1A</block>
  <block id="2e5372fa2a1c22c964e0ebc937132ae2" category="paragraph">vs2</block>
  <block id="13b92750c8ca93b93261b23d974fd8b2" category="paragraph">端口1B</block>
  <block id="48ed192757d1bc6d4a36d16a10893f48" category="paragraph">控制器 2</block>
  <block id="9fb5ee9a2670bac76369240ae031e209" category="paragraph">端口 2A</block>
  <block id="8e3deb9fe51ba100136489ababfe5b68" category="paragraph">端口2B</block>
  <block id="2d0b007ccfeb6f106932e6b73c328f26" category="summary">在确定所需的阵列LUN数量及其大小时、必须考虑多个因素、包括LUN中的可用空间。</block>
  <block id="aa732929c1c171a41a397fc794541509" category="doc">影响所需阵列LUN数量和大小的因素</block>
  <block id="4c982cdebfeee044eeb51f6bfc9c927e" category="summary">ONTAP软件提供了一个统一的存储软件平台、可简化存储阵列上本机磁盘架和LUN的管理。您可以根据需要随时随地添加存储、而不会造成中断。此功能由FlexArray虚拟化软件(以前称为V系列)提供。</block>
  <block id="f97e90ce12d568dd027cd3de8ef86098" category="doc">FlexArray虚拟化技术概述—​using用于存储的阵列LUN</block>
  <block id="fff5e61294432c210eebed43aba6de07" category="paragraph">ONTAP软件提供了一个统一的存储软件平台、可简化存储阵列上本机磁盘架和LUN的管理。您可以根据需要随时随地添加存储、而不会造成中断。此功能由以前称为V系列的_ FlexArray虚拟化软件_提供。</block>
  <block id="61a33cfcfcb0f4c7a45415e5b5786e28" category="paragraph">下图显示了一种配置、其中、已获得连接到存储阵列的许可的ONTAP系统将存储阵列中的LUN整合在一起、并将该存储提供给客户端。</block>
  <block id="e626919bf47716a65b89d05f7de529f8" category="paragraph">ONTAP系统以ONTAP文件系统卷的形式向客户端提供存储、您可以使用ONTAP管理功能在系统上管理此卷、也可以将存储作为SCSI目标来创建供客户端使用的LUN。在这两种情况下(文件系统客户端和LUN客户端)、在可以使用阵列LUN的系统上、您可以将阵列LUN组合成一个或多个阵列LUN聚合。在ONTAP环境中、您可以将这些阵列LUN聚合与Storage Virtual Machine (SVM)相关联、并创建ONTAP卷、以便作为文件或ONTAP提供的LUN提供给客户端。</block>
  <block id="284cf7c176560cddaaddd3963456ef7f" category="summary">包括校验和类型在内的许多元素都会影响阵列LUN的可用容量。您可以使用公式计算给定大小的阵列LUN中的可用容量、或者计算要提供所需的存储量、阵列LUN必须有多大。</block>
  <block id="c50dd2be639369091517b2a8c9a4e116" category="doc">基于校验和类型计算阵列LUN大小的公式</block>
  <block id="37fdc65776c7b9ea501cc1bfe56f2efc" category="paragraph">许多元素(包括校验和类型)都会影响所需的阵列LUN大小、即_usable Capacity _。可用容量是指可用于存储的空间量。</block>
  <block id="6393cc5c9a519eb5fa1853ccbacce6dd" category="paragraph">下表显示了计算所需阵列LUN大小的方法：</block>
  <block id="9036b8bb42581b00bde5ce7cc730ae93" category="cell">如果您知道...</block>
  <block id="85f5ae3d644eaad3c7c0857f0d357141" category="cell">您想要了解...</block>
  <block id="87fb11425fbee7246378c99e96ce00ce" category="paragraph">阵列LUN的大小</block>
  <block id="eaf1c05162816fd2b64d44890a1ccee7" category="paragraph">可用于存储的容量(可用容量)。您必须考虑所有元素所需的空间量。</block>
  <block id="d62df0e3414306a700f049e3b2b24797" category="paragraph">阵列LUN中所需的存储容量</block>
  <block id="559095c6715e6bae382f8a7c8946fb1b" category="paragraph">所需的阵列LUN大小。您必须考虑所需的存储量以及其他元素所需的空间量。</block>
  <block id="f2ee19a53b24365099a643de0988ad81" category="paragraph">这些公式中的2 TB表示2 TiB或2199023255552字节、根据ONTAP计算测量值的方式、这是2097.152 GnaB或2.097 TnaB。</block>
  <block id="dc355e4f5f5f69b713add40bca61911a" category="section-title">计算可用容量的公式</block>
  <block id="f16220ba66bd8d5198869b59d1655db2" category="paragraph">当您知道阵列LUN的大小后、可以使用以下公式确定阵列LUN中可用于存储的容量。此公式会考虑Snapshot预留。</block>
  <block id="bd005246d1ce9157cf8f671cad8c423e" category="list-text">y表示可用于存储的容量。</block>
  <block id="32aae35af90e24ec95f548324acb40ec" category="list-text">n是阵列LUN的总容量。</block>
  <block id="d23d8cfbfd2f53f600e9e7890d5f2f17" category="cell">校验和类型</block>
  <block id="313a6a3d25aa041ee3dc3cbd65d4f22b" category="cell">公式</block>
  <block id="103affc4b7c2edd5bc3380117e800cf5" category="paragraph">BCS --阵列LUN小于2 TB</block>
  <block id="edd4dddaefdf8b7e66cce71092a5a564" category="paragraph">N x｛0.875 x 0.9 x 0.99 x (1—Snapshot预留)｝= Y</block>
  <block id="a5675fd555bac629da4227377b56d9a8" category="paragraph">bcs --阵列LUN大于2 TB</block>
  <block id="0918f4ad4189e783187abd63c0530403" category="paragraph">N x｛0.875 x 0.9 x 0.不 等x (1—Snapshot预留)｝= Y</block>
  <block id="dc512e88acdf7ce1b9aa842b53bc7100" category="paragraph">－－小于2 TB的阵列LUN</block>
  <block id="126fe150ea1bae44005249b710934cf6" category="paragraph">N x｛0.984 x 0.9 x 0.99 x (1 - Snapshot预留)｝= Y</block>
  <block id="dc7c330602c0631b54ed07fd481b8a89" category="paragraph">－－超过2 TB的阵列LUN</block>
  <block id="472f1d8413a5b80257c0b7178a05564a" category="paragraph">N x｛0.984 x 0.9 x 0.983 x (1 - Snapshot预留)｝= Y</block>
  <block id="384b1ec15b0de575b6b53932857c062c" category="section-title">示例1：计算_with _ a Snapshot预留</block>
  <block id="dce128266715b0f467e9b8bbeb564012" category="paragraph">在以下示例中、阵列LUN的总容量为4 GB、其中Data ONTAP 8.1.1 (5%)的默认Snapshot预留设置为卷Snapshot预留。</block>
  <block id="998721646612615dcfbc7017c2bd44d4" category="paragraph">以下示例适用于小于2 TB的阵列LUN：</block>
  <block id="e5e6a65513a3f010c933d6809ba234e4" category="paragraph">BCS (阵列LUN小于2 TB)</block>
  <block id="c5f2729b0550a8c44308a5b5bafe5403" category="paragraph">4个｛0.875 x 0.9 x 0.99 x 0.95｝= 2.96 GB可用存储空间</block>
  <block id="351f9ff77545b61091b7de9237f4a419" category="paragraph">18TB (阵列LUN小于2 TB)</block>
  <block id="ad19e9808e21d9439f6de060807124df" category="paragraph">4个｛0.984 x 0.9 x 0.99 x 0.95｝= 3.33 GB可用存储空间</block>
  <block id="0b0bd72e50eff5a1577538b8e4c99971" category="section-title">用于计算所需最大阵列LUN大小的公式</block>
  <block id="ea96856bcd54a4205b5d43d175a8d063" category="paragraph">当您知道获取所需存储容量所需的阵列LUN容量时、可以使用以下公式确定所需的阵列LUN总大小、并考虑需要LUN空间的元素。</block>
  <block id="2cdc296bd3df6dbb712760a650e534a6" category="list-text">y表示阵列LUN中所需的确切空间量。</block>
  <block id="c1c30e2ce3e9a7c2268e2072154c652e" category="list-text">如果您使用的是Snapshot副本、则会考虑Snapshot预留。</block>
  <block id="03fe7119f1c27d14a9d84c2b161f0651" category="paragraph">Y÷｛0.875 x 0.9 x 0.99 x (1—Snapshot预留)｝=所需实际容量</block>
  <block id="4f58b22a8ae4eae93387aeeb27467853" category="paragraph">Y÷｛0.984 x 0.9 x 0.99 x (1—Snapshot预留)｝=所需的实际容量</block>
  <block id="3d2fd4917c4dc693f00000ee3ee6fff0" category="section-title">示例2：计算_with _ Snapshot预留</block>
  <block id="3fb866341c64088ea8508a32eb2bece8" category="paragraph">在此示例中、卷Snapshot预留是Data ONTAP 8.1.1 (5%)的默认设置。</block>
  <block id="92fef6bad71361774f992ac682a4298d" category="paragraph">10 GB÷｛0.875 x 0.9 x 0.99 x 0.95｝=实际所需容量为13.5 GB</block>
  <block id="9264f681069a4dde026f60cba52ae966" category="paragraph">10 GB÷｛0.984 x 0.9 x 0.99 x 0.95｝=实际所需容量为12.05 GB</block>
  <block id="6bed46c2e49d2c6d29da959e2e6c1c0c" category="section-title">示例3：计算_without _ Snapshot预留</block>
  <block id="47f0322461c46db8d41df97fab3727bb" category="paragraph">您需要10 GB的可用存储容量。以下示例显示了在不使用Snapshot副本的情况下计算实际阵列LUN大小。</block>
  <block id="7d07d4c42d9780959e32ae559edd78bc" category="paragraph">10 GB÷｛0.875 x 0.9 x 0.99｝=实际所需容量为12.8 GB</block>
  <block id="190945dc896b39779e6b926b8c04a9c6" category="paragraph">10 GB÷｛0.984 x 0.9 x 0.99｝=实际所需容量11.41 GB</block>
  <block id="6e7758c893a0ca83553c82a7773d255a" category="summary">在规划如何将V系列系统连接到本机磁盘架时、您的端口到端口连接计划应遵循冗余和其他准则。</block>
  <block id="d59a2c018d7b5769606c6db434690404" category="doc">将V系列系统连接到本机磁盘架的准则</block>
  <block id="2decc15fece106a300b8f6f066a41677" category="section-title">磁盘所需的FC启动程序端口数</block>
  <block id="adc1a0be5732302afee68d1130804ae7" category="paragraph">将V系列系统连接到磁盘架所需的FC启动程序端口数取决于V系列系统是独立系统还是HA对</block>
  <block id="254f642527b45bc260048e30704edb39" category="cell">配置</block>
  <block id="3320c081a7cd23a94c7e7851ab97ea3a" category="cell">FC启动程序端口数</block>
  <block id="53a653cb1221b03c1cf4fe37c2604cde" category="paragraph">独立系统</block>
  <block id="8d25203534e7be55a48a0af4d6aa3b8f" category="list-text">如果您使用的是一个环路：一个FC启动程序端口。</block>
  <block id="2e3da4999266b7760a213eb35a1909df" category="list-text">如果要连接两个环路：两个FC启动程序端口、每个环路一个。</block>
  <block id="bd655c82000686db5b76b879e6e9d516" category="paragraph">在HA对中</block>
  <block id="a251c807c815c240cfc1024b4e6680bf" category="list-text">如果您使用的是多路径存储、则每个环路需要两个FC启动程序端口。</block>
  <block id="b1cf50dbb1c6b2a0831e2dc14c0478d4" category="list-text">如果不使用多路径存储、则为配置中的每个环路中的每个控制器配置一个FC启动程序端口。</block>
  <block id="d2026caae6346338375eccfd4b9b9775" category="section-title">V系列系统和磁盘之间的连接</block>
  <block id="fdc6c64abc37e548cd48b3cbe4fabc72" category="paragraph">将V系列系统连接到本机磁盘架的过程与将FAS系统连接到本机磁盘架的过程相同。在创建端口到端口连接方案时、本指南以及下表中的ONTAP和硬件指南提供了有关磁盘和磁盘架设置和管理的信息。</block>
  <block id="b49879b3be5900b216c7904e276ea691" category="cell">请参见...</block>
  <block id="72c9a7820006f625b8b21ded1c89052c" category="paragraph">磁盘支持、包括支持的磁盘速度和磁盘容量</block>
  <block id="9a5699d46e02460e967b858f9f64fa24" category="paragraph">在机架或系统机柜中安装V系列系统</block>
  <block id="9f0bd2b7069d1b983c9a9d96c8f7fbf7" category="paragraph">在新系统上、此任务通常由工厂执行。如果需要说明、请参见机柜的指南。</block>
  <block id="de155be4c06f9bd3ed253134bdbb06c2" category="paragraph">将磁盘架连接到独立V系列系统</block>
  <block id="063989f907d0f4766ce2e3fbeff9b3e7" category="paragraph">适用于您的平台的《安装和设置说明》。</block>
  <block id="ce4e6ad5a0163d0fd1053f856fd80e4e" category="inline-link">《32xx系统安装和设置说明》</block>
  <block id="3878f4a9f9503e65aab9579b2c674a3e" category="list-text"><block ref="3878f4a9f9503e65aab9579b2c674a3e" category="inline-link-rx"></block></block>
  <block id="81f3021997d436ea644b548182205ff7" category="inline-link">《 62xx 系统安装和设置说明》</block>
  <block id="12da5f1ce436b8761077e51da6ad89f9" category="list-text"><block ref="12da5f1ce436b8761077e51da6ad89f9" category="inline-link-rx"></block></block>
  <block id="7cc5a51ed0a7e3bcf83023ae909a0413" category="paragraph">将HA对连接到磁盘架</block>
  <block id="2fb654e5399843c45685502bcc696315" category="inline-link">高可用性配置</block>
  <block id="d81fa1630f84bf817d6cd2849b5c13a9" category="paragraph"><block ref="d81fa1630f84bf817d6cd2849b5c13a9" category="inline-link-rx"></block></block>
  <block id="bed008c6e0fd05dbb786c3c1ff841fb6" category="paragraph">正在添加磁盘架</block>
  <block id="aece89e8c4c20b691b896b2e08920b57" category="paragraph">适用于您的磁盘架类型的指南。</block>
  <block id="684f626f1a242da24974f8490e221b35" category="paragraph">移动磁盘架</block>
  <block id="f64011b8f74591cd358fbdec0f82e473" category="paragraph">磁盘管理</block>
  <block id="9c92896894a8fe3d79aeae61fe2ddf98" category="inline-link">磁盘和聚合管理</block>
  <block id="15bfd3af526ded4faf305774a07ed419" category="paragraph"><block ref="15bfd3af526ded4faf305774a07ed419" category="inline-link-rx"></block></block>
  <block id="dac9e12f55962c0685f1997b3b21977c" category="summary">在为未运行ONTAP的特定ONTAP系统或特定主机规划配置时、需要考虑所有访问存储阵列端口的启动程序的影响。</block>
  <block id="bec083e7ed615e3d308b3a4914b5a8aa" category="doc">指定适当目标队列深度的准则</block>
  <block id="f28befd7219e7873e47e21d32994e237" category="paragraph">如果您的部署在一个目标端口上包含多个启动程序、则在设置目标队列深度时、您需要考虑所有启动程序发送到目标端口的命令总数。</block>
  <block id="bb8eee2a4b1c3105864238aa54f4320a" category="paragraph">指定适当的目标队列深度的准则如下：</block>
  <block id="60ee1d54ba12b46d8a7920e7607eac95" category="list-text">请勿将值配置为0 (零)。</block>
  <block id="3e38ba42038b043b29c24daeda358d4a" category="paragraph">值为0表示未完成的命令没有限制。</block>
  <block id="dac75a257fe52871bb8ed0e00282e112" category="list-text">请考虑特定启动程序可能会向目标端口发送的命令量。</block>
  <block id="31df242ba971489e3235f692a506a137" category="paragraph">然后、您可以为可能发送更多请求的启动程序配置较高的值、为可能发送较少请求的启动程序配置较低的值。</block>
  <block id="5684fc2bb7f242317eb4349a279deeff" category="list-text">根据为未运行ONTAP的主机提供的准则配置这些主机。</block>
  <block id="e04a9c0ef39b83ab488dc4c33c5b1339" category="list-text">如果端口间的工作负载不同、请考虑按目标端口设置目标队列深度。</block>
  <block id="5eb380fbe4c4f9af83ce034db72a7ff2" category="summary">存储阵列管理员必须创建阵列LUN、并使其可供ONTAP系统的指定FC启动程序端口使用。</block>
  <block id="83388f2dd41d5d8220afd0d42f392de8" category="doc">如何使阵列LUN可供主机使用</block>
  <block id="512ff72751265e41acc83ecbc5b9dca7" category="paragraph">使LUN可供主机使用的过程以及用于描述LUN的术语因存储阵列供应商而异。存储阵列管理员要使LUN可供主机使用、需遵循以下基本过程：</block>
  <block id="4d949f180225820222a8a1d906f8abc0" category="list-text">创建逻辑设备(LEVs)。</block>
  <block id="35ff035426e7d8a8d8564d27e992ad7a" category="paragraph">_Ldev_是一些供应商使用的一个术语、此内容用于描述从磁盘配置的一个逻辑RAID存储。</block>
  <block id="433366848627376c40c5d95ba7ff49c5" category="list-text">创建主机组(或与供应商等效的主机组)。</block>
  <block id="c98cb0f088c5b0c3fc517bc03614f93c" category="paragraph">主机组包含允许查看LDEV的主机的启动程序端口的WWPN。</block>
  <block id="02f075bb46c082b53d2e3fa87aa3bd6b" category="paragraph">为了简化管理、大多数存储阵列都允许您定义一个或多个主机组。您可以将特定WWPN (端口)和WWN (主机)定义为同一组的成员。然后、将特定阵列LUN与主机组相关联。主机组中的主机可以访问与该主机组关联的LUN；不属于该主机组的主机无法访问这些LUN。不同的供应商使用不同的术语来描述此概念。创建主机组的过程因供应商而异。</block>
  <block id="3e5469d8db8d174e2093194030de7798" category="list-text">将LDE作为LUN映射到主机组。</block>
  <block id="e871584e453b96010ee006ad544436a4" category="summary">在将ONTAP配置为使用阵列LUN之前、ONTAP系统无法使用提供给它的阵列LUN。</block>
  <block id="da78d2eb44cab4bce13f9a26bacddec6" category="doc">阵列LUN如何可供ONTAP存储使用</block>
  <block id="c4661a03b2ba7227af4282eb4c2d9209" category="paragraph">尽管存储阵列管理员会使ONTAP可以访问某个阵列LUN、但在完成以下两项任务之前、ONTAP无法使用该阵列LUN进行存储：</block>
  <block id="774fe3f9b46a1f134ae1fba41ea8e99c" category="list-text">必须分配一个ONTAP系统(已获得使用阵列LUN的许可)作为阵列LUN的_owner_。</block>
  <block id="b3c9bf3402d3247c7c1d65f789ffc560" category="list-text">必须将阵列LUN添加到聚合中。</block>
  <block id="0b29e637b416c4eb40d663dbdf416e42" category="paragraph">将阵列LUN分配给ONTAP系统时、ONTAP会将数据写入阵列LUN、以将分配的系统标识为阵列LUN的所有者。此逻辑关系称为_disk所有权_。</block>
  <block id="7fef3b1e65e3f5c3fce1549b701b25ea" category="paragraph">将阵列LUN分配给ONTAP系统后、该阵列LUN将成为该系统的备用LUN、并且不再可供任何其他ONTAP系统使用。</block>
  <block id="e5f2a05ac0be5d020bb5d81f2cbd6864" category="paragraph">在将备用阵列LUN添加到聚合之前、无法将其用于存储。之后、ONTAP可确保只有阵列LUN的所有者才能向LUN写入数据和从LUN读取数据。</block>
  <block id="fdb23b2a0125a51bf9827f43bb92c620" category="paragraph">在HA对中、两个节点都必须能够看到相同的存储、但该对中只有一个节点是阵列LUN的所有者。如果所属节点发生故障、配对节点将接管对阵列LUN的读/写访问权限。修复导致节点不可用的问题后、原始所属节点将恢复所有权。</block>
  <block id="f10a23f92b2f492f3d507dc4a7a5f498" category="summary">ONTAP系统上的所有FC启动程序端口均由数字和字母标识。根据端口位于主板上还是位于扩展插槽中的卡上、标签会有所不同。</block>
  <block id="72a2c33d07c3d2eafcab3c4fbbb9eace" category="doc">如何标记FC启动程序端口</block>
  <block id="456ae700c2531b3f70f272273e821b7a" category="list-text">主板上的端口编号</block>
  <block id="52b2011f81b5a7a528e16feccb5156cf" category="paragraph">端口编号为0a、0b、0c、0d...</block>
  <block id="8d7926901ce39f8b955ec31538715308" category="list-text">扩展卡上的端口编号</block>
  <block id="2c22a001587f2f4b4185ee6b0d667a21" category="paragraph">端口根据安装扩展卡的插槽进行编号。插槽3中的卡可产生端口3A和3B。</block>
  <block id="a3fdc4933ca96769e80d76a307a15459" category="paragraph">FC启动程序端口标记为1和2。但是、软件将其称为A和B。您可以在用户界面中看到这些标签、并在控制台上显示系统消息。</block>
  <block id="923b4e23e39f8c14967a02f1598596a1" category="summary">系统会为每个阵列LUN分配一个集群范围的唯一名称、即使该阵列LUN有多个路径也是如此。这一点与早期版本不同、在早期版本中、每个阵列LUN都有多个名称、具体取决于在给定时间访问LUN的路径。</block>
  <block id="b31334a73fdd644fec9837001b949016" category="doc">阵列LUN名称在ONTAP中的显示方式</block>
  <block id="920384349e2a1ab85f5ae5e3b0263375" category="paragraph">您可以通过运行命令来查看映射到每个阵列LUN的旧名称<block ref="1ae6174aec416d349a1e6089092af407" prefix=" " category="inline-code"></block> 。</block>
  <block id="5c8bbec1e2f1cfe255f1f42aeb2b7e9f" category="section-title">storage disk show --disk &lt;disk name&gt;-fields diskpathnames"命令的输出示例</block>
  <block id="dc9167b05fab7002bc0342217b65301f" category="summary">每个ONTAP聚合都有一个关联的校验和类型。聚合校验和类型由添加到聚合中的阵列LUN的校验和类型决定。</block>
  <block id="e5cfd74f14371dff91b683a4620ce16a" category="doc">如何确定阵列LUN聚合的校验和类型</block>
  <block id="b45fd1ad88bdca9d3be95f8dce69a2fb" category="paragraph">聚合的校验和类型由添加到聚合中的第一个阵列LUN的校验和类型决定。校验和类型适用于整个聚合(即聚合中的所有卷)。不支持在聚合中混用不同校验和类型的阵列LUN。</block>
  <block id="d979ac0ecc64505a6645d52f3fb427a9" category="list-text">类型为_block_的阵列LUN必须与块校验和类型的聚合一起使用。</block>
  <block id="22de6cdbd4f06b2fbfd9befeb1622468" category="list-text">类型为_zoned_的阵列LUN必须与高级分区校验和(先分区校验和、再分区)类型的聚合结合使用。</block>
  <block id="b112aa688d729ff7de19157b3f9b127b" category="paragraph">在将阵列LUN添加到聚合之前、您必须知道要添加的LUN的校验和类型、原因如下：</block>
  <block id="3cb10cf45da15f52c01debc702b818a1" category="list-text">不能将不同校验和类型的阵列LUN添加到同一聚合。</block>
  <block id="c59800019756b0a638c06580b0e7665d" category="list-text">您不能将聚合从一种校验和类型转换为另一种校验和类型。</block>
  <block id="05dd78bfbec3cb3af94f3096387e9ed2" category="paragraph">创建聚合时、您可以指定要添加的阵列LUN的数量、也可以指定要添加的LUN的名称。如果要指定要添加到聚合的阵列LUN的数量、则必须具有相同数量或更多的此校验和类型的阵列LUN。</block>
  <block id="dba099f01ed4d6f4be1158bb77193e6d" category="summary">您可以通过在存储环境中实施多LUN组配置来提高系统性能。要实施此配置、必须在ONTAP系统和存储阵列上执行某些设置任务。</block>
  <block id="2391ce4793762ccea96c14a6ad216b3c" category="doc">多LUN组配置的实施要求</block>
  <block id="91e9b52fe90312680e329d1900b2f03e" category="paragraph">大多数存储阵列均支持多LUN组配置。请参见_互操作性表_以确认您的特定存储阵列支持此配置。</block>
  <block id="45ff0f848acb8beb2e0d17ae33f4a5d3" category="paragraph">您必须与存储阵列管理员合作、在_storage array_for a multiple LUN group configuration中设置以下内容：</block>
  <block id="0b25ec16e81dd4a49289f247b3fc7901" category="list-text">使用尽可能多的端口、以便访问为ONTAP系统分配的阵列LUN。</block>
  <block id="563c0fefdbeccb42870c38166f08db8a" category="list-text">使用主机组(或供应商的等效主机组)定义将哪些阵列LUN组显示给ONTAP系统上的每个FC启动程序端口。</block>
  <block id="958e16bc3bdfd1bf0a311b11bf2bc387" category="paragraph">要实施多LUN组配置、您可以在ONTAP系统上进行以下设置：</block>
  <block id="2fd17a0945bc7af1cd868201388997da" category="list-text">对每个阵列LUN组使用一个FC启动程序端口对。</block>
  <block id="f66080bae4587d51b3cd21fc19101b12" category="paragraph">每个FC启动程序端口对都通过冗余路径访问存储阵列上的不同LUN组。</block>
  <block id="f518034a2edd8e2ae574040cb35e3bc2" category="list-text">在ONTAP配置中创建一个大型聚合、并将多个RAID组(奇偶校验组)中的阵列LUN添加到此聚合中。</block>
  <block id="a7cd6d57f2b784db8f9967d8afe40adf" category="paragraph">这样、I/O就会分布在更多磁盘上。将I/O分散在各个RAID组中并创建一个大型聚合可显著提升性能。</block>
  <block id="a55e3bef903b4411c8e3191444f6dd74" category="paragraph">要实施多LUN组配置、必须在_switch_上进行以下设置：</block>
  <block id="de0804589d17ca90678ffdc7815d95d1" category="list-text">配置交换机分区以定义ONTAP系统上的FC启动程序端口应使用哪些目标端口来访问每个阵列LUN组。</block>
  <block id="13569b55f6881ae8ee6b1c3caf5c25e6" category="summary">请务必从ONTAP系统上的两个FC启动程序设置指向所有阵列LUN的备用路径、以避免单点故障(Single Point of Failure、SPof)。</block>
  <block id="e9f0e15bc2ea28521990e742260ea830" category="doc">路径设置无效：未配置备用路径</block>
  <block id="aba2706cdadee2b68ac1588c23748f0e" category="paragraph">以下配置无效、因为它不会提供从ONTAP系统上的每个FC启动程序端口到存储阵列上每个LUN的备用路径。同一ONTAP系统中的两个FC启动程序端口通过同一交换机连接到存储阵列。</block>
  <block id="882228af18063ead770353a73dacecc6" category="image-alt">本图在周围的文字中进行了说明。</block>
  <block id="e9b41d50c19fb096ff62ed04ed73ab72" category="paragraph">假设在此无效示例中存在以下分区：</block>
  <block id="1381cb9fb63c4b1905a571733c6c2011" category="list-text">对于 vs1 ：</block>
  <block id="c96c6381866f9d14813068cd6fd9c207" category="list-text">对0a进行分区以识别控制器1的端口A</block>
  <block id="f537e86321d72aec20b568b889bb3be3" category="list-text">对0C进行分区以查看控制器1的端口B</block>
  <block id="277e064fe498b01de4be4c399531c1fa" category="list-text">对于 vs2 ：</block>
  <block id="4661d2e1761d39443174e6cbe8d01087" category="list-text">对0a进行分区以识别控制器2的端口A</block>
  <block id="db6b0795799b8d0d8dddc8b510002e14" category="list-text">对0C进行分区以查看控制器2的端口B</block>
  <block id="ebe273dcab8575c5c48bb4f0805dd219" category="paragraph">在此示例配置中、每个交换机都将成为一个SP的SP一 个。</block>
  <block id="761d668a4cda40c5f42516f3378d9044" category="paragraph">要使此配置有效、必须进行以下更改：</block>
  <block id="a6a1fb9b5d168f5248effcdb196a92cf" category="list-text">必须将VS1的FC启动程序端口0c连接到交换机2。</block>
  <block id="972ace5752e7f572a35e0534df819ab1" category="list-text">必须将VS2的FC启动程序端口0A连接到交换机1。</block>
  <block id="9a3a02b1d631f19bb8f4ef763181a685" category="list-text">必须配置适当的分区。</block>
  <block id="5df76fc468ac74f677db6b1aae902db3" category="paragraph">如果您在存储阵列上使用多个端口、而这些端口支持在一组选定端口上配置一组特定的LUN、则给定的FC启动程序端口必须能够看到网络结构上显示的所有阵列LUN。</block>
  <block id="307552e5295b464f99cdbb2239f1a21c" category="summary">路径设置可能无效、因为阵列LUN的路径不是冗余的、或者阵列LUN的路径数不符合ONTAP要求。</block>
  <block id="8b1e96c1579611cbdaf96df0d9f98161" category="doc">无效的路径设置示例</block>
  <block id="8f2fda82f1f797b98fb234619651d484" category="summary">根卷的位置取决于ONTAP系统是预订购了本机磁盘、还是要将磁盘添加到为阵列LUN配置的ONTAP系统。</block>
  <block id="50f402d12e4e3f3a971f8f79200310a7" category="doc">根卷的位置</block>
  <block id="4d4893e7f399908838009b33b74b4967" category="paragraph">请遵循以下准则来确定根卷在ONTAP系统上的位置：</block>
  <block id="d044cab419aac80ebd37c6ed92ed1172" category="list-text">根卷可以位于存储阵列上、也可以位于本机磁盘架上。</block>
  <block id="2f199c47e2b07423f60c0bf3a4efc84f" category="paragraph">但是、如果ONTAP系统同时具有本机磁盘和阵列LUN、则应将根卷安装在本机磁盘上。</block>
  <block id="15ea6758568ba49c8005eae92150ee0d" category="paragraph">如果您订购的存储系统配有磁盘、则出厂时会将根卷安装在本机磁盘上。</block>
  <block id="30810ae66e68bedcb8ebc4d0d53c28cd" category="list-text">在HA对中，最佳做法是根卷位于两个节点的相同类型的存储上，无论是在本机磁盘架上，还是在两个节点的存储阵列上。</block>
  <block id="8c1f1bede5170a05ceff47696a6e78e4" category="list-text">对于同时包含磁盘和阵列LUN的MetroCluster配置、如果要设置新配置、则应在磁盘上创建根卷。</block>
  <block id="804db2850b9fe4feed47bd36bb186f7c" category="paragraph">如果要向使用阵列LUN的现有MetroCluster配置添加磁盘、则可以将根卷保留在阵列LUN上。</block>
  <block id="0c895c788eb2120ab408ca435cc73ae9" category="summary">如果存储阵列管理员希望在将阵列LUN分配给节点后对其进行配置更改(例如调整其大小)、则可能需要在ONTAP中执行一些操作、然后才能在存储阵列上重新配置LUN。</block>
  <block id="dfc0ce1df15d5554bdbb90919b0307bc" category="doc">使用ONTAP管理阵列LUN</block>
  <block id="46e811e427f656a18b2dede426c769e6" category="summary">存储阵列提供的阵列LUN必须符合使用阵列LUN的ONTAP配置的大小上限和下限要求。ONTAP发出错误消息、指出阵列LUN不符合大小上限或下限要求。</block>
  <block id="5631be0db0a9d77cd134c50343e2e0c1" category="doc">ONTAP配置支持的最小和最大阵列LUN大小</block>
  <block id="8ffb24c41dba40b5f4a86df5d3438efd" category="paragraph">最小和最大阵列LUN大小是根据ONTAP定义度量单位的方式计算的。ONTAP对GB和TB的定义如下：</block>
  <block id="0db84a6322446a6204b9fed59691de18" category="cell">一个...</block>
  <block id="ecaeeb5614ff3ec9e0f9a46cb2f1a500" category="cell">等于...</block>
  <block id="79cba1185463850dedba31f172f1dc5b" category="paragraph">GB</block>
  <block id="a89ba1de8859c97d7ac49f253342d9d0" category="paragraph">1000 x 1024 x 1024字节(1000 MB)</block>
  <block id="ff88442a425c06d961f97bccb11ddf5d" category="paragraph">TB</block>
  <block id="bf14b78e147d954449ee8cea7fba848c" category="paragraph">1000 x 1000 x 1024 x 1024字节(1000 GB)</block>
  <block id="f3885e91aa1a2f1fa93273457778b3e2" category="paragraph">不同的存储阵列供应商使用不同的公式计算度量单位。您必须使用供应商的计量单位来计算与ONTAP配置支持的最小和最大大小相等的阵列LUN大小。</block>
  <block id="7533a4237acde7aa022f199ab95124c2" category="paragraph">ONTAP支持的最大LUN大小因ONTAP版本而异。有关最小和最大阵列Hardware Universe大小的信息、请参见_LUN _。</block>
  <block id="7250c73a38699f31c4c9f2b0e23dd064" category="paragraph">数据(存储) LUN的最小阵列LUN大小与根卷的最小阵列LUN大小不同。</block>
  <block id="7b264f05fd7156edc2db29248781deda" category="summary">您必须将根卷的大小设置为大于支持的最小阵列LUN大小、以确保根卷中有足够的空间用于存储系统文件、日志文件和核心文件。如果发生系统问题、您必须将这些文件提供给技术支持。</block>
  <block id="9b4283eaba9436bb95ef2745d8f7c6e7" category="doc">根卷所需的阵列LUN大小</block>
  <block id="04d0f6b8eab81a96ac0e17f610e9bf18" category="paragraph">_LUN _列出了根卷的最小阵列Hardware Universe大小。</block>
  <block id="acdde329bc2b6b80041ad1a3daa32a80" category="summary">每个ONTAP系统所需的阵列LUN数量取决于根卷的位置。</block>
  <block id="5c6dadc005224aa67b5685a5c270943f" category="doc">每个ONTAP系统所需的最小阵列LUN数</block>
  <block id="be7728f0d9d971d25091f20c64ee9507" category="paragraph">根卷可以位于磁盘上、也可以位于阵列LUN上。然后、根卷的位置将确定所需的最小阵列LUN数量。如果根卷位于存储阵列上、则每个独立ONTAP系统和HA对中的每个节点必须至少拥有一个阵列LUN。如果根卷位于本机磁盘上、则只需要用于数据存储的阵列LUN即可。</block>
  <block id="7bb474f06c97e2bbd06f4900960b1f3d" category="paragraph">对于使用阵列LUN的MetroCluster配置、如果根卷位于存储阵列上、则需要两个阵列LUN (每个站点一个LUN)。要镜像根卷、必须使用这两个LUN。</block>
  <block id="fc65b46ebc6a2d8a714d0df7d5d7e569" category="summary">给定LUN的I/O请求可以通过所有可用的优化路径分布到该LUN。这一点与先前版本不同、在先前版本中、尽管有多个可用路径、但给定LUN的I/O请求仅通过一个活动优化路径发送。</block>
  <block id="02d93414f767a20a5223a6138ac89c79" category="doc">可以使用阵列LUN的多个路径来分布负载</block>
  <block id="e8f3e6f03ebd4ffdbff84f8611b4322a" category="paragraph">通过多个路径分布给定LUN的I/O请求具有以下优势：</block>
  <block id="e7c53b8dceb13a4e7e5966e8ace17c99" category="list-text">通过最大限度地利用所有可用和优化路径、提高了效率</block>
  <block id="33fe7e3989f28714ab122c9ef86f51e9" category="list-text">通过在多个路径上实现负载平衡提高了性能</block>
  <block id="c21cd4fb72328b2732380f33f0f9e101" category="paragraph">例如、在主动-主动阵列上、给定LUN的I/O请求可以分布在该LUN可用的所有四个目标端口上。对于非对称双主动阵列LUN、I/O请求可以分布在给定LUN的所有优化路径上。</block>
  <block id="508435c99edde9fd7821020fdb694cc8" category="section-title">用于查看给定LUN的多个路径上的负载平衡的命令</block>
  <block id="830d377a2e06501ec941c00e58b97ff7" category="paragraph">您可以运行以下命令来查看给定LUN在多个路径之间的负载分布：</block>
  <block id="0f831425c5023da5bbb53bd41f242ed0" category="list-text"><block ref="fff790cf62ab2bcf7cfa78c64dfe5a06" prefix="" category="inline-code"></block> 显示给定阵列LUN的可用路径中的I/O负载分布。</block>
  <block id="1d4394f4bc199b82e3a90c159702b3e3" category="list-text"><block ref="a2783a2692b7fa060e82e748a5f71c0c" prefix="" category="inline-code"></block> 显示连接到给定存储阵列的ONTAP系统上所有启动程序端口的I/O负载分布。</block>
  <block id="1e8cc88df49a4ee5a4a395982c3ef748" category="list-text"><block ref="fa4b92ffae8229b241cfae1ace5b952a" prefix="" category="inline-code"></block> 显示给定存储阵列上所有目标端口的I/O负载分布。</block>
  <block id="e2e44a4d4411d1e96b2ab8dd20fd2160" category="summary">根据ONTAP系统支持的存储阵列型号、您可以将多个存储阵列或单个存储阵列连接到ONTAP系统。</block>
  <block id="bb1fd7e5100b6edb6322682fbea0acaf" category="doc">将多个存储阵列连接到ONTAP系统时的注意事项</block>
  <block id="19d62755ca60fe3eb9053d05d4b43513" category="paragraph">互操作性表可确定ONTAP系统仅支持一个存储阵列的任何存储阵列型号。</block>
  <block id="7800ba550a16a77ad02960e0c30ff1ea" category="paragraph">将多个存储阵列连接到ONTAP系统时、请考虑以下事项：</block>
  <block id="da0067442f2181ee7605d110d32f6718" category="list-text">如果您可以将多个具有相同受支持存储阵列型号的阵列连接到ONTAP系统、则可以部署的存储阵列数量没有限制。</block>
  <block id="a8570ebee7b8df029ed8a99b2992488b" category="list-text">存储阵列可以来自受支持的同一供应商、也可以来自不同供应商。</block>
  <block id="344acf1f8bf41c073984bfe54128780c" category="paragraph">如果存储阵列来自同一供应商、则它们可以来自同一系列、也可以来自不同系列。</block>
  <block id="b35230027f2867b01313dbad1318783e" category="summary">设置ONTAP系统以使用阵列LUN的过程因订购的ONTAP系统是否包含磁盘而异。</block>
  <block id="663574e21fe265e840f0b1628f586a67" category="doc">设置ONTAP以使用阵列LUN</block>
  <block id="55ce6d4669657802ce437d8ee912bc53" category="paragraph">如果订购的ONTAP系统附带有磁盘架、则出厂时会安装ONTAP软件。在这种配置中、您无需创建根卷并安装许可证和ONTAP软件。</block>
  <block id="703c0a50bc2fac67b4ea342c0673e333" category="paragraph">您可以在订购的系统中安装ONTAP软件、但不附带磁盘架。在这些系统上、您必须先安装ONTAP、然后再设置集群。</block>
  <block id="3a1182b27a60db955a8e198220626648" category="summary">要规划使用阵列LUN的ONTAP配置、您必须验证特定ONTAP版本是否支持存储阵列。此外、您还必须检查互操作性和支持信息、以确保所有系统都满足使用阵列LUN的配置的要求。</block>
  <block id="b6bef8b69610114481e3c0cc78019773" category="doc">规划使用阵列LUN的配置</block>
  <block id="4907479f980c80676020bb00b393ba0e" category="summary">规划ONTAP系统上的FC启动程序端口与存储阵列端口之间的连接包括确定如何实现冗余并满足阵列LUN的路径数要求。</block>
  <block id="04898ef1982e219da5747b91c3acc7fc" category="doc">规划端口到端口连接方案</block>
  <block id="6f3505f901f37777556668aaf8f0445e" category="summary">在为阵列LUN设置ONTAP RAID组之前、您必须规划聚合的大小、RAID组的数量和大小以及阵列LUN的大小。最能满足您的数据要求的RAID组可确保在阵列上为数据及其可用性提供足够的保护。</block>
  <block id="9703591c0363f7c9ea9ff8cc7e4caba2" category="doc">ONTAP RAID组的规划注意事项</block>
  <block id="8ff7b387ed339a9cda7767a4cbfabffd" category="paragraph">规划ONTAP RAID组涉及以下任务：</block>
  <block id="9f36beaa921bfc5525447648a079c374" category="list-text">规划最符合数据要求的聚合大小。</block>
  <block id="f98ca694fd3d223cd30f249f0b44f06b" category="list-text">规划聚合大小所需的RAID组的数量和大小。</block>
  <block id="706b804c83a5599a138744e07acb95cb" category="list-text">规划ONTAP RAID组中所需阵列LUN的大小：</block>
  <block id="d1e0cba99b8953f2ca1702f442fefcc9" category="list-text">为避免性能降低、特定ONTAP RAID组中的所有阵列LUN的大小都应相同。</block>
  <block id="56814397251a8f46ca3cee5f16b7cfc8" category="list-text">在同一聚合中的所有RAID组中、阵列LUN的大小应相同。</block>
  <block id="54b4a332dad728d453499404aed791c5" category="list-text">与存储阵列管理员通信、以创建聚合所需大小的阵列LUN数量。</block>
  <block id="5d6a5081b41eb6c12fd64940876dc178" category="paragraph">应根据存储阵列供应商文档中的说明对阵列LUN进行性能优化。</block>
  <block id="a26eaa09729fe01e80a54a31c1880629" category="inline-link">磁盘和聚合管理_</block>
  <block id="0573b3e4b91f94427dfeaaee2a885262" category="paragraph">有关设置用于存储阵列的ONTAP RAID组的更多建议，请参见<block ref="e915d35c063384abfce57038e105cb8e" category="inline-link-rx"></block>。</block>
  <block id="7302aea57dd4ecbb36c4dd29e8b08ee1" category="summary">如果将ONTAP系统与存储阵列结合使用、则必须使用LUN安全方法来避免非ONTAP系统覆盖ONTAP系统拥有的阵列LUN的可能性、反之亦然。</block>
  <block id="c94fa3f032400f7514377fe79707a117" category="doc">在存储阵列上规划LUN安全性</block>
  <block id="868017e1b3055aeb6c0558bbf1a92f8e" category="paragraph">LUN安全性是一种隔离可访问特定阵列LUN的主机的方法。LUN安全性在概念上类似于交换机分区、但它是在存储阵列上执行的。_LUN security_和_LUN屏蔽_是描述此功能的等效术语。</block>
  <block id="756d3281ba816da49f0e58f63b093805" category="paragraph">ONTAP磁盘所有权方案可防止一个ONTAP系统覆盖另一个ONTAP系统所拥有的阵列LUN。但是、它并不会阻止ONTAP系统覆盖可由非ONTAP主机访问的阵列LUN。同样、如果没有阻止覆盖的方法、则非ONTAP主机可能会覆盖ONTAP系统使用的阵列LUN。</block>
  <block id="59f610aa1ec1f5d5a9f9e0fa76397b2e" category="summary">要使ONTAP使用阵列LUN、存储阵列管理员必须先在存储阵列上创建LUN、并使其可供ONTAP使用。然后、ONTAP管理员必须将ONTAP配置为使用存储阵列提供的阵列LUN。</block>
  <block id="89324ec62166935670ba86e939876712" category="doc">规划阵列LUN的ONTAP使用</block>
  <block id="c307f0347321e5b0f00deebffcc9b39f" category="paragraph">规划如何配置阵列LUN以供ONTAP使用时、需要考虑以下注意事项：</block>
  <block id="356c20f71077869f8c18f20b1e780968" category="list-text">ONTAP支持的阵列LUN类型</block>
  <block id="e943e693fdf85db6d2b3403990ae0b91" category="list-text">ONTAP最小和最大阵列LUN大小</block>
  <block id="171d5301fc570316094c2c309b2e3d8f" category="list-text">所需的阵列LUN数量</block>
  <block id="a49bd1ced073bf67bab2163c9102c56f" category="paragraph">ONTAP将阵列LUN视为虚拟磁盘。</block>
  <block id="b13fdaf57e1a08b32ec121d8fc25f83b" category="summary">路径是指ONTAP系统和存储阵列之间的物理连接。要消除ONTAP系统与存储阵列之间的任何单点故障(SPof)、需要使用冗余路径。</block>
  <block id="b47624d709523b5d396e617d97f10046" category="doc">规划阵列LUN的路径</block>
  <block id="5248b9eab9a406d5b77a2e1d11c62589" category="summary">您需要规划存储阵列RAID组中LUN的大小和数量、并确定是否要在主机之间共享RAID组。</block>
  <block id="cd84e76cb89a90955016cd5f279eeaa3" category="doc">规划RAID实施</block>
  <block id="3b012d39d620ec097337797464151281" category="summary">如果您计划在ONTAP系统中使用阵列LUN、则必须与存储阵列和交换机管理员进行通信、以便将后端设备配置为使用ONTAP系统。</block>
  <block id="64385fe6ede386c4491b30f992c520b6" category="doc">使用阵列LUN的ONTAP系统的规划摘要</block>
  <block id="638a0c6cd08f34aab940dc60816c6a96" category="paragraph">下表总结了主要规划任务以及可帮助您完成每个任务的信息位置。</block>
  <block id="e824939aeee2378123d1bfebc84be54e" category="cell">规划任务</block>
  <block id="937b6206429706852b5e5f8d54a13a81" category="cell">从何处查找信息</block>
  <block id="a3a521680ec673a1f79cabb13d5ee067" category="paragraph">确定设置存储阵列以使用ONTAP的要求</block>
  <block id="3a7d7c44f7239e5ef0daa4186bb216a1" category="paragraph">阵列LUN与ONTAP结合使用的准则</block>
  <block id="620008a16d0d31ab5a1694caeaf75dd2" category="paragraph"><block ref="620008a16d0d31ab5a1694caeaf75dd2" category="inline-xref-macro-rx"></block></block>
  <block id="b4445c23884301ce720f650013893af6" category="paragraph">确定有关阵列LUN的ONTAP限制</block>
  <block id="f025c21b8308bff226639bd86493a919" category="paragraph">确定LUN安全方案、在存储阵列上设置访问控制、如果已部署交换机、则在交换机上设置分区</block>
  <block id="ab48edd366b6e4c33583342d874ab9d0" category="inline-xref-macro">规划存储阵列上的LUN安全性</block>
  <block id="2d656672bf34930eb454d09b44fe12c3" category="list-text"><block ref="2d656672bf34930eb454d09b44fe12c3" category="inline-xref-macro-rx"></block></block>
  <block id="d4ca82368b64397e20a55281fa2b31e8" category="inline-xref-macro">分区要求</block>
  <block id="684e59816d13f777ed746850d8939975" category="list-text"><block ref="684e59816d13f777ed746850d8939975" category="inline-xref-macro-rx"></block></block>
  <block id="5066deb5f4270a3a2da23540a65e0e81" category="paragraph">确定ONTAP系统和存储阵列之间的端口到端口连接方案</block>
  <block id="9975bbe8861815c8f9417da2d97dcd13" category="list-text"><block ref="9975bbe8861815c8f9417da2d97dcd13" category="inline-xref-macro-rx"></block></block>
  <block id="a75e824ed22c726b985a64653b6bbd27" category="paragraph">确定哪个ONTAP系统要"`拥有`"哪个阵列LUN (磁盘所有权)</block>
  <block id="b2157836b4e4bf6e9beffa1abfae4c82" category="list-text"><block ref="b2157836b4e4bf6e9beffa1abfae4c82" category="inline-xref-macro-rx"></block></block>
  <block id="53f2462178712ede2ca2861f93c1e5d5" category="inline-xref-macro">分配阵列 LUN 的所有权</block>
  <block id="d133070bb0891f2b50e596a105ae33dd" category="list-text"><block ref="d133070bb0891f2b50e596a105ae33dd" category="inline-xref-macro-rx"></block></block>
  <block id="5037046d0d20a72a1875c7f8f0393c07" category="summary">您可以在新的或现有的V系列系统上安装本机磁盘架。但是、与在FAS系统上安装磁盘架相比、如果您计划在V系列系统上安装本机磁盘架、则还必须考虑一些其他因素。</block>
  <block id="c2dd13bf1eff407aae484b522164f42e" category="doc">使用本机磁盘的V系列系统的规划摘要</block>
  <block id="eb0ecc50fe839b85f02f5738fe1eb945" category="section-title">在具有磁盘的V系列系统上进行基本设置时的其他规划注意事项</block>
  <block id="a8f1a07ba6b488647ec4aac36bbbe485" category="paragraph">在确定使用本机磁盘的V系列系统的基本设置和安装要求时、必须考虑以下事项：</block>
  <block id="13fb9bc508a410ce95ca5aa655ac71eb" category="list-text">如果V系列系统随磁盘架一起订购、则出厂时会配置根卷并安装许可证和ONTAP软件(就像FAS系统一样)。</block>
  <block id="9bc2b2beff0c0bbd3b7b20ec1bed8897" category="list-text">如果V系列系统未随磁盘架一起订购、则必须计划安装ONTAP软件和相应的许可证。</block>
  <block id="c8d9cea5dcaaeba48b926077b7ac0b69" category="list-text">ONTAP会自动为连接到V系列系统的本机磁盘分配所有权。</block>
  <block id="c53d3edcc455f613de04a90f113c60c5" category="section-title">V系列系统同时使用磁盘和阵列LUN时的其他规划注意事项</block>
  <block id="19bfa1f53f3f8acb324a85fecaa6003b" category="paragraph">下表总结了其他规划注意事项以及可帮助您完成每项任务的信息位置。</block>
  <block id="5171643f62d3089f23909b42eec65437" category="cell">规划注意事项</block>
  <block id="1edfe6f6297f17bc7e331338856b207c" category="cell">从何处查找准则</block>
  <block id="abeff23a87e1d9d5da8ec509a8952c59" category="paragraph"><block ref="abeff23a87e1d9d5da8ec509a8952c59" category="inline-xref-macro-rx"></block></block>
  <block id="d9015581e5fa1f408aaaae4b2cea8c10" category="paragraph">在不超过V系列系统支持的最大限制的情况下、可以分配的磁盘和阵列LUN总数</block>
  <block id="eeb8b0d5f5d6d8778f829400cc119d88" category="paragraph">FC启动程序端口使用情况</block>
  <block id="1df7c4bec4d6cb23d626894f8478cfa8" category="inline-xref-macro">FC启动程序端口使用要求</block>
  <block id="ec331c3b497ecaa5ba0ea7e72c560a5f" category="paragraph"><block ref="ec331c3b497ecaa5ba0ea7e72c560a5f" category="inline-xref-macro-rx"></block></block>
  <block id="8e2d23956382208e082025f0a7e140be" category="paragraph">应驻留在磁盘上的数据类型以及应驻留在阵列LUN上的数据类型</block>
  <block id="27efc84e2635bdf13e1f7b46e7ac0379" category="paragraph">您必须评估需要管理的数据类型、然后确定这些数据是否可以驻留在本机磁盘或阵列LUN上。</block>
  <block id="3439963800c8057bd74ac7f542e45b25" category="summary">在节点加入集群之前或系统处于维护模式时、阵列LUN名称采用Data ONTAP 8.3之前使用的格式、即集群前格式。</block>
  <block id="6f577dbe3653998d6be84b7f845de62a" category="doc">集群前阵列LUN名称格式</block>
  <block id="be98d681b51d02a6828eee5a47b7b37a" category="paragraph">在节点加入集群之前或系统处于维护模式时、阵列LUN名称采用Data ONTAP 8.3之前使用的格式、即_pre-cluster-_格式。</block>
  <block id="d2d47b120b703619033bc30c527fab4e" category="paragraph">采用这种格式时、阵列LUN名称是一个基于路径的名称、其中包括ONTAP系统与存储阵列之间路径中的设备、使用的端口以及存储阵列在外部显示的用于映射到主机的路径中的SCSI LUN ID。</block>
  <block id="80317dbcb1847c479f20cf445e227457" category="paragraph">在支持阵列LUN的ONTAP系统上、每个阵列LUN可以具有多个名称、因为每个LUN都有多个路径。</block>
  <block id="c251dcff5d4b04938ce46bf92c8b7a7a" category="section-title">ONTAP系统的阵列LUN名称格式</block>
  <block id="b94e5e2ef2e1af099c0cbb7af394e7fb" category="cell">组件说明</block>
  <block id="4e4e9a3c74ffafdd7400bec54125834f" category="paragraph">直连</block>
  <block id="ae3934203b9a772af1085318fcb43cdf" category="paragraph"><block ref="2f63c8008e1c79aa7c81d632b47c0be8" prefix="" category="inline-code"></block></block>
  <block id="5c2fd59f98aee8a4e96d0b1a5db25f4d" category="paragraph"><block ref="28ad433d4852cc935dbfa07928f3912e" prefix="" category="inline-code"></block> 是集群节点的名称。如果使用ONTAP、则会在LUN名称之前添加节点名称、以便基于路径的名称在集群中是唯一的。 adapter是ONTAP系统上的适配器编号。</block>
  <block id="621aa5e453056cb88f8eeaf2cdccac01" category="paragraph"><block ref="b80bb7740288fda1f201890375a60c8f" prefix="" category="inline-code"></block> 是存储阵列上的通道适配器端口。</block>
  <block id="9d1118c712a1454d042395f2f826e428" category="paragraph"><block ref="c22a55021b626d4633bb703e9ebcbbf9" prefix="" category="inline-code"></block> 是存储阵列提供给主机的阵列LUN编号。</block>
  <block id="31e44fb018e020a6fa0edb1c324a8334" category="paragraph">示例：<block ref="b736ddf837e1c0dde31dbe57e158c409" prefix=" " category="inline-code"></block></block>
  <block id="a27c828159188c1e1cec306fe279d9e2" category="paragraph">光纤连接</block>
  <block id="9aaabd55eb32641d1bf223c61c632e24" category="paragraph"><block ref="a1857b2b61d635f618675de5f97618d3" prefix="" category="inline-code"></block></block>
  <block id="5eab6c751e6e5268382df1631fa3077c" category="paragraph"><block ref="28ad433d4852cc935dbfa07928f3912e" prefix="" category="inline-code"></block> 是节点的名称。如果使用ONTAP、则会在LUN名称之前添加节点名称、以便基于路径的名称在集群中是唯一的。<block ref="b0abf86ae1af6c8d52fba5690a7c8bdc" prefix=" " category="inline-code"></block> 是交换机的名称。</block>
  <block id="8093819c9f685761b26f20dada8bc3ae" category="paragraph"><block ref="901555fb06e346cb065ceb9808dcfc25" prefix="" category="inline-code"></block> 是连接到目标端口(端点)的交换机端口。</block>
  <block id="127d24b01792e3bbe8888928ddfc9a30" category="paragraph"><block ref="b80bb7740288fda1f201890375a60c8f" prefix="" category="inline-code"></block> 是设备ID。</block>
  <block id="100c55a7e95f717dedb292cf9f98d384" category="paragraph">示例：<block ref="dcc1c5ab4765ce5d21d60c17400338f7" prefix=" " category="inline-code"></block></block>
  <block id="3f54a09a70cc9d1528b35d59a5eaf07d" category="summary">如果阵列LUN已(通过ONTAP)分配给特定ONTAP系统、则在存储管理员尝试重新配置存储阵列上的阵列LUN之前、必须删除ONTAP写入该阵列LUN的信息。</block>
  <block id="d19971f2903399bff319771bce7f8190" category="doc">在存储阵列上重新配置阵列LUN的前提条件</block>
  <block id="f7d7b72498d76d1854656b619cae4f31" category="paragraph">当存储阵列向ONTAP提供阵列LUN时、ONTAP会收集有关该阵列LUN的信息(例如其大小)、并将该信息写入阵列LUN。ONTAP无法动态更新写入阵列LUN的信息。因此、在存储阵列管理员重新配置阵列LUN之前、您必须使用ONTAP将阵列LUN的状态更改为_unused _。从ONTAP的角度来看、此阵列LUN未使用。</block>
  <block id="da982e61671b8595cca5f56ff656427e" category="paragraph">将阵列LUN的状态更改为未使用时、ONTAP会执行以下操作：</block>
  <block id="6d22b96f3a64266ca9cbf61833ab94a0" category="list-text">终止阵列LUN的I/O操作</block>
  <block id="b2b9faf686c53545c5d36964fde276da" category="list-text">从阵列LUN中删除RAID配置信息标签和永久性预留、从而使该阵列LUN不属于任何ONTAP系统</block>
  <block id="a7c45fa418b76f698f6590e449aeb5fd" category="paragraph">此过程完成后、阵列LUN中不会保留任何ONTAP信息。</block>
  <block id="a81954eaf841787d1979d6cb00e913e2" category="paragraph">阵列LUN的状态更改为未使用后、您可以执行以下操作：</block>
  <block id="797ace2a891c875049ba5583a0c874b2" category="list-text">删除阵列LUN到ONTAP的映射、并使该阵列LUN可供其他主机使用。</block>
  <block id="9545eec3a8b025ce03a251e2a36ab054" category="list-text">调整阵列LUN的大小或更改其构成。</block>
  <block id="e10353beb2a83c40391568cc6db6de2d" category="paragraph">如果您希望ONTAP在阵列LUN的大小或构成发生更改后继续使用该阵列LUN、则必须再次将该阵列LUN提供给ONTAP、然后将该阵列LUN重新分配给ONTAP系统。ONTAP可识别新的阵列LUN大小或构成。</block>
  <block id="87661799370d0e6454ce90529bf6567c" category="summary">存储阵列可为可供ONTAP使用的阵列LUN提供RAID保护。ONTAP不提供RAID保护。</block>
  <block id="eac64a8dd8996cb418b7e1491961ef11" category="doc">阵列LUN的RAID保护</block>
  <block id="eec41317329d0e05017db078196c9870" category="paragraph">ONTAP对阵列LUN使用RAID0 (条带化)。ONTAP在存储阵列上支持多种RAID类型、但RAID0除外、因为RAID0不提供存储保护。</block>
  <block id="26e981321a561f73b50ab10ff64bbaa2" category="paragraph">在存储阵列上创建_RAID groups_时、您需要遵循存储阵列供应商的最佳实践、以确保存储阵列具有足够的保护级别、从而使磁盘故障不会导致数据丢失或数据访问丢失。</block>
  <block id="4c9c293b4118723d9c98df8e953f6958" category="list-text">存储阵列上的_RAID group_是指共同构成定义的RAID级别的磁盘的排列方式。</block>
  <block id="7533bba8c90395cff4d8694167111115" category="paragraph">每个RAID组仅支持一种RAID类型。为RAID组选择的磁盘数决定了特定RAID组支持的RAID类型。不同的存储阵列供应商使用不同的术语来描述此实体- RAID组、奇偶校验组、磁盘组、奇偶校验RAID组等术语。</block>
  <block id="d5e78a646217bfd12a656b5e7d207091" category="list-text">ONTAP在本机磁盘架上支持RAID4和RAID-DP、但在阵列LUN上仅支持RAID0。</block>
  <block id="d6a9aed7d8f472b42b34b96a733b44e0" category="summary">ONTAP支持使用四个或两个路径访问阵列LUN。</block>
  <block id="21b745932a0e08672a922d4e3e5716a9" category="doc">阵列LUN的所需路径数</block>
  <block id="1d79492d9cb38cbcd3c7ca52c3229ea9" category="paragraph">ONTAP希望并要求存储阵列至少通过两个冗余存储阵列端口来访问特定阵列LUN、即至少通过两个冗余路径。</block>
  <block id="f00d6921b495796a411ea2a1663e772e" category="paragraph">请确保存储阵列上用于访问给定LUN的端口来自不同的组件、以避免单点故障、例如备用控制器、集群或机箱。原因是、您不希望在一个组件发生故障时丢失对阵列LUN的所有访问权限。</block>
  <block id="14b3bca2c100918b473424f915086e85" category="summary">ONTAP系统必须通过冗余光纤通道(Fibre Channel、FC)网络连接到存储阵列。需要两个FC网络来防止连接出现故障、以便可以使光纤端口或交换机脱机进行升级和更换、而不会影响ONTAP系统。</block>
  <block id="6c96cb0ba09a37382dd3614664685866" category="doc">在路径中冗余设置组件的要求</block>
  <block id="c83b995f8485fd3b503806e77bf231aa" category="section-title">ONTAP系统冗余要求</block>
  <block id="d317fa1c541abdb5346b698d2d214dbc" category="list-text">您必须将每个连接连接连接到ONTAP系统上端口对中的不同FC启动程序端口。</block>
  <block id="9e917a2b7b598e9fd766f8ff33f3a61e" category="list-text">同一FC启动程序端口对中的每个FC启动程序端口都必须位于不同的总线上。</block>
  <block id="ba01e3352005dd6c6987b20efba2116a" category="section-title">FC交换机冗余要求</block>
  <block id="17e4f1fec3b0b9bbbb223e14d88aadca" category="list-text">您必须使用冗余交换机。</block>
  <block id="0011911cd254b977806e51cdd7c83407" category="section-title">存储阵列冗余要求</block>
  <block id="0c3e41ae4cb4a77b272a8c55b35437a3" category="paragraph">下图显示了为冗余选择的存储阵列端口的正确和错误。左侧示例中的路径设置正确、因为阵列LUN的路径是冗余的—每个连接都指向存储阵列上不同控制器上的端口。</block>
  <block id="597f53a7a1a69fca2a57361336494758" category="image-alt">阵列LUN的路径必须是冗余的。两条路径不正确地连接到同一个存储阵列控制器。</block>
  <block id="2910fd49d055d6613f62df3bffa3180c" category="summary">在规划如何将ONTAP系统连接到存储阵列时、端口到端口连接计划必须满足冗余、路径和其他准则要求。</block>
  <block id="0037841f7a156092392f6039d99cb340" category="doc">连接到存储阵列的要求</block>
  <block id="e192f388b6dd1685ac45f602d9ee7ca9" category="paragraph">设置连接的要求如下：</block>
  <block id="b4257242f67b6d4d13eb5f43fcfe2ea6" category="list-text">存储阵列上冗余端口对中的每个连接都必须连接到ONTAP系统上的不同FC启动程序端口。</block>
  <block id="bb6e04d2c0b801ae1ce15c852b3f728a" category="list-text">FC交换机上使用的端口必须为冗余端口。</block>
  <block id="5d80908530c766258bc0c1df93dc9067" category="list-text">必须设置连接以避免SP的 发生。</block>
  <block id="f3b6cb3ce2be4345c30c18d18f9dad4d" category="list-text">路径数不能超过ONTAP版本支持的路径数。</block>
  <block id="6d435001a144baf0f78a66c3c2f2c433" category="list-text">如果要设置一个FC启动程序端口与多个目标端口共享或目标端口与多个FC启动程序端口共享的配置、则必须遵循相应的规则。</block>
  <block id="cb24c7795c9a5780f32d206ce1bbb306" category="list-text">如果存储阵列支持的每个主机组每个端口的LUN数量少于ONTAP系统正在使用的LUN数量、则需要在ONTAP系统和存储阵列之间添加更多缆线。</block>
  <block id="3b449d970d7fcb097ffcf12889366f8b" category="summary">如果要在使用阵列LUN的ONTAP配置中使用FC启动程序端口、则必须遵循以下特定要求：端口对冗余、HBA的端口设置、连接到目标端口、阵列LUN限制以及连接到不同的存储和设备。</block>
  <block id="02c6babb8244dfe4f4f527ef127528de" category="doc">使用FC启动程序端口的要求</block>
  <block id="a4e1482618e73423ab85f9a061fc2e66" category="cell">功能</block>
  <block id="bff338362bb591cb74ba821ff32e4fe2" category="cell">要求</block>
  <block id="f692c8b4ef6ec001b4daf36bd56a55bb" category="paragraph">端口对冗余</block>
  <block id="67d516f29781fb553235a7260507d75c" category="paragraph">将ONTAP系统连接到阵列LUN时、必须使用冗余FC启动程序端口对。</block>
  <block id="e9d69b8e2366ee66cd320019b44b44eb" category="paragraph">HBA的端口设置</block>
  <block id="d0e33cedc2da6aebf5659e56e0877fc7" category="paragraph">您必须将用于访问磁盘或阵列LUN的所有HBA设置为_启动 程序_端口。</block>
  <block id="cb9153008fc47f17c590f2b92ee9d026" category="paragraph">正在连接到存储阵列目标端口</block>
  <block id="ceb4083d8fdd4be5a4e2e29025d5b83e" category="paragraph">您可以将同一个FC启动程序端口连接到存储阵列上的多个目标端口。</block>
  <block id="2ca7e9ef5c1799e452697c6bb840a680" category="paragraph">最多可以将两个FC启动程序端口连接到一个目标端口。</block>
  <block id="a28f20ece8d63743baeab597d8ba9dcd" category="paragraph">阵列LUN限制</block>
  <block id="84bd4e3c92709f3f1eb5f66dab51b413" category="paragraph">可通过FC启动程序端口查看的阵列LUN数量存在限制。这些限制因ONTAP版本而异。</block>
  <block id="f7e48514e15d33af172a6aab8231e0a0" category="paragraph">连接到不同的存储和设备</block>
  <block id="f43d092f57d92fb2db7efb86a7fab9f7" category="paragraph">必须使用单独的FC启动程序端口将ONTAP系统连接到以下各项：</block>
  <block id="0629603d05db387d1253ef68ff3c1ead" category="list-text">磁盘架</block>
  <block id="936263aa8a5425fe84a14888345f081f" category="list-text">阵列 LUN</block>
  <block id="5fa1f27a4db085455efad8586d12878b" category="list-text">磁带设备</block>
  <block id="6b47c69de45fffa94471e09dee4d8e23" category="paragraph">如果ONTAP系统没有足够的内部端口来满足您的要求、您必须订购额外的HBA。</block>
  <block id="e0e2858f368ffa91e335098cea8a6e9c" category="summary">规划聚合时、必须考虑在聚合中混用存储的规则。您不能在同一聚合中混用不同存储类型或不同供应商或供应商系列的阵列LUN。</block>
  <block id="df6984c19754cd47aa4d46c6cf778134" category="doc">在阵列LUN聚合中混用存储的规则</block>
  <block id="3096cdb9379cfaaf1b099336d2df3111" category="paragraph">不支持向同一聚合添加以下内容：</block>
  <block id="11b53d58a065fa403e6e31dfb918ede7" category="list-text">阵列LUN和磁盘</block>
  <block id="c2974ca99e6971d284fe5d265e14137a" category="list-text">校验和类型不同的阵列LUN</block>
  <block id="bcfc90b55065c0b3d90d485dd7710812" category="list-text">不同驱动器类型(例如、FC和SATA)或不同速度的阵列LUN</block>
  <block id="2474203193a1bb5959b63856ee864fa3" category="list-text">来自不同存储阵列供应商的阵列LUN</block>
  <block id="6334e4144ce15796b5d57620c122a4e9" category="list-text">来自不同存储阵列型号系列的阵列LUN</block>
  <block id="9ad53ef03f4dcffe29b35460512ef06e" category="summary">支持将最多两个ONTAP FC启动程序端口连接到存储阵列上的一个目标端口。每个目标端口都会分区为两个FC启动程序端口、每个集群节点一个。不支持与任何其他主机共享连接到ONTAP系统的目标端口。</block>
  <block id="170e1fa6bc517987c388fc4c867e22cd" category="doc">与多个FC启动程序端口共享目标端口的规则</block>
  <block id="2813d0e1c5a38469c29e59b23afe8869" category="paragraph">与多个启动程序共享一个目标端口有助于优化存储阵列端口的使用、以实现与ONTAP系统的连接。</block>
  <block id="61a62994ad80ca94837e6db58031e3ba" category="paragraph">此配置的规则如下：</block>
  <block id="37606d44e9cd1cc1beecfc5704ece8c6" category="list-text">如果ONTAP系统位于HA对中、则每个节点最多可与同一目标端口共享一个FC启动程序端口。</block>
  <block id="9ec3b9b46fedea6572713c270c6323ac" category="list-text">所有存储阵列都必须来自同一供应商和型号系列。</block>
  <block id="427a9a7442d8834c642248053d93b151" category="list-text">MetroCluster配置支持将单个目标端口连接到多个FC启动程序端口。</block>
  <block id="4ddc7e51f9fce1c06a782766c657beea" category="summary">您可以将ONTAP系统上的一个FC启动程序端口最多连接到不同存储阵列上的四个目标端口。如果要最大限度地减少使用的FC启动程序端口数、与多个目标共享一个FC启动程序端口非常有用。</block>
  <block id="c2149cfa4e1f03a5c15396a1c532ad33" category="doc">与多个目标端口共享FC启动程序端口的规则</block>
  <block id="7ca86ab92356e0cd5822c7c40248e26b" category="paragraph">您可以将ONTAP系统上的一个FC启动程序端口最多连接到_SETTANSE_存储阵列上的四个目标端口。如果要最大限度地减少使用的FC启动程序端口数、与多个目标共享一个FC启动程序端口非常有用。</block>
  <block id="e68f40cb62385b2fe3a5e849e3f3a42b" category="paragraph">此外、您还可以将一个FC启动程序端口最多连接到_sus相同_存储阵列上的四个目标端口、前提是该阵列可以根据要访问的目标端口向FC启动程序提供不同的逻辑设备集。</block>
  <block id="b9cad40603b56ee5143a4b548d158f96" category="paragraph">可通过FC启动程序端口查看的阵列LUN数量存在限制。这些限制因版本而异。</block>
  <block id="081554d2d04bbd58260d6f53f2a757c0" category="section-title">FC启动程序端口连接到_SETTLGE_存储阵列上的多个目标端口时的规则</block>
  <block id="f903bf0f94d967cc0e66ea7929e00429" category="list-text">所有存储阵列都必须属于同一个供应商型号系列。</block>
  <block id="28a7980eb97b5b65ca78fc1e5fcb6aae" category="list-text">MetroCluster配置支持将一个FC启动程序端口连接到多个目标端口。</block>
  <block id="19f322ca6f14bca6e7e1fde4d381ccc9" category="list-text">一个FC启动程序端口最多可以连接到多个存储阵列上的四个目标端口。</block>
  <block id="ca2910bd585c5875e2a637a6bb752088" category="list-text">每个FC启动程序-目标端口对都必须位于一个单独的分区(1：1)中、即使同一个FC启动程序端口正在访问多个目标端口也是如此。</block>
  <block id="e0021c53c17e6ac79300b81063308315" category="section-title">FC启动程序端口连接到_send_存储阵列上的多个目标端口时的规则</block>
  <block id="9fbdc58d0d03fb9f1e284f359479350e" category="paragraph">根据要访问的目标端口、某些存储阵列可以为FC启动程序提供不同的逻辑设备集。这些类型的存储阵列允许同一个FC启动程序位于多个主机组中。在具有此功能的存储阵列上、每个FC启动程序端口都可以访问同一存储阵列上的多个阵列目标端口、每个目标端口向FC启动程序提供不同的LUN组。请参见存储阵列文档、以确定存储阵列是否允许同一个FC启动程序位于多个主机组中。</block>
  <block id="13312c2b50bad6be41112fc279c4f743" category="paragraph">以下是此配置的规则：</block>
  <block id="a97d1ad5190a8589ca33a67b40511017" category="list-text">一个FC启动程序端口最多可以连接到存储阵列上的四个目标端口。</block>
  <block id="8d5f5407fb82bdd0e36d232153c65ff7" category="list-text">每个FC启动程序-目标端口对都必须位于一个单独的分区(1：1)中、即使同一个FC启动程序正在访问多个目标端口也是如此。</block>
  <block id="7a506d817ab4e436e21478d392c167aa" category="summary">典型的存储阵列可为不同供应商的主机提供存储。但是、ONTAP要求某些存储阵列专用于ONTAP系统。</block>
  <block id="67957d00b566430a3ef7ee89c5d2eb7e" category="doc">在主机之间共享存储阵列</block>
  <block id="c0e28b776e3fbc4ceb9d172d89a2c315" category="paragraph">要确定供应商的存储阵列是否必须专用于ONTAP系统、请参见_互操作性表_。</block>
  <block id="4adc401c8ae4c785828285c144ca88b9" category="summary">在某些情况下、您可能会认为存在问题、但从ONTAP的角度来看并非错误、因为这种情况不会阻止系统运行。用于检查后端配置的ONTAP命令不会识别不会阻止系统运行的配置。</block>
  <block id="03a3c09229323c43ea8ad2b5324a05d5" category="doc">检查后端配置的命令无法识别的情况</block>
  <block id="54ec8272f12f270f83c706e403452d9f" category="paragraph">和等命令<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block><block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block><block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 不会在出现以下情况时向您发出警报：</block>
  <block id="84317cf7d06dc5c21fb1e713c05c5547" category="list-text">不符合最佳实践建议的配置；即不需要这些配置</block>
  <block id="aa22697a23076e4c32c79ea1befa970e" category="list-text">过渡状态期间可能出现的情况</block>
  <block id="da998a789ead96203d6b134743a0772d" category="paragraph">例如、在LUN从一个LUN组迁移到另一个LUN组完成之前、输出中可能会显示更多的LUN组<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 。</block>
  <block id="7960839d30129660033b890dd65fa91a" category="list-text">与预期配置不匹配的条件</block>
  <block id="17818d43421252532af9bc22b78d1dbc" category="paragraph">例如、如果您要配置多个LUN组、但只配置了一个LUN组、则ONTAP不会将其标识为错误、因为支持单个LUN组。</block>
  <block id="b2923373e2eb118c513dfab25116b008" category="summary">对于独立ONTAP系统和HA对中的节点、您必须创建一个大小足够的备用阵列LUN、以便在没有可用备用磁盘时保存核心转储。</block>
  <block id="1f93a9bdbffb7f1a61612801ad266c60" category="doc">核心转储的备用阵列LUN要求</block>
  <block id="a52eca13f09724cb65f9dd7f5b640c5e" category="paragraph">在同时使用磁盘和阵列LUN的系统上、如果有备用磁盘、则核心转储不需要备用阵列LUN。如果备用阵列LUN和备用磁盘都不可用、则没有可转储核心的空间。</block>
  <block id="62450b3b7004508920b3d612e21f1213" category="paragraph">核心转储包含内存和NVRAM的内容。在系统崩溃期间、ONTAP会将核心转储到备用阵列LUN或备用磁盘(如果存在备用磁盘)。重新启动后、将从备用磁盘读取核心、并将其保存到根文件系统上的核心转储中。然后、技术支持可以使用核心转储来帮助解决问题。</block>
  <block id="23b549cad0e5a664b4ed4da72600f8f5" category="paragraph">_LUN _包含每个平台的最小备用核心阵列Hardware Universe大小。</block>
  <block id="96d1e6553110824d384729fd9c3ed01a" category="summary">实施系统使用存储阵列中LUN的配置分为两个阶段：后端实施和前端实施。在规划配置时、了解每个阶段的高级任务非常有用。</block>
  <block id="2c50abe4213626cdc8878787385de8c2" category="doc">使用阵列LUN的系统的实施阶段</block>
  <block id="ced3d49b94ba990250073838e7fec833" category="section-title">第1阶段：后端实施</block>
  <block id="e67d82c270b0f08e4b0176fa203a3bd5" category="paragraph">设置后端实施包括设置带有存储阵列的ONTAP系统(直到可以安装ONTAP软件为止)所需的所有任务。</block>
  <block id="211c4f37f431a0cc59af6ffd598add2d" category="paragraph">设置后端实施的任务包括：</block>
  <block id="c5fb11fb57477e4b3721e24f2969cd55" category="list-text">创建和格式化阵列LUN</block>
  <block id="bf50b4767c8d96536f6cd85bc037f527" category="list-text">正在分配端口</block>
  <block id="d223aabe6d0751ac7fb17d3493f3c6c7" category="list-text">布线</block>
  <block id="5ea751298e2e5f812e8eb01f64079b29" category="list-text">分区交换机(如果适用)</block>
  <block id="14e936f6d95364c2621075edea3de9fe" category="list-text">在ONTAP中、将特定阵列LUN分配给ONTAP系统</block>
  <block id="2a0db7fffdc9e96196af3848e0af9c89" category="list-text">在ONTAP中、提供在网络上设置ONTAP系统的信息</block>
  <block id="9b49ef693c86a5a18205007ebae041de" category="list-text">安装ONTAP软件</block>
  <block id="a098f2df74a023697247c49fe8a94838" category="paragraph">如果订购的ONTAP系统附带有磁盘架、则ONTAP软件会在出厂时安装。在这种配置中、您无需创建根卷并安装许可证和ONTAP软件。</block>
  <block id="1a62c7f411bc32fba580d8787c97bea7" category="paragraph">如果订购的ONTAP系统没有磁盘架、则需要先配置ONTAP、然后再设置集群。</block>
  <block id="ef0d50e92902d5e6b416c2d733c7e584" category="section-title">第2阶段：前端实施</block>
  <block id="e50d31e868ef0ff06ffd90182d7a2e18" category="paragraph">设置前端实施的任务与使用磁盘的系统的任务相同、包括以下内容：</block>
  <block id="e99f760f7714b65e275bf2d5e21cde02" category="list-text">为所有协议(NAS、FC或两者)配置ONTAP系统</block>
  <block id="7c29944fa69a1cf0255c576162fe08fd" category="list-text">配置ONTAP功能、例如SnapVault、SnapMirror、SnapValidator和Snapshot副本</block>
  <block id="0143110749426f58bc59b70cbf52b7db" category="list-text">创建卷和聚合</block>
  <block id="3ba44acabea522a82b32e3e64ad8989c" category="list-text">设置数据保护、包括NDMP转储到磁带</block>
  <block id="1ca5c2367061934e7917cd41fffd5758" category="summary">在设置使用阵列LUN的MetroCluster配置之前、您必须确保此配置中使用的ONTAP系统和存储符合基本可支持性要求。</block>
  <block id="ae4be5861069da077376f21078e7d091" category="doc">使用阵列LUN的MetroCluster配置的要求</block>
  <block id="ff581d9caac07c96da9d76e5e797bec2" category="paragraph">支持使用阵列LUN的MetroCluster配置的基本要求如下：</block>
  <block id="90775b4a19822df00ba862d8e28cec6b" category="list-text">您可以同时使用V系列系统和FAS系统、并支持MetroCluster配置中的阵列LUN。</block>
  <block id="2a8f2f88a26972b8d9a975b24d4f425e" category="paragraph">但是、您必须确保MetroCluster配置中使用的所有ONTAP系统的型号都相同。</block>
  <block id="e1e1d3e6d97bb8792cdb7b6398b120f4" category="list-text">ONTAP系统只能使用本机磁盘、仅存储阵列上的LUN或同时使用这两者。</block>
  <block id="7bf7705346610a9834998b7da77ebc75" category="list-text">如果要设置同时包含本机磁盘和阵列LUN的MetroCluster配置、则必须使用FC-SAS网桥以及这些网桥支持的本机磁盘。</block>
  <block id="625ea75873804c924d5174a9b54b393e" category="list-text">ONTAP系统和存储阵列必须在_Inter可 操作性表_中标识为受MetroCluster配置支持。</block>
  <block id="f235d75eb31192e4ac7a6d122aa712ec" category="paragraph"><block ref="f235d75eb31192e4ac7a6d122aa712ec" category="inline-link-rx"></block></block>
  <block id="4640e14a8873daa94cfe8ee1f0d4a51e" category="summary">您可以将光纤连接配置中的ONTAP系统与存储阵列连接起来。独立系统和HA对均支持光纤连接配置。直连配置仅限于某些存储阵列和某些ONTAP版本。</block>
  <block id="10d21c29c687f1172992be9ea323a3eb" category="doc">支持将ONTAP系统连接到存储阵列的方法</block>
  <block id="7b772ad528992e442088c2636352d59d" category="paragraph">互操作性表提供了有关运行ONTAP的特定存储阵列和平台支持的连接方法的信息。</block>
  <block id="dc5da38b804a6f64af8cb0b46d7fbc68" category="summary">ONTAP可以检测目标端口上的资源争用事件、例如I/O队列已满、命令超时或HBA资源耗尽。</block>
  <block id="e7bb0af6e450bed818f181043a613011" category="doc">目标端口利用率策略设置</block>
  <block id="2d328f994920454870cf3079a4c4ac60" category="paragraph">如果在给定阵列目标端口上检测到此类事件、则可以使用命令设置目标端口利用率策略<block ref="6471bfb6d6a035a875fcf233e57a0b67" prefix=" " category="inline-code"></block> 。</block>
  <block id="e20e01c59755f6ea66d3a3cba55e9f85" category="paragraph">下表介绍了与目标端口关联的两个利用率策略：</block>
  <block id="51359e8b51c63b87d50cb1bab73380e2" category="cell">策略</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">说明</block>
  <block id="d04be8c6dc02ac306fe156a50f7a226f" category="paragraph">*正常*</block>
  <block id="429cfb54c2cdf0711db5f4e3a684c192" category="paragraph">当ONTAP在给定阵列目标端口上检测到目标端口资源争用时、它会减少目标端口的队列深度并对目标端口的I/O进行控制。在此模式下、目标端口队列深度的缩减小于每个目标端口资源争用事件的*defer*策略。目标端口队列深度的后续提升速度快于*defer*策略。默认策略为*NORMENT*。</block>
  <block id="63300c3b9c0368ab50df368abc019225" category="paragraph">*推迟*</block>
  <block id="60b71c536daec98d1314e99126ed8f06" category="paragraph">当ONTAP在给定阵列目标端口上检测到目标端口资源争用时、它会减少目标端口的队列深度并对目标端口的I/O进行控制。在此模式下、目标端口队列深度的缩减大于每个目标端口资源争用事件的*NORM*策略。目标端口队列深度的后续提升速度慢于*NORMENT*利用率策略。</block>
  <block id="c6dcaba5506696cac8f975f553364dac" category="section-title">用于查看和修改阵列目标端口利用率策略的输出示例</block>
  <block id="3da4f3d49e1a0d2994ff02e9418b138f" category="paragraph">以下命令显示与阵列目标端口关联的目标端口利用率策略：</block>
  <block id="9da0099a6227fc40d8007dbd117fc591" category="paragraph">默认情况下、给定阵列目标端口的I/O策略为*正常*。您可以通过运行以下命令来修改与端口关联的I/O策略：</block>
  <block id="5f6bd006c468629ec9bebdea07c7e7e3" category="summary">目标队列深度定义了可在存储阵列目标端口上排队(未完成)的ONTAP命令的数量。ONTAP提供默认值。对于大多数部署、默认目标队列深度是合适的；但是、您可以进行更改以更正性能问题。</block>
  <block id="af538b6816b18ebc337f2e156e0a3776" category="doc">目标队列深度自定义</block>
  <block id="fd938df9609d5a367669a7a904c9ed24" category="paragraph">默认目标队列深度因不同版本的ONTAP而异：</block>
  <block id="6f423872a68e0b730d1713024ee07e3b" category="list-text">对于ONTAP、默认值为512。</block>
  <block id="855536e1d9404ad65aaca7876c75d48b" category="list-text">对于Data ONTAP 8.2之前的所有版本、默认值均为256。</block>
  <block id="076ff8d144643ffd01698ab01fde8616" category="paragraph">如果为存储阵列配置了多个共享目标端口的启动程序、则不希望所有启动程序在队列缓冲区中的未完成命令加起来超过存储阵列可以处理的命令。否则、所有主机的性能都会受到影响。存储阵列在队列缓冲区中可以处理的命令数量有所不同。</block>
  <block id="6435f680b53e8c38eb8192ccc0270251" category="paragraph">目标队列深度也可以称为"`目标队列长度、`""`Q深度、`"或"`Max thorth."`</block>
  <block id="c3f7a2695446c9b4887591d47ddfd347" category="summary">您应在初始安装期间验证配置、以便在将配置置于生产环境之前解决问题。</block>
  <block id="6e0edda8805e465b2e834ba50fea8ad6" category="doc">对存储阵列配置进行故障排除</block>
  <block id="307de666b6a253ebba071eac677c8b3c" category="summary">您可以在存储配置中使用多个LUN组、以便通过将工作负载分布到更多目标端口来增加容量并提高系统性能。</block>
  <block id="b2e80576076dd2105604a530c60fd3ea" category="doc">使用多个LUN组的优势</block>
  <block id="7b3cc9adf4110f62cd77dc824020c5b0" category="paragraph">lun group_是存储阵列上ONTAP系统通过相同路径访问的一组逻辑设备。存储阵列管理员将一组逻辑设备配置为一个组、以定义哪个主机WWPN可以访问这些设备。ONTAP将这组设备称为_LUN group_。</block>
  <block id="c29f237315219acadb75a3742c180fb4" category="paragraph">使用多个LUN组的优势如下：</block>
  <block id="836c2fc81a7600cb44cb760fe13b07e1" category="list-text">给定FC启动程序端口对可支持的LUN数量存在限制。</block>
  <block id="3a8461d49978d8b077e7e80107b17a5c" category="paragraph">尤其是对于大型存储阵列、所需容量可能会超过单个LUN组可以提供的容量。因此、使用多个LUN组可能会很有用。</block>
  <block id="dd91d132c03ee1556231aec7ed65ac7b" category="list-text">您可以对FC启动程序端口对上的阵列LUN负载进行分区。</block>
  <block id="2235f3ad685940f90c8a6d85e4390a79" category="paragraph">并非所有存储阵列都支持使用多个LUN组。请参见_互操作性表_以确定您的存储阵列是否支持使用多个LUN组的配置。</block>
  <block id="6a8402572382cc856541fd2c211d2e35" category="summary">一个4端口阵列LUN组配置可用于所有ONTAP版本的所有存储阵列。</block>
  <block id="b4a2111b15052351b4d323f6876abb92" category="doc">有效路径：光纤连接配置中的一个4端口阵列LUN组</block>
  <block id="c372d4374db19cda23505dd6b775e6b3" category="paragraph">下图显示了使用单个4端口阵列LUN组的配置中的路径：</block>
  <block id="cd791e6edd9b27b98ba2e1cfcc69ab80" category="paragraph">在一个四端口LUN组配置中、阵列LUN会映射到存储阵列上的四个端口。阵列LUN组将通过不同的阵列目标端口提供给HA对中的两个节点。但是、每个节点只能通过两个路径端到端查看一个阵列LUN。配置分区后、节点上的每个FC启动程序端口只能访问一个目标阵列端口。</block>
  <block id="6418fd74e37c0ed7dc65e438e9943c73" category="paragraph">在检查是否已设置预期的LUN组数时、将输出与有效输出进行比较会很有帮助<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 。以下<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出示例显示了此配置(单个阵列LUN组)的预期输出：</block>
  <block id="b55eea1e98c93aac95651acd9aa63783" category="summary">您可以使用八端口LUN组配置将存储阵列与大型集群部署中的ONTAP系统连接起来、这些部署需要更高的路径冗余和负载平衡、而不是每个LUN组使用更少的端口。</block>
  <block id="a82e2b033bc512c939748e575c5b4c56" category="doc">有效路径：八端口阵列LUN组配置</block>
  <block id="323a2738ea278d5ac9e55cd2592f8240" category="paragraph">您可以设置此配置、使后端连接交叉或未交叉。</block>
  <block id="eab92b062d88f5a787455165b56c41f6" category="section-title">跨越后端连接的变体</block>
  <block id="6ee5deacde4274399a30aea644ea92b6" category="paragraph">在后端连接交叉的配置中、来自同一存储阵列控制器的FC连接会同时连接到两个光纤交换机(冗余)。</block>
  <block id="ca542474774bb72118c30d15038ad980" category="paragraph">与未跨越后端连接时相比、此连接方案更好地利用交换机端口和存储阵列端口、从而减少交换机或存储阵列控制器故障的影响。</block>
  <block id="eb1fb0f7b338edf94dcaf3339570ed48" category="paragraph">对于只有两个控制器的存储阵列、首选交叉八端口LUN组配置、而不是交叉八端口阵列LUN组配置。</block>
  <block id="c070519663eb53631f69adafa1b633bc" category="paragraph">只有当每个节点都有专用路径(每个路径一个FC启动程序到一个目标端口分区)时、才能跨越八端口阵列LUN组。</block>
  <block id="f8c2888b9918f7206252be827e1f4bd7" category="paragraph">在此交叉后端连接图中、请注意ONTAP系统是如何连接到交换机和存储阵列的。在连接到存储阵列控制器1端口1A和控制器2端口2C时、VS1使用交换机1；在连接到存储阵列控制器2端口2A和控制器1端口1C时、VS1使用交换机2。</block>
  <block id="936fa93ff8ced1639ef736f966f88554" category="paragraph">下表汇总了具有交叉后端连接的八端口阵列LUN组的分区。建议使用单启动程序分区策略。</block>
  <block id="4ba3c4981042a99c6f7527506ae69ee2" category="paragraph">VS1、端口0A</block>
  <block id="ca1f40a10bf19615b03d61c1ebb494c3" category="paragraph">控制器1、端口1A</block>
  <block id="f7fd19c551000b214a9d09dcb066dbea" category="paragraph">VS2、端口0A</block>
  <block id="3ee6e3d12702ca00c22657c99cc3f991" category="paragraph">控制器1、端口1B</block>
  <block id="e701326d4b070a8f63f8588d4a0e0ac5" category="paragraph">VS1、端口0b</block>
  <block id="b949760d78910480269d3d4fd668510d" category="paragraph">控制器2、端口2C</block>
  <block id="fdb724f3558e5d3112bbc75df73fdeae" category="paragraph">VS2、端口0b</block>
  <block id="902d6f31d7dc54cc68a54b52e4e6f6cb" category="paragraph">控制器2、端口2D</block>
  <block id="91e3eec93f9149facb7e7f6e963c9355" category="paragraph">VS1、端口0c</block>
  <block id="7e7f033df16c689c2792beb4b9bf0aef" category="paragraph">控制器2、端口2A</block>
  <block id="d63f00b6d9ac7b553ebcd48b1fba8637" category="paragraph">VS2、端口0c</block>
  <block id="f74b2879399136de30be82eae607b1c6" category="paragraph">控制器2、端口2B</block>
  <block id="d73b87966ed4206bbd599b231e4f4386" category="paragraph">VS1、端口0d</block>
  <block id="931fd79d6278e5eef1c6c5d05a2dd3a2" category="paragraph">控制器1、端口1C</block>
  <block id="db4c5ca7663f31863c8205640a060c52" category="paragraph">VS2、端口0d</block>
  <block id="9c1f10ae4ded56a8ade06fcf29a5b830" category="paragraph">控制器1、端口1D</block>
  <block id="41014acf92efabfe41e1faffb81c2303" category="section-title">跨越后端连接的变体</block>
  <block id="f89cdeb4630a85d8f596d3d2b6304630" category="paragraph">在不交叉后端连接的配置中、来自同一存储阵列控制器的FC连接只会连接到一个光纤交换机。</block>
  <block id="ca87a4650ca4aa7a7f9f6994aeff3e2e" category="paragraph">下图显示了八端口阵列LUN组配置中不会交叉后端连接的路径：</block>
  <block id="f708ddd77506943236f021adf39deb95" category="paragraph">下表汇总了未跨越后端连接时八端口阵列LUN组的分区。建议使用单启动程序分区策略。</block>
  <block id="aecd52b968d15fe0860ead9aabb6aedd" category="section-title">有关每个FC启动程序的最大阵列LUN数的注意事项</block>
  <block id="fece44db1969cc60e89743fe46795461" category="paragraph">在设置包含八端口阵列LUN组的配置时、不能超过ONTAP支持的每个FC启动程序端口的阵列LUN数量。</block>
  <block id="08bf2e6402704ceceed0d03dcfd52120" category="summary">对于所有ONTAP版本、大多数存储阵列均支持使用一个双端口阵列LUN组的光纤连接独立系统。</block>
  <block id="ddcc6e98ee11daf7eebfc21e110ac278" category="doc">有效路径：具有单个双端口阵列LUN组的独立系统</block>
  <block id="0ef9415f9412860b4ac9d41db25d420d" category="paragraph">不同的存储阵列(即使是来自同一供应商的存储阵列)可能会为端口添加与示例中所示不同的标签。在存储阵列上、您需要确保所选端口位于备用控制器上。</block>
  <block id="6d7919ab66e73b8b9c88379e81879a87" category="paragraph">下图显示了一个具有独立ONTAP系统的双端口阵列LUN组：</block>
  <block id="745d41c2aa5583eff64bc687d20322f1" category="paragraph">在验证安装时、您可以根据以下示例检查命令输出、以验证LUN组的数量是否符合您的预期以及是否存在冗余路径。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="paragraph-title">示例</block>
  <block id="5d1cc0df873e797aa4e9e611ab15f09b" category="paragraph">以下示例显示了所示配置的预期<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出—一个LUN组(LUN组0)、每个阵列LUN具有两个冗余路径。(输出中与图匹配的冗余路径显示在阵列目标端口名称20**1A**00a0b80fee04和20**2A**00a0b80fee0420中。)</block>
  <block id="771b187b97ac5a7033e0785007b96fe7" category="summary">在生产环境中部署系统之前、请务必检测并解决任何后端配置错误。</block>
  <block id="dba9bf5cbe8e2c5c17a5214f8434a8f6" category="doc">使用存储阵列验证安装</block>
  <block id="d7d769d8e91367536a0c26f369020ca9" category="paragraph">验证后端配置的两个阶段如下：</block>
  <block id="14fdbcd95a6e66b3e9a8731a84014d2c" category="list-text">检查是否存在任何导致ONTAP无法在存储阵列上运行的后端配置错误。</block>
  <block id="6485eb8986015b701112020aa07aa265" category="paragraph">这些错误由标记<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>。您必须修复这些错误。</block>
  <block id="715219de747f8ea68a94a29929dcaaa4" category="list-text">检查以确保配置符合预期。</block>
  <block id="d3e4f1411041e47fb5479ea4906efd21" category="paragraph">在许多情况下、从系统角度来看、这些情况不是错误、但可能与您的预期不同。例如、<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出将显示两个LUN组、但您只需要一个LUN组。本文档所指的情况是不符合您"`意向`"的情况。</block>
  <block id="c18df370e769cc61faafee3370757e76" category="paragraph">下图显示了以下工作流：首先从系统角度确认没有配置错误、然后确认安装符合预期。</block>
  <block id="40b63d7f202a81e80ece67c8c4c5b307" category="image-alt">首先运行storage array config show。如有说明</block>
  <block id="c674bdd076b2125938c0405099bf6b81" category="summary">ONTAP会定期监控链路的使用情况。ONTAP对链路故障的响应因发生故障的位置而异。</block>
  <block id="6ebc9b779965bcefd885c948bdf35d0a" category="doc">发生链路故障时会发生什么情况</block>
  <block id="3a0ba574b757065cebdd92c9c5a1a09f" category="paragraph">ONTAP会定期监控链路的使用情况。ONTAP对链路故障的响应因发生故障的位置而异。</block>
  <block id="ec42fda10baf30bfa91eeda62fbf9388" category="paragraph">下表显示了光纤连接配置出现故障时会发生什么情况：</block>
  <block id="906928911e8a18154f29c169e49198d1" category="cell">如果...之间的链路发生故障</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">然后...</block>
  <block id="227c8c49e76052e40091075a9b207d31" category="paragraph">ONTAP系统和交换机</block>
  <block id="dc572c3d8479d65aeb1d0abf2f139ff6" category="paragraph">ONTAP会立即接收通知、并立即将流量发送到另一路径。</block>
  <block id="a70393546f3886d534da23e2b2b2cadb" category="paragraph">交换机和存储阵列</block>
  <block id="879873e48cd746eb9f3f32a2e46841b9" category="paragraph">由于ONTAP系统和交换机之间仍建立链路、因此ONTAP无法立即发现链路故障。当I/O超时时、ONTAP发现存在故障。ONTAP会重试三次、将流量发送到原始路径、然后将流量故障转移到另一路径。</block>
  <block id="11f04b4dfbb5bbdb79a222660d7b5c10" category="summary">在安装之后以及执行网络结构维护活动期间、您需要检查阵列LUN的冗余路径。</block>
  <block id="8ccab4151c7c413d47131c6231102d97" category="doc">何时检查阵列LUN的冗余路径</block>
  <block id="7da732258b6806f143e8b3a3c9220e6e" category="paragraph">在执行以下活动时、应重新检查路径冗余：</block>
  <block id="6fa548f2ea82ea7bbec17cd526290147" category="list-text">初始安装</block>
  <block id="302fa341e2ffe4f86ac59e54ebf203a6" category="list-text">网络结构维护、例如：</block>
  <block id="7ba3ff5bb085587c4199b2501ee1b145" category="list-text">基础架构升级之前、期间和之后</block>
  <block id="905ed0d15bc380d2474a02514218e0c5" category="list-text">在交换机停止服务以进行维护之前和之后</block>
  <block id="1650de6cfd3a5204b710d802fd5d2af1" category="paragraph">在删除ONTAP系统和存储阵列之间的交换机之前、请确保已将这些路径配置为冗余路径、以便不会中断对阵列LUN的访问。</block>
  <block id="a5b6b021ff9002c5848a2d26e83200cc" category="list-text">维护存储阵列上的硬件前后</block>
  <block id="2bca702c2fe1efc279f4753e70c506c3" category="paragraph">例如、在维护主机适配器和端口所在的硬件组件时、应重新检查路径冗余。(此组件的名称因存储阵列型号而异)。</block>
  <block id="1eefb1c24d47aae5c6e7188625d5ccdd" category="paragraph">特定存储阵列支持的内容、包括支持的配置</block>
  <block id="6cfb282c437aaeff532b513c426f6d17" category="summary">通过分区、存储管理员可以限制特定ONTAP系统可以访问的阵列LUN。对于每个启动程序端口、ONTAP要求一个阵列LUN只能在一个目标端口上可见。</block>
  <block id="6a57dbf2177105ed83db82c67a5368fb" category="doc">使用存储阵列的配置中的分区</block>
  <block id="3778364da0b8a6c653daaf7a8cbd1b26" category="paragraph">通过在光纤通道(FC)交换机上配置分区、您可以定义已连接节点之间的路径、从而限制连接到通用FC SAN的设备之间的可见性和连接性。</block>
  <block id="6a85e48c78b51caf3a90cd76890f58a9" category="summary">对于使用存储阵列的配置、建议的分区类型为1：1分区。对于1：1分区、每个分区包含一个FC启动程序端口和一个存储阵列目标端口。</block>
  <block id="3d548dbc670bf9a2781780b2b940ad71" category="doc">使用存储阵列的配置的分区建议</block>
  <block id="cd3fcd6a368ed731ab96525a961262b4" category="paragraph">创建1：1分区的优势如下：</block>
  <block id="4eb3095c99b351ce72b4d1a0ac482147" category="list-text">您可以限制可用于访问特定阵列LUN的端口数量。</block>
  <block id="d45c0b023fcfc88d3c43ca50e2a0dd4e" category="list-text">由于FC启动程序ONTAP系统不会尝试彼此发现、因此发现和启动时间有所缩短。</block>
  <block id="93a1870fd45cc4eca7127772a4c509f5" category="summary">欢迎使用ONTAP FlexArray信息库。您可以在此处找到有关如何设置集群以使用存储阵列的信息。</block>
  <block id="8bb648e186f590f9b6a3596a6801b253" category="doc">《FlexArray®虚拟化安装要求和参考》</block>
  <block id="ce6f786c0c0f40ceff81b1d8273749f7" category="summary">ONTAP不支持配置指向同一存储阵列控制器的所有路径、因为这样做会设置具有单点故障(Single Point of Failure、SPof)的配置。storage errors show命令可确定其路径设置为指向同一存储阵列控制器的任何阵列LUN。</block>
  <block id="39b24f9fa89626f28012e2818d60b270" category="doc">一个阵列LUN的所有路径都位于同一个存储阵列控制器上</block>
  <block id="e8105432f0d9ff2b6d3a53d7b499e929" category="paragraph">ONTAP不支持配置指向同一存储阵列控制器的所有路径、因为这样做会设置具有单点故障(Single Point of Failure、SPof)的配置。<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>命令用于标识其路径设置为转至同一存储阵列控制器的任何阵列LUN。</block>
  <block id="6c69196b8345d65b470725c4c40e6993" category="paragraph">在修复此错误之前、ONTAP不允许将阵列LUN分配给ONTAP系统。</block>
  <block id="9fbdde521fb53bdc326355b385f98991" category="section-title">storage errors.显示消息</block>
  <block id="b72ac10807b29c77f5b7e4b80ea40414" category="section-title">说明</block>
  <block id="fdb4db08376910fe673f4e04aae2f245" category="paragraph">之所以出现此错误、是因为阵列LUN的路径已设置为指向同一个存储阵列控制器或FRU。</block>
  <block id="66c5796617c70dfeeb5ba5f30404c437" category="paragraph">使用四条路径访问阵列LUN、使用具有多个控制器的CRU的存储阵列(例如EMC Symmetrix或HDS USP)或使用双控制器的存储阵列(例如EMC CX或HP EVA)是实现冗余的好方法。但是、如果您设置了通过单个存储阵列控制器或FRU的路径、则您将使用SPIF (即使具有此类功能)来设置配置。在主动-主动存储阵列上、整个FRU被视为一个容错域。例如、一个EMC Symmetrix存储阵列在同一个FEBE板上具有多个通道导向器。FEBE板被视为一个故障域、因为如果所有路径都穿过同一个FEBE板、则在必须更换该板时、所有路径都将丢失。</block>
  <block id="28e7f6d553e63cd22b6510cc1ecf9095" category="paragraph">下图显示了在设置阵列LUN的冗余路径以避免出现单个故障域时选择的存储阵列端口的正确和错误。左侧示例中的路径设置正确、因为阵列LUN的路径是冗余的—每个连接都指向存储阵列上不同控制器上的端口。在右侧示例中、阵列LUN的两个路径都指向同一个控制器、从而设置一个SPPO。</block>
  <block id="3902eddb9d2f5f8c067889411a715b23" category="paragraph">命令可<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 显示位于同一容错域中的阵列LUN。如果您查看TPGN"列(目标端口组编号)、也会在输出中看到此问题<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block> 。对于启动程序端口对中的每个启动程序、应显示不同的TPGN.如果对中两个启动程序的TPGN相同、则两个启动程序位于同一故障域中。</block>
  <block id="b04aa2fcf08739edb464c3ab6f186b86" category="paragraph">以下<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block> 示例显示了LUN 30的TPGN1、该LUN可通过启动程序0a和0c进行访问。如果路径冗余、则每个启动程序会显示不同的TPGN.</block>
  <block id="2fa6235aced0b5f5febb10e1e7c41407" category="paragraph">此示例中的完整UID为600508B4：000B6314：00008000：01660000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000。在本示例中、由于空间原因、此名称会被截断。</block>
  <block id="3f207ce1448ab06ed1b21c567b363717" category="section-title">故障排除和问题解决</block>
  <block id="fb92d4afa5af799d71e0e47cf415f884" category="paragraph">必须重新配置阵列LUN的路径、使其转到冗余存储阵列控制器或FRU。</block>
  <block id="27bf83631b61f768632ab5ec7877f942" category="list-text">向另一控制器上的冗余目标端口添加缆线。</block>
  <block id="33ff66548d07e4428b146911db2a719b" category="paragraph">在解决此问题时、您应保持冗余、方法是向备用控制器添加缆线_Before _使用SPOF从控制器中拔下缆线。在这种情况下、可以保持冗余、因为您是临时增加到三个路径的路径数、而不是在解决问题时将路径数减少到一个。</block>
  <block id="ea1cb169526575b7c32eac69f5afe493" category="list-text">从控制器上拔下一根使用SPUP设置的缆线。</block>
  <block id="4391dc0a8c2501e7c6f5bec003bfc97a" category="paragraph">现在、您有两条通往阵列LUN的冗余路径。</block>
  <block id="39067850758ffdc0b6340394454ef386" category="list-text">在ONTAP命令行中、再次输入以下命令、并确认错误已修复：<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="6550a6d62cfca4a19df9f7cb75fae47e" category="summary">ONTAP不支持访问控制阵列LUN。storage errorors show输出会在显示访问控制LUN时向您发出警报。</block>
  <block id="b59abc18de07f249a2838cf61aae1d93" category="doc">访问控制LUN将提供给ONTAP</block>
  <block id="7175e731404c418bdbdfc8dc7f721023" category="paragraph">ONTAP不支持访问控制阵列LUN。输出将<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 在显示访问控制LUN时向您发出警报。</block>
  <block id="c9a7dd34c976769fd29432ba21870a73" category="paragraph">ONTAP仅支持存储阵列LUN。例如、将阵列LUN (E-Series访问控制LUN)提供给ONTAP时、<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出看起来正常；它显示了LUN组中的访问控制LUN、如以下示例所示。屏幕底部的警告消息指示出现问题。您需要运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 来确定问题在于提供了访问控制LUN以及它是哪个LUN。</block>
  <block id="175d0bf36dff2c0c29ddfdc3e8350449" category="list-text">在存储阵列上、屏蔽掉访问控制LUN。</block>
  <block id="69929ec8103980b4ed86d74db80312ab" category="list-text">在ONTAP中、再次运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 以确认访问控制LUN不再提供给ONTAP。</block>
  <block id="1e25e100102f9e59c153a88b3104da3a" category="summary">规划阵列LUN大小时、必须遵守ONTAP的最小和最大阵列LUN大小限制。这些限制因ONTAP版本而异。storage errors show输出用于确定不符合大小要求的阵列LUN。</block>
  <block id="6356a767e1aa1442ed94f740a8a204ef" category="doc">阵列LUN大小小于或大于支持的值</block>
  <block id="978b78d1e8b493868c2769321a1bd8a4" category="paragraph">规划阵列LUN大小时、必须遵守ONTAP的最小和最大阵列LUN大小限制。这些限制因ONTAP版本而异。输出将<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 确定不符合大小要求的阵列LUN。</block>
  <block id="15a9774f7574e358b1d012dbed7d1083" category="paragraph">您不能将存在大小问题的阵列LUN分配给ONTAP系统。</block>
  <block id="1d00e7dce692e8dc3f6877f035e3a616" category="paragraph">或</block>
  <block id="fee9e1cad3d21cc941bdd5e36e9018af" category="paragraph">如果阵列LUN小于ONTAP支持的最小阵列LUN大小或超过支持的最大大小、则会生成此消息。阵列LUN大小大于或小于支持值的主要原因可能如下：</block>
  <block id="e7977cf777a5857c08400068e896906d" category="list-text">存储阵列管理员未根据供应商的度量单位定义将ONTAP阵列LUN大小限制转换为等效限制。</block>
  <block id="b378ef8d656f6aed345bf6057273630f" category="paragraph">某些供应商计算阵列LUN大小限制的方式与ONTAP不同、以确定阵列LUN大小上限和下限。</block>
  <block id="e6afcb7337a35c15c80e0974b1244a20" category="paragraph">_LULUN _列出了受支持的最大和最小阵列Hardware Universe大小限制的值。</block>
  <block id="c1c0598d98c2ad431e1df1d2986deadc" category="list-text">阵列LUN适用于大小限制与ONTAP限制不同的另一台主机。</block>
  <block id="ce917fe307a3beab55e97222fa4bfb62" category="paragraph">在开放的SAN中、如果尚未屏蔽用于其他主机的阵列LUN、则ONTAP会公开给这些阵列LUN。</block>
  <block id="e3d749990d8a6147540732a09f5f76bc" category="paragraph">ONTAP会生成有关向其公开的任何阵列LUN的大小问题的错误消息。</block>
  <block id="4ee4419701052ada6bb4d1751f1cdd75" category="list-text">查看<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出、确定哪个阵列LUN存在大小问题。</block>
  <block id="5ef64706f465468c8a2cbc730d724f68" category="list-text">如果存在大小问题的阵列LUN是针对ONTAP的、则存储阵列管理员必须调整阵列LUN的大小以满足ONTAP要求、然后将其再次提供给ONTAP。</block>
  <block id="43257107a9f5463b5fd3fa4056f1eeb2" category="list-text">如果存在大小问题的阵列LUN是另一台主机的、则存储阵列管理员必须屏蔽该阵列LUN、以使其不会暴露给ONTAP。</block>
  <block id="a1c365342d83ef8419fbc334e504d241" category="list-text">修复问题后、再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认错误不会持续。</block>
  <block id="aa20b032081f0dec5a8c0fb8b88a998c" category="summary">您可以将阵列LUN上托管的数据以其本机格式导入到ONTAP中。如果此阵列LUN在导入期间具有外部主机预留、则导入此类标记为外部的阵列LUN的内容的过程可能会受到影响。</block>
  <block id="07a8f194cac565723fb3b36167faba09" category="doc">阵列LUN标记为外部并具有预留</block>
  <block id="15c756cb242a232e8f61dbd983fd85e8" category="paragraph">您可以将阵列LUN上托管的数据以其本机格式导入到ONTAP中。如果此阵列LUN在导入期间具有外部主机预留、则导入此类标记为*外部*的阵列LUN的内容的过程可能会受到影响。</block>
  <block id="568a7a98d89a07f08d754cea27591bfb" category="paragraph">如果在ONTAP管理员启动导入过程之前未清除LUN上的外部主机应用程序创建的预留、则会出现此错误情况。导入操作失败、命令输出将显示消息<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 。</block>
  <block id="27f0e97332067bed88f24f1dbcade864" category="paragraph">要成功执行导入操作、必须清除预留。</block>
  <block id="e0e9674a627633c81602dbe782944677" category="paragraph">要解决此问题、存储阵列管理员必须从阵列LUN中删除永久性预留。</block>
  <block id="4261fc46c094d0599ee42826c6c10d9e" category="paragraph">您可以从以本机格式访问阵列LUN数据的外部主机或使用ONTAP命令删除永久性预留。您可以使用以下ONTAP命令删除预留：</block>
  <block id="f5d9f64646b098d891a844e224bc7315" category="list-text">查看<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出以确定具有预留的阵列LUN、如以下示例所示：</block>
  <block id="94cd14318c7ed844232dad1c75799141" category="list-text">运行<block ref="0581d0d071ad835f74bf419081ce5d75" prefix=" " category="inline-code"></block> 命令切换到_advanced_模式、因为无法在_admin_模式下导入阵列LUN内容。</block>
  <block id="c3d0528eb664b63a23699f2832ab5f0e" category="list-text">使用<block ref="07391ed2a70412ea685a0e5f6e6152d3" prefix=" " category="inline-code"></block> 命令从已标识的阵列LUN中删除永久性预留。</block>
  <block id="f277b29620cdccbef9e81a0a652403c4" category="list-text">使用<block ref="76ffc50817aa4cd6214aa0061339fdf6" prefix=" " category="inline-code"></block> 命令启动将阵列LUN内容导入ONTAP的过程。</block>
  <block id="ad1f95e95bfb1ec6e69a7c3ab8d57bce" category="summary">ONTAP要求为特定ONTAP系统可见的阵列LUN配置相同的故障转移模式。在某些存储阵列上、可以在阵列LUN的不同路径上配置不一致的故障转移模式。</block>
  <block id="7fe6ee56f8577f0bc875be3bc1d5c898" category="doc">阵列LUN配置有冲突的故障转移模式</block>
  <block id="162cfdb79f4f86a3cb842595c2dbfc17" category="paragraph">在某些存储阵列(例如EMC CLARiON存储阵列)上、可以通过FC启动程序端口设置故障转移模式。在此类存储阵列上、可以为同一ONTAP系统上的FC启动程序可见的阵列LUN设置不一致的故障转移模式。对于从特定ONTAP系统到阵列LUN的路径、ONTAP不支持不一致的故障转移模式。</block>
  <block id="78e2a5b091e589afa7f33dd6c8e46c23" category="paragraph">如果存储阵列允许通过FC启动程序为阵列LUN设置故障转移模式、则安装验证过程的一部分应包括检查、以确保ONTAP系统可见的阵列LUN的故障转移模式设置没有问题。此<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 命令会就阵列LUN的故障转移模式设置不一致向您发出警报、并生成EMS消息。</block>
  <block id="74a45545ab730e718b95ea8fd1ff6bd5" category="paragraph">尽管您的系统可能会在阵列LUN故障转移模式设置不一致的情况下运行、但您需要尽快修复此问题。否则、如果路径发生故障、ONTAP系统可能无法正常运行、可能无法进行故障转移或系统可能发生崩溃。</block>
  <block id="0877bb3f4810641a8eb98f0635f51bdb" category="paragraph">ONTAP支持在运行ONTAP的节点之间设置不同的故障转移模式。例如、节点A可以对阵列LUN的路径使用主动/被动模式、而节点B可以对同一阵列LUN的路径使用AUA。</block>
  <block id="46af1ff1f21fc19137280bafaea3e8c2" category="paragraph">ONTAP在LUN初始化期间发现的第一个路径的故障转移模式是ONTAP对特定ONTAP系统中LUN的所有路径所预期的故障转移模式。如果后续发现路径的故障转移模式与第一个路径的故障转移模式不匹配、则ONTAP会发出错误消息。</block>
  <block id="515663632ca1d0cb2db823c43a379b8c" category="paragraph">在以下示例中<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 、ONTAP会告知您LUN emc-1.128的故障转移模式(可通过mysystem1 FC启动程序0A查看)为_priety_、并且故障转移模式与ONTAP在该阵列LUN的第一条路径上发现的故障转移模式不同。</block>
  <block id="413dc77591ded7d3429d4347e7b22c1c" category="paragraph">您需要修复存储阵列上的故障转移不匹配问题。但是、修复不匹配问题的整个过程取决于ONTAP在第一个路径上检测到的故障转移模式是否为您希望用于该ONTAP系统上指向阵列LUN的所有路径的故障转移模式。</block>
  <block id="eb4878ab48ead56d0c9c6f6a88f9a5cd" category="list-text">如果在安装验证过程中尚未输入、请输入<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 。</block>
  <block id="ac3c3d8218ef374b55067196c9f67cf1" category="paragraph"><block ref="3b15a40b2aa035a12fa64ab3bb4bbcdb" prefix=" " category="inline-code"></block>如果出现需要修复的问题、命令会指示您运行<block ref="151f929b03b8410799a173907e1b0ec0" prefix=" " category="inline-code"></block> 。</block>
  <block id="0d407531a2137393190f9041fd89a30a" category="list-text">查看<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出以确定阵列LUN的故障转移模式设置与ONTAP预期的故障转移模式不一致。</block>
  <block id="2d6cb0fc202fffa14fd9846105c99fc4" category="cell">如果系统在第一个路径上检测到的故障转移模式为...</block>
  <block id="21580ae8d219ab8f0d34434cc4c7efff" category="cell">您需要...</block>
  <block id="fbdfff9c2ebd4e2d9fed90eabfc337d1" category="paragraph">所需</block>
  <block id="8f97050ba45f2499f87c3be526b550e9" category="paragraph">您希望使用ALOA的故障转移模式、而ALOA是ONTAP为第一个路径检测到的故障转移模式。</block>
  <block id="637fc14a0fd745ac90c0f4df6abda12a" category="paragraph">在存储阵列上更改ONTAP错误消息中标识的启动程序的故障转移模式。转至步骤3。</block>
  <block id="b0095c682a37af2c53c256553dc3eb5c" category="paragraph">不是你想要的</block>
  <block id="c085538ad4b19d76cea3ec5f4564b85d" category="paragraph">您希望使用主动/被动故障转移模式、但ALOA是ONTAP为第一个路径检测到的故障转移模式。</block>
  <block id="1fabaa7f733eabc7bf2802f047665cc4" category="paragraph">从ONTAP系统视图中删除阵列LUN。转至步骤4。</block>
  <block id="958bf9559c5661f13d721671501a864d" category="list-text">如果需要更改启动程序的故障转移模式、请按以下步骤进行操作以修复不匹配的问题。</block>
  <block id="700f53abeb9b26a2d1bed7e0b852a30d" category="paragraph">如果您希望使用系统在第一个路径_is _上检测到的故障转移模式、则应使用此步骤。</block>
  <block id="bfbde2686118ee284dae3a52ad28f64d" category="list-text">在ONTAP中、使第二个路径脱机。</block>
  <block id="c54cd3867f605957eeddb01ab97c308f" category="list-text">在存储阵列上、更改错误消息中ONTAP标识的启动程序的故障转移模式。</block>
  <block id="4302172ae645c69cfa944a124a3cf0e2" category="list-text">在ONTAP中、将第二个路径恢复联机。</block>
  <block id="dcfa595cd90a10571633eabc75f5c8de" category="list-text">如果需要从ONTAP系统视图中删除阵列LUN以修复不匹配问题、请根据阵列LUN是备用阵列LUN还是聚合中的阵列LUN、选择以下方法之一。</block>
  <block id="720b9d4b9fd41483e93d2784b90d9c83" category="paragraph">如果系统在第一个路径上检测到的故障转移模式不是您需要的、则可以使用以下方法之一。</block>
  <block id="64eec0361499c67c472452842fe09265" category="cell">方法1：受影响的阵列LUN为备用阵列LUN (不属于聚合)</block>
  <block id="67c70872c3955c4e98464201c43e36b3" category="cell">方法2：受影响的LUN位于聚合中</block>
  <block id="34c9c7a8f4a1003d42498ed900ae2bdf" category="paragraph">使用此方法、无需重新启动ONTAP系统。</block>
  <block id="5c6fb741cdb148e82d28cf80936a05db" category="list-text">在ONTAP中、对每个受影响的备用LUN运行以下命令：<block ref="c779cebf2d19af405bc377d5a4333546" prefix=" " category="inline-code"></block></block>
  <block id="936a0eefa7dc0e027d766ccd8dcba1c8" category="list-text">在存储阵列上、屏蔽ONTAP系统的所有路径上的每个受影响阵列LUN。</block>
  <block id="706dd475e96ca98cb910e5c265e3e56f" category="list-text">等待大约一分钟、然后确认阵列LUN不再对ONTAP系统可见。</block>
  <block id="31b0ff0db3f031f4bb67a3ff18f68284" category="list-text">为ONTAP系统上的每个FC启动程序设置相同的故障转移模式。</block>
  <block id="0d56b2c7d26ead6b0d9eba27f957b655" category="list-text">再次向ONTAP系统提供所有受影响的阵列LUN。</block>
  <block id="2db43662065422f0310615328d412923" category="paragraph">ONTAP应在下次运行LUN发现时发现LUN</block>
  <block id="d0d1e30343d01b4b597173e4e94d8987" category="list-text">运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 以确认不再出现故障转移模式错误。</block>
  <block id="3548aa80c5d4d7c64eb02f6f8437d9b7" category="paragraph">使用此方法时、必须重新启动ONTAP系统。</block>
  <block id="328bded7897b5981be620e89eca27de9" category="list-text">重新启动ONTAP系统、并在Loader提示符处按住它。</block>
  <block id="8f10e8dbbfc5db36a2accbf2934fbfdd" category="list-text">在存储阵列上、查看此系统的FC启动程序上的故障转移模式设置、并根据需要将其更新为所需的故障转移模式。</block>
  <block id="719995ffceffe18b9725fe8ce3f22e3e" category="list-text">重新启动ONTAP系统。</block>
  <block id="e5d3fd4b59ed865b68a6a06007230a05" category="summary">多个ONTAP命令可提供有关存储阵列配置的信息、包括后端配置错误。这些命令在安装验证和故障排除期间尤其有用。</block>
  <block id="a8b7678d83c35ba2b05cafe46e0ccb81" category="doc">用于检查后端配置的命令</block>
  <block id="2a6607df2bb8de0ff32b60de6f892b45" category="paragraph"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block>命令是安装验证期间要使用的第一个命令。如果您发现系统运行不理想或收到错误消息、也可以使用此命令。</block>
  <block id="95680a39887791d32bf13b01c397d195" category="paragraph">下表显示了对安装验证和故障排除特别有用的命令：</block>
  <block id="ee97be03cb04119af45014d815621ce1" category="cell">命令</block>
  <block id="c9e8190f768032a3064dd5f7922aca1d" category="paragraph"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix="" category="inline-code"></block></block>
  <block id="e75ea2a96ce4ad7c99849fdc2bcf8b75" category="paragraph">在存储阵列级别提供有关在使用阵列LUN的ONTAP系统的部署中配置后端设备的信息。此命令显示存储阵列如何连接到集群。如果ONTAP检测到一个问题、导致使用阵列LUN的ONTAP系统和存储阵列无法一起正常运行、则会指示您运行以获取有关此错误的详细信息。<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="fa7a32587af1467e5fc89736935711fb" category="paragraph">此命令还可用于验证是否已按预期设置配置。例如、您可以查看输出以确认已创建所需的阵列LUN组数量。</block>
  <block id="6d5fdc4d63e5218c7ca2c0a0416817c2" category="paragraph"><block ref="de435a76b3e591bd7f040f87f88fe217" prefix="" category="inline-code"></block></block>
  <block id="6058464099941ade595076bc32a97569" category="paragraph">显示有关集群可见的所有存储阵列或您指定的存储阵列的信息。如果提供的阵列LUN数量超过系统容量、则错误文本字段将显示ONTAP无法发现的LUN数量。在内存不足的系统上、尤其应注意此问题。</block>
  <block id="962eef15326ad855a5a0625edce49105" category="paragraph"><block ref="287f29cba279612dd4284ff8e8536bd2" prefix="" category="inline-code"></block></block>
  <block id="5f9e1f87025f698628b33bd5d5cc76bb" category="paragraph">临时暂停特定路径上特定阵列LUN的I/O。重新引导或运行时，路径将再次处于活动状态<block ref="e9a2aeb600821c0310520590fefe5eb0" prefix=" " category="inline-code"></block>。某些存储阵列需要在一段时间内停止I/O才能删除或移动阵列LUN。</block>
  <block id="349ebc15db01dea0c47c6dad3b3c3e39" category="paragraph"><block ref="287f29cba279612dd4284ff8e8536bd2" prefix=" " category="inline-code"></block>命令不能用于IBM DS存储阵列。</block>
  <block id="37529505e72be3782b17b9d384a8096a" category="paragraph"><block ref="e9a2aeb600821c0310520590fefe5eb0" prefix="" category="inline-code"></block></block>
  <block id="6dbd95234796f3e2187ea23fcff0d2d6" category="paragraph">允许I/O重新开始流动；这与静噪相反。此<block ref="e9a2aeb600821c0310520590fefe5eb0" prefix=" " category="inline-code"></block> 命令主要用于硬件维护(例如、拉线或GBIC)、或者在阵列LUN的路径意外停止后使用。在静音路径后、并不总是需要运行此命令。例如、ONTAP可以发现新映射的阵列LUN。</block>
  <block id="0457fdb9406a149c8d9ed9b199fc31f3" category="paragraph"><block ref="d90ba20b63acab53952d68665c50ec47" prefix="" category="inline-code"></block></block>
  <block id="2ae398e0feda492571aaf4834d7f65a3" category="paragraph">显示有关集群可见的存储阵列的信息、例如名称、供应商、型号、 和故障转移类型。</block>
  <block id="aef2d68ce514382ca5e133b7ec208ecf" category="paragraph"><block ref="242f4ce1948273386f8bb487bdd3732f" prefix="" category="inline-code"></block></block>
  <block id="43a56904cf125aa547f02296199d11cb" category="paragraph">如果不输入<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block> 参数、则会显示所有磁盘和阵列LUN的以下信息：名称、可用大小、容器类型、位置、聚合、 和所有者。输入<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block> 并将磁盘名称或阵列LUN名称作为参数可显示有关单个磁盘或阵列LUN的详细信息、例如、阵列LUN的状态(已分配或未分配)、所有者和路径。输出分为三个部分：有关阵列LUN的信息、有关阵列LUN的路径的信息以及与阵列LUN相关的任何错误。</block>
  <block id="7579e6e8e891fe424124a1b5bd956e78" category="paragraph"><block ref="561b286e376eb6dc19cf504b1bd46d0a" prefix="" category="inline-code"></block></block>
  <block id="90a28327dbea650666e593d89b61a791" category="paragraph">输入并输入<block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block><block ref="79fbfda8b7386fc7acd19e719fbde2c6" prefix=" " category="inline-code"></block> 参数可提供磁盘和阵列LUN级别的配置错误详细信息。尽管命令输出与命令输出类似<block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block> 、但提供了一些附加选项、<block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 用于按参数(例如节点、集群和托架位置)筛选输出。</block>
  <block id="c748c086399e23f8955ada480c83cfbd" category="paragraph"><block ref="78daa9bac8cf0c6fd85c934dee156359" prefix="" category="inline-code"></block></block>
  <block id="3924980d727db384fe0582de22d7fa62" category="paragraph">提供有关磁盘和阵列LUN级别的后端配置错误的详细信息。输入<block ref="0aee518ce1a2203e4e40fdc46f3fcea1" prefix=" " category="inline-code"></block> show并将阵列LUN名称作为参数可显示与指定阵列LUN相关的配置错误的详细信息。您必须先修复这些错误、然后才能将ONTAP配置为使用存储阵列。</block>
  <block id="b987e4f9e0778908beb83e23ee3871cd" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix="" category="inline-code"></block></block>
  <block id="17e5413c39fa512c66fd0d785ce16f2a" category="paragraph">在阵列LUN级别提供有关阻止ONTAP系统和存储阵列一起运行的后端配置错误的详细信息。在将ONTAP配置为使用存储阵列之前、您必须修复识别的错误<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 。</block>
  <block id="32e7da7753dc2e1caa157a76367e09fe" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>命令不提供有关磁盘配置错误的信息。要查看有关磁盘和阵列LUN配置错误的信息、您可以使用<block ref="098a533340b7b8ccf2735271ea020139" prefix=" " category="inline-code"></block> 命令或<block ref="78daa9bac8cf0c6fd85c934dee156359" prefix=" " category="inline-code"></block> 命令。</block>
  <block id="8e4aa4c1fb114d81ef43ee2e42c5096d" category="summary">同一存储阵列目标端口上的每个阵列LUN都必须具有唯一的LUN ID。storage errors. show输出用于标识在同一目标端口上显示相同LUN ID的LUN。</block>
  <block id="179ab77fe07f4f0a8d9dbbc42a896884" category="doc">目标端口上的LUN ID重复</block>
  <block id="9f36d8775187712cd067cb7ed54f2963" category="paragraph">同一存储阵列目标端口上的每个阵列LUN都必须具有唯一的LUN ID。输出将<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 标识在同一目标端口上具有相同LUN ID的LUN。</block>
  <block id="c8cdeb57f369a52fc3ce9e05ae1ab044" category="paragraph">目标端口上LUN ID重复的常见原因是分区错误。管理员会将ONTAP系统的FC启动程序放入不同的主机组、以便在存储阵列上创建多个LUN组、但随后会发生分区错误、使不同主机组中的启动程序能够访问同一目标端口。</block>
  <block id="2ad80db6463b62cdb12a09c4100df305" category="paragraph">发生此类分区错误时、输出将<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 显示两个LUN组具有相同的目标端口。</block>
  <block id="eb350b8df2422581b6dc9f18c7979816" category="section-title">问题场景</block>
  <block id="0ca7a096820c08a924f03bf820955bb3" category="paragraph">管理员希望映射四个LEVs (a、b、c和d)以供ONTAP使用、两个LUN组中的每个组有两个LEVs。在这种情况下、假设存储阵列向启动程序端口提供LEVs、而不考虑启动程序用来访问存储阵列的目标端口；也就是说、主机组是特定于某个目标端口的_not _。必须使用分区来创建LUN组、方法是控制每个启动程序要访问的目标端口。</block>
  <block id="3f2082b4e54a2012253d1c50865f9636" category="paragraph">对于某些存储阵列(如HP EVA)、所有目标端口的主机组都相同。对于其他存储阵列(如Hitachi)、主机组特定于目标端口。</block>
  <block id="086593c9eca93a9b605ea857981a372d" category="paragraph">管理员正确设置了两个主机组、如下所示、这样就有两个LUN组：</block>
  <block id="ff12299f300cd26e63c1a821713da997" category="cell">主机组</block>
  <block id="9f0d9ebb58895ef69f669f5c28a2689d" category="cell">主机组中的FC启动程序</block>
  <block id="1f897f088dad9b3de1cb1d6d89e130a7" category="cell">LDEVs和关联的LUN ID</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1</block>
  <block id="c28fea466df67765e3e96d17af0fd91b" category="paragraph">0a0c</block>
  <block id="4d2e124f1b49eb60a7cd6a5dd9ac622b" category="paragraph">Ldev a/LUN 1Ldev b/LUN 2.</block>
  <block id="b8e0ba0ce5d035b1987a67dc22ba54c8" category="paragraph">0b 0d.</block>
  <block id="b1ae37646d6a90f4999483131ec6491e" category="paragraph">Ldev c/LUN 1Ldev d/LUN 2</block>
  <block id="4af7f256dac51fd61b45bca97931419a" category="paragraph">分区应设置如下：</block>
  <block id="ec0d9ef5c8fdd72aa9d4ac5df2b9a51d" category="list-text">主机组1、0a和0c中的启动程序应分区到目标端口对1A和2A。</block>
  <block id="e8079ab1c55d6219885a39b6cdeac39a" category="list-text">主机组2、0b和0d中的启动程序应分区到目标端口对1B和2B。</block>
  <block id="8b379355dc8e6e9667bfbd949807bd47" category="paragraph">请注意、在上表中、Ldev a和Ldev c都具有相同的LUN ID (L1)。同样、Ldev b和Ldev d都具有相同的LUN ID (L2)。如果分区设置正确、则复制LUN ID不会有问题、因为支持在不同的目标端口上重复使用LUN ID。</block>
  <block id="db0788511ffbb438d82c79b868a1cf2f" category="paragraph">此情形中的问题是、在配置分区时、某些启动程序放置在错误的分区中、如下表所示：</block>
  <block id="47f8770b3d8aeb7f22efae5a967ac4bf" category="paragraph">交换机vnbr200es25</block>
  <block id="46fa8c3d7b3cc14a2d3d89f1631c76bb" category="paragraph">端口0b</block>
  <block id="260a0bf152107a86da1cf2fffa427942" category="paragraph">端口1A (而不是1B)</block>
  <block id="26f61d23aba4131eebca03b4936ec446" category="paragraph">交换机vnci919vs53</block>
  <block id="01552889b97ff6021c975d7c45939e21" category="paragraph">端口0d</block>
  <block id="b15f76e53878913d21e67e123ff55a1f" category="paragraph">端口2A (而不是2B)</block>
  <block id="3cdf33728a36147fd17cdb09f99a87c1" category="paragraph">下图显示了分区错误的结果：</block>
  <block id="cc7c651fd6c511b7d513ef1cced0ca1d" category="paragraph">如图所示、系统会创建两个LUN组。但是、由于分区错误、LUN组0和LUN组1位于同一个目标端口对(1A和2A)上、而不是每个目标端口对上有一个LUN组。</block>
  <block id="c583bb98b9dfb18ed4c05edbac73d800" category="paragraph">以下<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 示例输出显示了两个LUN组。问题在于这两个LUN组具有相同的目标端口。</block>
  <block id="40fd9bbec75eefd51c523f0a2f3a0ab9" category="paragraph">此示例的以下<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出确定了存在问题的LUN：</block>
  <block id="0618e19ca5c359ee74225dfc859abf3b" category="paragraph">在此示例中<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 、您可以看到显示了所有四个LEVs的UID、但只有两个唯一的LUN ID：LUN 1和LUN 2。 而不是四个。</block>
  <block id="564d247a7b93ff0517c0bf741a6cee87" category="paragraph">存储阵列管理员必须修复分区、以使不同主机组中的启动程序无法访问同一目标端口。</block>
  <block id="385281308f899bae9903bd9bee747ff6" category="list-text">在输出中<block ref="3b15a40b2aa035a12fa64ab3bb4bbcdb" prefix=" " category="inline-code"></block> 、查找正在与同一目标端口通信的启动程序。</block>
  <block id="1f0d3b7f2f3f9c895a3da6040bbfbbe8" category="list-text">输入以下命令以查看此错误的详细信息：<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="ce8a7696f6569fbc0829e2858f8289a8" category="list-text">确定LUN ID重复的LDEV。</block>
  <block id="26e3af73ef202df9c1d7f47ff5c7b04c" category="list-text">对于控制器1上具有来自同一ONTAP系统的多个启动程序的每个目标端口、更改分区、使两个FC启动程序与同一目标端口进行通信。</block>
  <block id="04eb5ad8f940522a032da7223b56ba89" category="paragraph">之所以执行此步骤、是因为不同主机组中的启动程序不应位于同一个分区中。您需要一次对一个启动程序执行此步骤、以便始终有指向阵列LUN的路径。</block>
  <block id="81452ffee17324f746f0c04544599fa7" category="list-text">对控制器2重复此过程。</block>
  <block id="d23697f0b730538508eaf4c6ccdd9dd1" category="list-text">在ONTAP中输入<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 并确认错误已修复。``</block>
  <block id="b00c6abd48470a5fb35996618e369d29" category="summary">在规划ONTAP使用阵列LUN时、必须考虑阵列LUN大小、ONTAP开销和校验和类型等因素、这些因素会影响ONTAP环境中所需的阵列LUN数量。</block>
  <block id="7449932cb1c58aaa3eca5f5fa8e11005" category="doc">影响所需阵列LUN数量的因素</block>
  <block id="8b22cd04e447090bc07ce1150af6785f" category="paragraph">在确定所需的阵列LUN数量时、应考虑以下事项：</block>
  <block id="6e379c24d6e4e76bb8ea4e72bc77028b" category="list-text">阵列LUN越小、存储所需的LUN就越多。</block>
  <block id="ccf4c36a4356bde8eb20a03d88d332f4" category="paragraph">理想情况下、建议从给定存储阵列RAID组创建一个大型阵列LUN。</block>
  <block id="180c50aeb6c1e4a08d66e4e381cd1ae2" category="list-text">设备限制用于定义可分配给ONTAP系统的最大磁盘和阵列LUN数量。</block>
  <block id="178de93478fc8fb991b1c6ea33897f27" category="paragraph">Hardware Universe包含有关设备限制的信息。</block>
  <block id="a678c5b7fb6913121737c83515d67a4f" category="list-text">阵列LUN中的可用空间越多、所需的阵列LUN就越少。</block>
  <block id="f518ec89ebef9eff93d46c642914f8bc" category="paragraph">阵列LUN中的可用空间量由ONTAP所需的空间、校验和类型以及其他因素(例如可选Snapshot预留所需的空间)决定。</block>
  <block id="ef68c9ce69a21f93e64f48026015d0e2" category="list-text">不同的应用程序产生不同的负载。</block>
  <block id="9308a83bcb23f79ed76f8b627b46c73e" category="paragraph">在确定将阵列LUN分配给ONTAP系统时、必须考虑存储的用途以及不同应用程序可能生成的请求数量。</block>
  <block id="e78f09f439c8aa28d958a2e9f659f0dd" category="summary">您必须通过FC启动程序端口将V系列系统连接到本机磁盘架。连接所需的启动程序端口数取决于V系列系统是独立系统还是HA对。</block>
  <block id="49c84b94b5a87576f17554c857f4f2ff" category="doc">连接到本机磁盘所需的FC启动程序端口</block>
  <block id="6c917d52aff7e3b0f11b6938cbe8dfe9" category="paragraph">下表列出了将V系列系统连接到本机磁盘架所需的FC启动程序端口数、具体取决于系统配置：</block>
  <block id="5c67466df5d19b056c4c84d0e6cfecca" category="list-text">如果您使用的是一个环路、则使用一个FC启动程序端口</block>
  <block id="dcad51377dcc90e2651b21495666c024" category="list-text">如果要连接两个环路、则需要两个FC启动程序端口：每个环路一个</block>
  <block id="556696d309aaf81ce29c6a76f8f8a503" category="paragraph">HA对</block>
  <block id="a54c3abebe5399c2ced56046f3fa3ed9" category="list-text">如果您使用的是多路径存储、则每个环路需要两个FC启动程序端口</block>
  <block id="99c53030fa81d748931817773a223b5b" category="list-text">如果不使用多路径存储、则配置中每个环路的每个控制器都有一个FC启动程序端口</block>
  <block id="e6f3380e84750a722d935bbb92fd4210" category="summary">一个阵列LUN的路径数少于两个的常见原因是映射错误、分区错误或缆线掉线。storage errors. show输出用于标识只有一个路径的阵列LUN。</block>
  <block id="d93edbdb3f172d590ff190235f5ff2fb" category="doc">一个阵列LUN的路径少于两个</block>
  <block id="b5fd4d34a9abbce96ff2ff10e597e148" category="paragraph">一个阵列LUN的路径数少于两个的常见原因是映射错误、分区错误或缆线掉线。<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>输出将标识只有一个路径的阵列LUN。</block>
  <block id="6775e19b404437a41a329b0adeb72bda" category="paragraph">ONTAP需要使用冗余路径连接到阵列LUN、以便在设备发生故障时仍可访问此LUN。每个阵列LUN必须具有两个路径。</block>
  <block id="5523b6970b2d94220c269bde83a4f4b6" category="paragraph">您发现一个阵列LUN的路径少于两个的原因如下：</block>
  <block id="3d0e53da3e0588f45f6f87fdfcddc985" category="list-text">LEV仅映射到一个存储阵列端口。</block>
  <block id="c1cbdb9b01988ee6386828bf1c301041" category="list-text">阵列LUN的第二条路径未进行分区。</block>
  <block id="34c2dba4936bd70413844b626e2f776c" category="list-text">主机组映射出现问题。</block>
  <block id="c541f9c776aa6d96dca3bc583463d14b" category="list-text">交换机连接出现问题。</block>
  <block id="a6cf855c84fd1088fc67484154549515" category="list-text">电缆掉线。</block>
  <block id="fd95667081b3a33fca244b585854686c" category="list-text">SFP在适配器上出现故障。</block>
  <block id="9a94604a96d5c905c9c6805c80728503" category="paragraph">如果某个路径在正在运行的系统上掉线、则会生成EMS消息。</block>
  <block id="0c6dc9960cad7cb0da0acaacbae7cede" category="paragraph">在此映射错误示例中、假设存储管理员创建了一个新的LDE V Z。管理员将LDE Z作为LUN ID 3映射到目标端口1A。但是、管理员未将LEV映射到目标端口2A、如下图所示。结果是、只有一条路径指向阵列LUN。</block>
  <block id="01a279115db1446ca2d571f41052b357" category="paragraph">发生此错误时、<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出仅显示LUN的一个路径、如以下示例所示。</block>
  <block id="bc2ba4888f6efed3ea518be41a186ff8" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>命令提供了确定路径少于两个的LUN所需的详细信息。</block>
  <block id="21b1b9af6bbfe59ec9931a7687bbef02" category="paragraph">此示例的UID为600508B4：000B6314：00008000：00200000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000：00000000。由于空间原因、此名称将被截断。</block>
  <block id="16dcd04fe5b63682d737b6485d99e401" category="paragraph">如果要对一个阵列LUN的路径数少于两个的情况进行故障排除、则查看<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出和storage errors show输出会很有帮助。</block>
  <block id="827a249667b7232d5ca1853b53a5828a" category="list-text">查看<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出以获取仅在一个路径上可用的阵列LUN的序列号。</block>
  <block id="aa57184c41dd93b47be84f1ac902062b" category="list-text">查看<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以尝试找出问题的原因。</block>
  <block id="03115142ee4c1cc1d3f074230c3a0542" category="cell"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block>输出显示的内容</block>
  <block id="8ffe2475f305e7e174331ac3e74d9c48" category="cell">原因很可能是...</block>
  <block id="7f13c8c402dfb365ab628d54fd7cc5b4" category="paragraph">其他阵列LUN</block>
  <block id="6707c4474d1710dbfd400ae3fb58b7d5" category="paragraph">映射错误</block>
  <block id="6cab193cd2b9a88288e5cd5485ac5bb6" category="paragraph">无其他阵列LUN</block>
  <block id="b5711cd8cffd8518e487b2014b106923" category="paragraph">布线错误、分区错误或硬件问题</block>
  <block id="2868484de78fd0ad33bc220f6c0b3074" category="list-text">如果原因是映射错误、请让存储阵列管理员将识别的阵列LUN映射到两个冗余存储阵列端口。</block>
  <block id="9d68fdc950891be1bbae7887be08fb94" category="list-text">如果原因似乎不是映射问题、请检查分区、主机组映射、布线和连接。</block>
  <block id="4c59761ee850ad5857ca645ce72a42ba" category="list-text">修复问题后、请再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认错误已修复。</block>
  <block id="0553456b86ece3c7650979fe59c7ddc9" category="summary">逻辑设备(LDEV)必须映射到所有存储阵列端口上的相同LUN ID、并且此LUN ID必须对ONTAP系统可见。storage errors show输出用于确定LUN ID不匹配的LDEVs。</block>
  <block id="33d407e465936473509639d124ae6327" category="doc">同一LEV的LUN ID不匹配</block>
  <block id="bbedfd3e4ac9559fb3ab114de2610af0" category="paragraph">逻辑设备(LDEV)必须映射到所有存储阵列端口上的相同LUN ID、并且此LUN ID必须对ONTAP系统可见。输出将<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 标识LUN ID不匹配的LEV。</block>
  <block id="34ee2c16b689d3e1b6be1b0b5eeaaf7f" category="paragraph">如果LUN ID不匹配、则ONTAP不允许将阵列LUN分配给ONTAP系统。</block>
  <block id="f1c5459ab81838186fee4f63c3cec673" category="paragraph">在存储阵列配置期间发生以下错误之一：</block>
  <block id="9ece408c16a284deff6a4036d321d9c3" category="list-text">LEV会从多个目标端口提供给ONTAP系统的同一个FC启动程序端口、并且LUN ID不一致。</block>
  <block id="749d8c06941f30b772c6db9f12a8061e" category="list-text">此时将交换两个LEVS的LUN ID。</block>
  <block id="7fa3381b4b385a7dead9b6dc09cffb80" category="paragraph">在这种情况下、系统会为每个阵列LUN报告一个错误。</block>
  <block id="16f4eec48c15da96e1b4e2501212249b" category="list-text">将LEV映射到向ONTAP系统提供LEV的存储阵列端口时、会使用同一LEV的不同LUN ID。</block>
  <block id="f9f77f4260de307526fb60efb585535c" category="paragraph">此错误更可能发生在单独配置每个端口的存储阵列上、例如、在Hitachi存储阵列上。在某些存储阵列(例如IBM存储阵列)上、端口未单独配置。</block>
  <block id="677974d52e4166f31b09bf227f4dbef7" category="list-text">映射LUN的端口上的卷集寻址设置不一致。</block>
  <block id="ff7ab6a23ba6682296836896e6f174ee" category="paragraph">在EMC Symmetrix存储阵列上、问题可能是通道控制器端口上的卷集寻址设置有所不同。</block>
  <block id="8ba744dfa161fd7373fe0386cd5e8d65" category="paragraph">此方案讨论了LUN ID不一致的情况、因为它适用于大多数存储阵列。请参见卷集寻址不一致一节、了解在卷集寻址配置不当的背景下有关此相同错误消息的讨论。</block>
  <block id="0d7b961a74bdc8a282d3f22158b1ec3d" category="inline-xref-macro">卷集寻址不一致</block>
  <block id="2fd0d35b6efff6477cc75fcebb413d30" category="paragraph"><block ref="2fd0d35b6efff6477cc75fcebb413d30" category="inline-xref-macro-rx"></block></block>
  <block id="295df755b0fe123b6ac976f597ba1f52" category="paragraph">假设存储阵列管理员创建了一个新的LEV Z。LEV Z的LUN ID应为LUN 3。但是、管理员在存储阵列控制器端口1A上将LEV Z显示为LUN 3、在存储阵列控制器端口2A上显示为LUN 4、如下图所示：</block>
  <block id="c464f416c84999d283d3c6771963b790" category="paragraph">要解决此问题、必须在LEV所映射到的所有端口上为LEV分配相同的LUN ID。在此示例中、LEV应在两个端口上显示为LUN ID 3。</block>
  <block id="cd7410364aa4f07236f45002019c0ea5" category="paragraph">要解决此问题、存储阵列管理员必须使用正确的LUN ID重新映射此LUN。您可以使用ONTAP命令获取向存储管理员提供有关问题的信息所需的详细信息。</block>
  <block id="0fbcc0a6ff27894758d062a295736046" category="list-text">查看<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 输出以确定LUN ID不匹配的阵列LUN。</block>
  <block id="5f96b93e941d396410a60999d3131cc4" category="paragraph">如果同一LEV的LUN ID不匹配、则输出将确定存在问题的LEV的序列号。例如：</block>
  <block id="cc37446ab0672377d4912f11dd540b71" category="paragraph">此示例中的UID为48495441：43484920：44363030：30353234：30303132：00000000：00000000：00000000：00000000：00000000：00000000：00000000。在本示例中、由于空间原因、此名称会被截断。</block>
  <block id="5bfd6f0bc9e06daaa515f20512f801e0" category="list-text">输入以下命令、以获取有关同一LDEV正在使用哪些LUN ID的详细信息：<block ref="0f14d78217f2cb146cef563ce5b148d5" prefix=" " category="inline-code"></block></block>
  <block id="774c04781818fa80c8c0d1b41474e974" category="paragraph"><block ref="242f4ce1948273386f8bb487bdd3732f" prefix=" " category="inline-code"></block>此示例的输出如下所示：</block>
  <block id="e0a103b9887a5f0bcf037da862d94d8d" category="paragraph">通过查看storage disk show输出的paths部分中的LUN ID、您可以看到此LDEV同时使用了LUN ID 3和4。</block>
  <block id="3e37247cf8cd3f92a548c7c9bb7cab66" category="list-text">确定LDEV的LUN ID不正确。</block>
  <block id="be5c9e5d35a0aff5c4baf23dc5157d2f" category="paragraph">在此示例中、LUN ID 4是不正确的LUN ID。</block>
  <block id="16be77a02a7ae5f5d637f2ffe2c63f3d" category="list-text">在ONTAP中、使用<block ref="287f29cba279612dd4284ff8e8536bd2" prefix=" " category="inline-code"></block> 命令将不正确的阵列LUN路径置于静状态。</block>
  <block id="1bc0e7f7028ed8ecd643b0fd2c8cb74e" category="paragraph">以下示例显示了要添加到命令中的选项、这些选项用于启动程序0c上要<block ref="287f29cba279612dd4284ff8e8536bd2" prefix=" " category="inline-code"></block> 静置的路径--LUN ID 4。</block>
  <block id="b4780c3bc5c5121606de992a989a5506" category="paragraph"><block ref="287f29cba279612dd4284ff8e8536bd2" prefix=" " category="inline-code"></block>命令会暂时暂停对特定路径上的特定阵列LUN的I/O。在删除或移动阵列LUN时、某些存储阵列需要在一段时间内停止I/O。</block>
  <block id="280b5d8b97cb13187ce0feec6f7f25b4" category="paragraph">路径处于静状态后、ONTAP将无法再看到该LUN。</block>
  <block id="2e751f5932ad216f871ceeebbf5bd793" category="list-text">等待一分钟、让存储阵列的活动计时器过期。</block>
  <block id="f053626e235104368bb2a71afcbfb1d1" category="paragraph">虽然并非所有存储阵列都需要在一段时间内停止I/O、但最好这样做。</block>
  <block id="2524afff11ad98e5e51008d7217a65cc" category="list-text">在存储阵列上、在此方案中使用正确的LUN ID (LUN ID 3)将LUN重新映射到目标端口。</block>
  <block id="fdf8264433b9e7fe9e873330390b4f06" category="paragraph">下次运行ONTAP发现过程时、它将发现新的阵列LUN。发现每分钟运行一次。</block>
  <block id="a221f9f5fa5f845d592cec17ac07665a" category="list-text">ONTAP发现完成后、在ONTAP中再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认不再出现错误。</block>
  <block id="84744221c3a3c6622cf0b33655a2940d" category="summary">验证后端配置时、您需要检查storage array config show输出以确定输出中的阵列LUN组数量是否符合您的预期。</block>
  <block id="2c130673b4ece2e4aea4f89467775b38" category="doc">阵列LUN组数少于预期的原因</block>
  <block id="3c11ddaa779ea5de6be97be96ce9dbc1" category="paragraph">验证后端配置时、您需要检查<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以确定输出中的阵列LUN组数量是否符合您的预期。</block>
  <block id="02f14ee303879d34a74a6288d1fff8c8" category="paragraph">LUN组数少于预期的最可能原因是ONTAP系统上两个FC启动程序端口对的LDEV到LUN映射相同。如果两个FC启动程序端口对的LDEV到LUN映射相同、则<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出显示的LUN组比预期少一个。</block>
  <block id="1d48b73bbc2083eb9bbbe0032400be77" category="paragraph">由于两个FC启动程序端口对都映射到同一个目标端口对、以下<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出仅显示一个阵列LUN组：</block>
  <block id="9f46787623d13c15a1bcd0ea77cd7b8b" category="paragraph">通过查看阵列目标端口列、您可以在LUN组中多次看到相同的目标端口、并且每次出现都有不同的启动程序。</block>
  <block id="b99adc2f5a0ae6f5fcdb82a9345dc195" category="list-text">启动程序0a和0b均可访问存储阵列端口1A。</block>
  <block id="4189803a33cd4ccf84fa5c667b7f6e4b" category="list-text">启动程序0c和0d均可访问存储阵列端口2A。</block>
  <block id="b71ce893b0eaddf9318b0583f5b2744c" category="section-title">解决问题</block>
  <block id="70d610847b51617006996510051fc72d" category="paragraph">ONTAP不会将此问题标记为错误、因为当两个FC启动程序端口对的LDEV到LUN映射相同时、ONTAP系统可以运行。但是、不支持将多个FC启动程序连接到同一个目标端口。您应修复此映射、以便ONTAP系统采用受支持的配置、并获得所需数量的LUN组。</block>
  <block id="fbf72d506702b0f0452b5538910f551a" category="paragraph">如果要修复此问题、请执行以下操作：</block>
  <block id="dffc5f8206ade6cfc4b79031a16ba8b9" category="list-text">在存储阵列上、修复映射、使ONTAP系统上两个FC启动程序端口对的FC启动程序端口对映射不再相同。</block>
  <block id="40449ddd9f6793b140edc1e72c3afe91" category="list-text">在ONTAP系统上、重新运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 并确认显示了预期的LUN组数量、并且FC启动程序端口对未访问相同的目标端口。</block>
  <block id="f8365ad45b723e5ef1946ac9400a2a89" category="summary">在验证配置时、您应检查storage array config show输出以确保LUN组数量符合您的预期。使用额外阵列LUN组的最常见原因是LDEV正在跨越目标端口对。</block>
  <block id="e687fe680f2b1067715672dcfe920f8e" category="doc">阵列LUN组比预期多的原因</block>
  <block id="181980c741389b061af837fe91cfd8ea" category="paragraph">在验证配置时、您应检查<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以确保LUN组数量符合您的预期。使用额外阵列LUN组的最常见原因是LDEV正在跨越目标端口对。</block>
  <block id="6e2b36742916fbff8b499378fa9e98c8" category="paragraph">您看到的LUN组比预期多的常见原因如下：</block>
  <block id="ee64d952239fd7e4b7f331f8be2b2870" category="list-text">LDEV未映射到冗余目标端口对。</block>
  <block id="ffcc9901f840dc7b4d5b2937000bd863" category="paragraph">导致LUN组额外增加的最常见原因是LDEV正在生成路径对。如果LDEV的匹配LUN ID未提供给存储阵列上的冗余目标端口对、则LDEV称为_spanning path p对_。</block>
  <block id="8b25bff9b0f3e8303594dcb796abf99c" category="paragraph">在许多存储阵列上、如果按照传统过程创建和映射LDEV、则无法向非冗余目标端口提供LDEV。</block>
  <block id="fba91c445eda9664d255d9673f291a2e" category="list-text">在将阵列LUN从一个LUN组迁移到另一个LUN组期间、ONTAP正在尝试平衡目标端口上的负载。</block>
  <block id="c1a94389ec85c1f64e0840bf9767f8c7" category="paragraph">在这种情况下、LDEV生成路径对处于过渡状态。</block>
  <block id="f7c62c16dad1abfa2113160c185b4e2b" category="list-text">设置的连接过多。</block>
  <block id="e9e9082bd536910e2a47b1cd9135cd5e" category="paragraph">ONTAP可以与单个阵列LUN组或多个阵列LUN组一起运行。因此、ONTAP不会将任意数量的LUN组视为配置错误。但是、并非所有ONTAP版本中的所有存储阵列都支持多个LUN组。在配置规划期间、您应检查互操作性表中的信息、以验证ONTAP配置中使用的存储阵列是否支持多个阵列LUN组。</block>
  <block id="8c04af6f15bd53f11f8db206461e1109" category="paragraph">假设存在两个现有LUN组：LUN组0和LUN组1。LUN组0具有两个阵列LUN、而LUN组1具有三个阵列LUN。管理员创建了一个新的LEV Z、希望将LUN 3添加到LUN组0。管理员在两个存储阵列端口上将LDE V Z映射为LUN 3。但是、LUN 3映射到的端口(存储阵列端口1A和2B)不是冗余目标端口对、如下图所示。</block>
  <block id="0715a80a9735912085a2beb28a0bf486" category="paragraph">此错误会导致创建第三个非预期LUN组(组2)、如以下示例所示：</block>
  <block id="6febc9d111ad123361d74d0847f5efa1" category="paragraph">您可以从组0和组1的"Array Target Ports"列中的信息中推定到阵列目标端口的路径是冗余的。组0连接到目标端口1A和2A、即目标端口对。组1变为1B和2B、这是一个不同的目标端口对。</block>
  <block id="06977e434320c81d807cf3d3037e4123" category="paragraph">但是、组2的"Array Target Ports"(阵列目标端口)列中的信息表明、这些路径并非冗余路径。一条路径连接到目标端口1A、另一条路径连接到目标端口2B。这不是冗余目标端口对；阵列LUN正在跨越LUN组。阵列LUN应已映射到1A和2A或1B和2B。</block>
  <block id="13a3fe36a4d0b188fddcf7e1a40b555a" category="paragraph">由于ONTAP系统可以使用LDEV生成路径对运行、因此在运行命令后不会显示指示您运行的消息<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 。但是、这不是最佳实践配置。</block>
  <block id="04719bdfeb68ff950d7b53063b1e187f" category="list-text">等待一分钟、然后再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以查看输出中是否仍显示额外的LUN组<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 。</block>
  <block id="20693fb6c81c433675ed5d9adddb2aff" category="list-text">如果输出中不再显示额外的LUN组、则可以断定此问题是过渡问题。</block>
  <block id="b126febedf4177edb3acf92f0c380d1f" category="list-text">如果输出中仍显示额外的LUN组、则存储阵列管理员必须按照后续步骤中的说明重新映射LEV。</block>
  <block id="8dfd6517549df2b413acd82882099cc5" category="paragraph">在解决此问题时、您需要保持冗余。此过程指示您将LEV映射到正确的目标端口_Before _删除与错误目标端口的映射。在这种情况下、系统会保持冗余、因为您会临时将路径数增加到三个、而不是在解决问题时将路径数减少到一个。</block>
  <block id="bfaa7ceb75da1ebe0f85326266e5f18a" category="list-text">确定应重新映射哪些不一致的目标端口。</block>
  <block id="09202bbe36a3287744916b3e8cff34b3" category="list-text">在存储阵列上、将LEV映射到新(正确)目标端口。</block>
  <block id="d6660aa71fe48b4baa0f1602048d9ad2" category="list-text">在ONTAP中、运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认显示了三个路径。</block>
  <block id="c80daf0a605118443d7bd9eb06153087" category="list-text">删除不正确的映射。</block>
  <block id="b8ccfab714ed765ed8ce4f03c187c86a" category="list-text">等待一分钟、以便ONTAP发现LUN。</block>
  <block id="22e4e5d414a07fee49829ac5487409da" category="list-text">在ONTAP中、重新运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确保额外的LUN组已删除。</block>
  <block id="9c994b9440419cf5951d2b643c4d2d94" category="summary">导致阵列LUN出现意外的额外路径的主要原因是分区问题和缆线过多。一个阵列LUN的三个路径不是最佳实践、但您不需要修复此问题。</block>
  <block id="c2b4a27dbf0d881287db42f783f35560" category="doc">指向阵列LUN的路径比预期多的原因</block>
  <block id="0068d0b8748eacb2784e97af0f13c99b" category="section-title">storage array config show输出示例</block>
  <block id="c13687d1b578a7a50d81a49a5b43b653" category="paragraph">ONTAP系统上的FC启动程序端口对为0a和0c。以下示例在输出中显示了一个额外的路径0b<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> ：</block>
  <block id="3cd8593e41393abda208c3a42e8a2760" category="paragraph">如果输出中的启动程序<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 前面没有阵列目标端口、则该启动程序将连接到与其上方启动程序相同的阵列目标端口。</block>
  <block id="f4b8c2879d04cba156db6dba5f9c2a8a" category="paragraph">一个LUN组中有三个路径表示存在一个额外的路径。对于ONTAP配置、最佳实践是使用两个或四个路径。</block>
  <block id="e194899e6ed1abc0b2de4fa40eb6dcdc" category="paragraph">路径数可能超过预期的原因包括：</block>
  <block id="e7cb0bf109a17972e0ad637c31b17ae3" category="list-text">连接的缆线数量超出所需数量。</block>
  <block id="351150d1efdccb4a982acfdc0c264ad4" category="list-text">分区配置错误导致了额外的路径。</block>
  <block id="fb69f07ef9bece3fc52fcec5c0b62bba" category="paragraph">使用额外的路径并不是最佳做法、但从系统角度来看、这并不是不正确的。您不必修复此问题。如果要根据您的预期配置修复此问题、请完成以下步骤：</block>
  <block id="cca39ceae5aa4502b7c003428c265cc4" category="list-text">检查布线和分区配置以确定原因、然后修复导致额外路径的问题。</block>
  <block id="72fbee752e857618bb76fca8178fcb4f" category="list-text">修复此问题后、请再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认额外的路径已删除。</block>
  <block id="6c98c3649309a74f9df408ea64960601" category="summary">验证后端配置时、您应检查storage array config show输出以确定LUN是否显示在LUN组中。如果storage array config show输出显示阵列LUN组中没有LUN、则ONTAP可以看到网络结构上的目标端口、但目标端口未向ONTAP提供阵列LUN。</block>
  <block id="68d72c417e7d2ac5219e718598455488" category="doc">阵列LUN组中没有LUN的原因</block>
  <block id="f67092376198614fbac1a6829535b501" category="paragraph">验证后端配置时、您应检查<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以确定LUN是否显示在LUN组中。如果<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出显示阵列LUN组中没有LUN、则ONTAP可以看到网络结构上的目标端口、但目标端口未向ONTAP提供阵列LUN。</block>
  <block id="37a601671d6897a4f6e74755f7efe7df" category="paragraph">目标端口可能无法向ONTAP (_open target port_)提供阵列LUN的原因有很多。不同存储阵列之间开放目标端口的原因可能不同。此外、处理开放目标端口问题的方法因存储阵列而异。对于所有存储阵列、对目标端口打开的原因进行故障排除时、应检查存储阵列配置、包括主机组配置。</block>
  <block id="24a0e23a88c219e2128389f9c139712f" category="paragraph">例如、原因可能是_空 主机组_、它将自己作为开放目标端口呈现给ONTAP。如果主机组为空、主机组将定义FC启动程序和目标端口、但不会列出任何阵列LUN (即、主机组为空)。</block>
  <block id="4d9d3cec50dd708ee17a0b792fe80fb4" category="paragraph">空主机组不会影响ONTAP系统的运行。</block>
  <block id="5823b4346b0d5f08c205aa85be59b903" category="paragraph">下图显示了一个开放端口目标端口情形和一个空主机组情形。(为了简单起见、图中使用了独立的ONTAP系统。)</block>
  <block id="0a02fadb72efd29b83ea1d5014e47ff5" category="paragraph">打开的目标端口是由于存储控制器1A的主机组定义中缺少LUN ID而导致的。在存储控制器1A的主机组定义中、FC启动程序0b已分区到目标端口、并且已为FC启动程序端口0b定义了一个主机组、但主机组中没有LUN ID。如图所示、存储控制器2A的主机组定义既包括启动程序、也包括LUN。</block>
  <block id="a66427e2366fd8dac06e8ad7833abc3c" category="paragraph">空主机组是由于存储控制器1B和2B的主机组定义中未列出阵列LUN而导致的。FC启动程序0a和0d已分区到目标端口、但未显示任何LUN。</block>
  <block id="4ed959fe74dd7eb4db2c30fe6a95b671" category="image-alt">主机组中缺少LEVs</block>
  <block id="11176ca96316cafb677eb7053dedfdcf" category="paragraph">以下示例显示了<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 所示情形的输出、其中ONTAP系统已分区到存储阵列、但存储控制器1A的主机组定义中没有LUN、从而导致目标端口打开。控制器1B和2B在各自的主机组定义中没有LUN、从而导致主机组为空。</block>
  <block id="9fa47bddf11b66dfd27f98e153ddada9" category="paragraph">在图示情形的输出中、FC启动程序0a、0b和0d的LUN计数字段中未显示任何LUN。对于FC启动程序0c、LUN组1中显示了两个LUN。</block>
  <block id="e1fede2c2364bca6668496f7c1453434" category="paragraph">通过输出、您可以确定问题不是由主机组中缺少FC启动程序引起的。如果主机组中缺少FC启动程序、则ONTAP将无法识别没有LUN的LUN组。</block>
  <block id="329fb4d714a63ce731b0166379ff7ee6" category="summary">在验证配置时、您应检查storage array config show输出、以确保每个LUN组中的LUN数量符合您的预期。LUN组中LUN数量不正确的最可能原因是阵列LUN未映射到ONTAP系统。</block>
  <block id="27748580027f90be2d039e0b2c3396c7" category="doc">阵列LUN组中LUN数量不正确的原因</block>
  <block id="6492136549077e7521448fae35dfab53" category="paragraph">在验证配置时、您应检查<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以确保每个LUN组中的LUN数量符合您的预期。LUN组中LUN数量不正确的最可能原因是阵列LUN未映射到ONTAP系统。</block>
  <block id="ff537d68df1dbc752a0630db575434fc" category="paragraph">输出中会显示每个LUN组中的阵列LUN数量<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 、如下例所示：</block>
  <block id="8456116db69aada7143113fea54fee38" category="paragraph">缺少您希望位于LUN组中的阵列LUN的最可能原因如下：</block>
  <block id="fb7035b1e6aa2044597bf85f7b919f25" category="list-text">阵列LUN未映射到ONTAP系统。</block>
  <block id="03f01649ac41ce556facfd6bd8b81ef2" category="list-text">发生映射错误、导致阵列LUN位于错误的LUN组中。</block>
  <block id="542f3a3b6d8d3f8793f519ebdb831e92" category="paragraph">例如、主机组配置可能不正确。</block>
  <block id="e2360b5a224507b62f6c03f4fc3a911b" category="list-text">存储阵列仍在初始化阵列LUN并使其可用(过渡状态)。</block>
  <block id="6d7f85f25078d5e018f432a7ead6c310" category="list-text">ONTAP LUN扫描程序尚未发现LUN (过渡状态)。</block>
  <block id="b599d771dd5185a03302962c71bd559d" category="list-text">如果阵列LUN尚未映射到ONTAP系统、则存储阵列管理员必须将其映射。</block>
  <block id="c88e1753e3a686db4b5021c433084ef7" category="paragraph">将阵列LUN映射到主机的过程因存储阵列而异。</block>
  <block id="59d1bbd18b8d22740161ee2fd3900a07" category="list-text">如果阵列LUN已映射到ONTAP系统、请检查分区和主机组配置。</block>
  <block id="5525dc6ecaf1d024478645cdbab00af3" category="list-text">修复问题后、再次运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认问题已修复。</block>
  <block id="adfdee10bb4352a6d350b57cc3dac0d2" category="summary">未连接到ONTAP系统的存储阵列不会显示在storage array config show输出中。布线、分区和主机组配置方面的问题可能会导致两个设备之间无法建立连接。</block>
  <block id="2af0e0aedd26b0aa0aa69e7d9e8338f1" category="doc">命令输出中缺少存储阵列的原因</block>
  <block id="d744fe1e319f2d5645dfb01de9d67338" category="paragraph">未连接到ONTAP系统的存储阵列不会显示在输出中<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 。布线、分区和主机组配置方面的问题可能会导致两个设备之间无法建立连接。</block>
  <block id="fc8e3935083cb9359c79510df7dba960" category="list-text">请按如下所示检查布线、主机组配置和分区：</block>
  <block id="58e5eed34483146da4bc0254da0c4ba7" category="list-text">检查电缆是否已连接。</block>
  <block id="73e098cf72a0ab58ccc90034f57a1a5c" category="list-text">检查ONTAP系统上FC启动程序的WWPN是否位于主机组中。</block>
  <block id="f1f4d1918f0d93861e917efa9f8c063a" category="list-text">检查存储阵列和FC启动程序是否位于同一分区中。</block>
  <block id="a48abb3fa57ac5006fd63c449d2de377" category="list-text">修复问题后、在ONTAP中运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以确认问题已修复。</block>
  <block id="a5b018e2ceda073d88fa4d501387435a" category="summary">修复分区配置错误时、有时还必须更改主机组配置、反之亦然。</block>
  <block id="a8745bab1c0b3b351c167cb9d31d5b6c" category="doc">分区和主机组配置之间的关系</block>
  <block id="10ed0341e0ff672f2ab3d9103708bd99" category="summary">您必须遵循使用存储阵列的ONTAP配置中的分区要求、以确保ONTAP系统可以访问一组正确的LUN。</block>
  <block id="3534d721a1b949c757c5a8ea018d06c8" category="doc">使用存储阵列的配置中的分区要求</block>
  <block id="09c9af091e1f6d299c20957105e8be91" category="list-text">互操作性表必须确定ONTAP配置支持的交换机和交换机固件。</block>
  <block id="244eb1be6f24c2f98795f912a94bb942" category="list-text">必须配置分区、以便将每个启动程序端口限制为每个存储阵列上的一个目标端口。</block>
  <block id="b4abf4c68f7727e6ab0a5908026b74f8" category="list-text">在交换机上、必须将ONTAP系统上的端口和存储阵列上的端口分配给同一分区。</block>
  <block id="ab238d97dd96c0eef9a9e2d6032a6f20" category="paragraph">这样、ONTAP系统便可访问存储阵列上的LUN。</block>
  <block id="c46d3e3b7b26641129670aa368fc080c" category="list-text">如果存储阵列端口在异构系统之间共享、则ONTAP系统中的阵列LUN不能公开给其他系统。</block>
  <block id="cf903985c0c192d103b05286d9490a7f" category="paragraph">必须使用LUN安全性或阵列LUN屏蔽来确保ONTAP存储的阵列LUN仅对ONTAP系统可见。</block>
  <block id="aa092b17744fcf1f147e2e86df781941" category="list-text">主机配置端口不能与目标端口包含在同一分区中。</block>
  <block id="8b18b06a496a76d537e8f88e1b8ba0ba" category="summary">不同的存储阵列供应商偶尔会使用不同的术语来描述类似的概念。相反、同一术语的含义可能因阵列供应商而异。</block>
  <block id="5bd1e0aa533b0619e839c17c06e0c280" category="doc">存储阵列供应商之间的术语比较</block>
  <block id="0e80b9a489139aa9246357472a869d4b" category="paragraph">下表提供了一些常见供应商术语之间的对应关系：</block>
  <block id="cf5f3091e30dee6597885d8c0e0c357f" category="cell">期限</block>
  <block id="ec9ceefe0c19f4c029008c23e3c947b7" category="cell">供应商</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="9805a9154b2c909ccf44e105987bd03b" category="paragraph">主机组</block>
  <block id="18b1118e8e8d44c5c663b2f329e30a55" category="paragraph">一种配置实体、可用于指定主机对存储阵列上端口的访问权限。确定要访问LUN的ONTAP系统的FC启动程序端口WWN；此过程因供应商而异、有时因同一供应商的不同存储阵列型号而异。</block>
  <block id="71e14e1f53e0c10dc815eae1e0682878" category="cell">存储组</block>
  <block id="6f32d5faa42447a54f31b9f0f3c1d70e" category="paragraph">EMC CX、EMC VNX</block>
  <block id="01779cf08b8b0b3a7fc0c6ef731f256d" category="cell">主机定义</block>
  <block id="a677b71188193c196dc3bbb91b2d692e" category="paragraph">3PAR</block>
  <block id="67b3dba8bc6778101892eb77249db32e" category="cell">host</block>
  <block id="41b125ad140f982158e3ae700d9ba30b" category="paragraph">3PAR、HP EVA、HP XP、Hitachi</block>
  <block id="3b855cbfb64777b823998e9539e0d167" category="cell">奇偶校验</block>
  <block id="5f8fd04f404faae9fe2c061c3edafff3" category="paragraph">Hitachi、HP XP</block>
  <block id="9797648fac8d6d99337873330a243d3c" category="paragraph">后端磁盘的排列方式、这些磁盘共同构成定义的RAID级别。</block>
  <block id="056da32aadb1d3eae702837c225c7763" category="paragraph">RAID组</block>
  <block id="74c2cd8b071b4c4d0c98782c917f46ce" category="paragraph">ONTAP、EMC CX、EMC VNX</block>
  <block id="0011a0bab3514d0f47cdc44c96aef082" category="cell">磁盘组</block>
  <block id="5ed23c2e15ca332600cfd7be5d97e87e" category="paragraph">HP EVA</block>
  <block id="5379cf2e2185140848e9217b52bdbd9b" category="paragraph">一组物理磁盘、用于形成存储池、您可以从中创建虚拟磁盘。</block>
  <block id="957f23275d6a50709a94858e47ed0ca2" category="paragraph">奇偶校验集、RAID集</block>
  <block id="e261285e0a5f1d39494552b511e92547" category="paragraph">一组受奇偶校验保护的_chUNCHlets_。(区块是物理磁盘上256 MB的连续空间块。)</block>
  <block id="06b2d4b91b5c9eaa8c20a1c270f95b3c" category="cell">集群</block>
  <block id="253b40ae359ba25b56231803430c4873" category="paragraph">ONTAP</block>
  <block id="9824a5cb4cc89026f138a2385826e09b" category="paragraph">在ONTAP中，一组节点，使多个节点能够将其资源汇集到一个大型虚拟服务器中并在集群中分布工作。</block>
  <block id="a52971c670054f6e6babd7a24997cf18" category="paragraph">存储阵列上的一个硬件组件、其中包含主机连接到的端口。</block>
  <block id="594c103f2c6e04c3d8ab059f031e0c1a" category="cell">控制器</block>
  <block id="29f0307a43ce39cf7871e87973b13a49" category="paragraph">存储系统中运行ONTAP操作系统并与后端存储阵列交互的组件。控制器有时也称为机头或CPU模块。</block>
  <block id="71577db56ef18dfcc8d570cbb1bd75ac" category="cell">Hitachi、HP EVA、HP XP</block>
  <block id="8989b14d1f1bc282a29f5a33cbfb3699" category="paragraph">目标端口所在存储阵列上的硬件。</block>
  <block id="36c4536996ca5615dcf9911f068786dc" category="paragraph">节点</block>
  <block id="05b14326cc28cb5bbd36c9f37bfaeed7" category="paragraph">3-PAR</block>
  <block id="ab170aa9c44c4b1fdc75ff83fec05f2e" category="paragraph">Fbe板</block>
  <block id="1fb5deb506e26d767f6489a10c85c1ee" category="paragraph">EMC Symmetrix</block>
  <block id="dd8f56ff3bcd6342571c8e7ac6a086e8" category="cell">存储处理器(SP)</block>
  <block id="2bb1b878ae4fd788fad2d1bcf5fa7bb3" category="paragraph">许多存储阵列</block>
  <block id="f47f935291a93d678a36597d3ccb4030" category="paragraph">一个或多个磁盘或磁盘分区分组为一个磁盘存储空间跨度。在ONTAP文档中、此名称称为_array LUN _。</block>
  <block id="d336762017e5f866189a2de341b671fa" category="paragraph">Ldev</block>
  <block id="18955e44212531b399c381639c013a63" category="paragraph">ONTAP系统可以对与其连接的存储进行虚拟化、并将存储作为LUN提供给外部应用程序和客户端(例如、通过iSCSI和FC)。客户端不知道前端LUN的存储位置。</block>
  <block id="0242d5e93741cfc630c65d4ac7d2d492" category="paragraph">LUN、虚拟磁盘</block>
  <block id="e5e35e15c690a543c0f6675970198b0b" category="paragraph">虚拟磁盘(在用户界面中称为_vdisk_)是在磁盘组中创建的模拟磁盘驱动器。您可以为虚拟磁盘分配多种特征、例如名称、冗余级别和大小。提供虚拟磁盘可将其存储提供给主机。</block>
  <block id="5181ed60a2afacfcd430e7cf306359d5" category="paragraph">阵列LUN</block>
  <block id="ca1f3b77ec5e592cc7963bad503f6141" category="paragraph">ONTAP文档、ONTAP存储管理工具</block>
  <block id="4629173ae2c149efccfdefca6f4984ab" category="paragraph">ONTAP文档使用术语_array LUN)将存储阵列上的LUN与前端LUN (ONTAP LUN)区分开来。</block>
  <block id="8a32ad3f125da79137bc0efa7824f3a2" category="paragraph">vLUN</block>
  <block id="9c34a1779e026e2e1fcaa9faa9dc28c8" category="paragraph">(volume-LUN)虚拟卷与逻辑单元号(Logical Unit Number、LUN)之间的配对关系。要使主机能够看到虚拟卷、必须通过在存储阵列上创建vLUN将该卷导出为LUN。</block>
  <block id="210ab9e731c9c36c2c38db15c28a8d1c" category="cell">volume</block>
  <block id="b566653ce1f28840f47473f85e7d98f1" category="paragraph">一种逻辑实体、用于存放可通过ONTAP支持的一个或多个访问协议(包括网络文件系统(NFS)、Common Internet File System (CIFS)、超文本传输协议(HTTP)、光纤通道(FC)和Internet SCSI (iSCSI)访问的用户数据。</block>
  <block id="9e34928a2dbf2480a68140dc8ed227dc" category="paragraph">虚拟卷</block>
  <block id="20de25a6b1bffde71aebebbdc8b53df2" category="paragraph">通过映射一个或多个逻辑磁盘中的数据创建的一种虚拟存储单元。</block>
  <block id="5647ed381f5cba82e2ced642f238148b" category="summary">当storage error show标记错误情况时、您需要确定发生错误的原因以及如何修复错误。</block>
  <block id="5b4c35f5c1bf643982e081bc26b063cf" category="doc">存储错误会显示相关消息及其解决方法</block>
  <block id="e60ab8ddcea7e96c231f819716305eae" category="paragraph">在标记错误条件时<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 、您需要确定发生错误的原因以及如何修复错误。</block>
  <block id="c289a752ef98acd9a97103f766b86d41" category="paragraph">下表列出了检测到的后端配置错误<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 、并提供了有关每个错误的原因及其解决方法的详细信息。</block>
  <block id="2e62979e0c32717f36f39ead961a4f7c" category="cell"><block ref="3544855ba5183863f1439ae70a230dfb" prefix="" category="inline-code"></block> 消息</block>
  <block id="f0452cdd08bec114c164134503afaf63" category="cell">有关此消息的详细信息、请参见...</block>
  <block id="b689482810ae61b4526105d7d41a9a7c" category="paragraph"><block ref="2f4787d00c3b3d29e50c825730975352" prefix="" category="inline-code"></block>(英文)</block>
  <block id="8a2476f82dd5ff0a053db8b5efd39537" category="paragraph"><block ref="8a2476f82dd5ff0a053db8b5efd39537" category="inline-xref-macro-rx"></block></block>
  <block id="0cce565bf60de881f19aae40a003020e" category="paragraph"><block ref="55ebb730e83fc101fce934ac3c807284" prefix="" category="inline-code"></block>(英文)</block>
  <block id="7a3454446c1f223d55223d44b5d16473" category="inline-xref-macro">目标端口上的LUN ID重复</block>
  <block id="f63f7fc7bf70faf895fdcc475640096a" category="paragraph"><block ref="f63f7fc7bf70faf895fdcc475640096a" category="inline-xref-macro-rx"></block></block>
  <block id="9c61b9c31d0bab505f57283a0e352e2d" category="paragraph"><block ref="28951b60899549d3186947f6f69f39e4" prefix="" category="inline-code"></block>(英文)</block>
  <block id="f8d6195a9591ffec1a806e7d552de57e" category="inline-xref-macro">已提供访问控制LUN</block>
  <block id="747e4272563b06176218d1dba390caf3" category="paragraph"><block ref="747e4272563b06176218d1dba390caf3" category="inline-xref-macro-rx"></block></block>
  <block id="cd7433e5e0fc2b7e5d35d1a63a617ab4" category="paragraph"><block ref="91b7772eb6343b07466c74377a9c65e5" prefix="" category="inline-code"></block>(英文)</block>
  <block id="b7c15f58e6ebe1d6ec94be001d1b2601" category="paragraph"><block ref="b7c15f58e6ebe1d6ec94be001d1b2601" category="inline-xref-macro-rx"></block></block>
  <block id="0fbf3c4c94b026186fec05a526d5d384" category="paragraph"><block ref="3e769ab094ce935fcc91ade0d192614e" prefix="" category="inline-code"></block>(英文)</block>
  <block id="39d10e72c3173c70ce24ddcc62783e96" category="paragraph"><block ref="39d10e72c3173c70ce24ddcc62783e96" category="inline-xref-macro-rx"></block></block>
  <block id="5a0e7de914757dd69bfaeb847e84d357" category="paragraph"><block ref="14de07ae8f341836aacec5b6853b0537" prefix="" category="inline-code"></block>(英文)</block>
  <block id="03f75097883eca9f20a55ea1f9a4a083" category="inline-xref-macro">阵列LUN太小或太大</block>
  <block id="531484a56adb6ff8be6db3200a2b4083" category="paragraph"><block ref="531484a56adb6ff8be6db3200a2b4083" category="inline-xref-macro-rx"></block></block>
  <block id="f84fe76b7c401aa7779be788ff35d95d" category="paragraph"><block ref="baf4532708f08cff4330e14ea9984b85" prefix="" category="inline-code"></block>(英文)</block>
  <block id="8785133216856affde3e57bc2dffeaae" category="paragraph"><block ref="b36a107fe7051f040c307f0c68e85178" prefix="" category="inline-code"></block>(英文)</block>
  <block id="746ad02fa2beec05508babf79fdad274" category="paragraph"><block ref="746ad02fa2beec05508babf79fdad274" category="inline-xref-macro-rx"></block></block>
  <block id="819f44e8af6ad063223eb7d937a1b546" category="paragraph"><block ref="0120c77ecdc9e578df16213cf57cda47" prefix="" category="inline-code"></block>(英文)</block>
  <block id="59fabdbd62600db09658851f14f31fcf" category="paragraph"><block ref="59fabdbd62600db09658851f14f31fcf" category="inline-xref-macro-rx"></block></block>
  <block id="a9620cf5ba9f06372b20e06b9cb57ecd" category="summary">ONTAP可以检测到存储阵列路径集之间的LUN ID不一致。对于设置了卷集寻址的存储阵列、LUN映射到的端口上的设置不匹配是导致LUN ID不匹配的一个问题。</block>
  <block id="c422c58e8b5ff6bcafb4d92e530a3968" category="paragraph">例如、在EMC Symmetrix存储阵列上、如果LUN映射到的通道控制器端口上的卷集寻址参数设置不一致、则会触发LUN不匹配错误。</block>
  <block id="b8af6a7521664cad3eff286fe6a771da" category="paragraph">有许多配置错误可能会导致出现错误消息。本说明介绍了当卷集寻址设置不一致时显示的消息。</block>
  <block id="f3dbf0e980db7e43f29f9eb47dc6a072" category="paragraph">ONTAP会明确检查LUN所映射到的端口上的卷集寻址参数设置是否不一致。如果设置不同、则ONTAP会在输出和EMS消息中报告LUN ID不匹配的情况<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 。</block>
  <block id="95b96a05f2f46b30490aa2c1e7f13039" category="paragraph">如果未按预期配置卷集寻址、则ONTAP不会向您发出警报；只有当LUN所映射到的通道控制器端口的配置不一致时、它才会向您发出警报。</block>
  <block id="fd15f4930573f5beb1da7d58bce17bfb" category="paragraph">如果<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 命令显示特定错误消息、并且您的存储阵列是EMC Symmetrix、则执行以下操作之一有助于确定问题是否由卷集寻址不一致引起：</block>
  <block id="f4e0f5f4c853f340143eee7c3feafcbe" category="list-text">在ONTAP中、对标识的阵列LUN运行<block ref="0d80a7b1c992fa48e28fc285057317a7" prefix=" " category="inline-code"></block> 。</block>
  <block id="f478e0f07fb53db3728a12eac092d018" category="paragraph">此命令将显示阵列LUN的所有路径以及分配给每个路径的LUN ID。</block>
  <block id="5e03633218ab631608f9c777072291da" category="list-text">在存储阵列上、检查已标识的LUN所映射到的通道控制器端口的卷集寻址设置。</block>
  <block id="435d591ecba0a963df0b7f54caecaf4f" category="paragraph">如果您确定这些设置不一致、请修复存储阵列上的配置问题、确保将两个通道控制器端口上的参数设置为ONTAP所需的设置。</block>
  <block id="0b1e575cf41de37d30e2d62d50bed454" category="summary">在根卷位于磁盘架上的ONTAP系统上、您必须先将阵列LUN的所有权分配给节点、然后才能将其添加到聚合中以用作存储。</block>
  <block id="6e511cfe87a95df884e3eeb9f86e7f6c" category="paragraph">* 您需要的内容 *</block>
  <block id="65938c3330bedaa6834bdda7ac520511" category="list-text">必须完成后端配置测试（测试 ONTAP 系统后端设备的连接和配置）。</block>
  <block id="309ab14cd8f12cb8629f1c861eca199b" category="list-text">要分配的阵列 LUN 必须提供给 ONTAP 系统。</block>
  <block id="88627428a34504bf05af531d65851c29" category="paragraph">您可以分配具有以下特征的阵列 LUN 的所有权：</block>
  <block id="d57ac8a739fe5a79b6d6e918dae44d1e" category="list-text">它们是无所有者的。</block>
  <block id="40603ec338b8ba195bb067fc323eb998" category="list-text">它们没有存储阵列配置错误，例如：</block>
  <block id="d24963140562f725a6ebfc5013c135f3" category="list-text">阵列 LUN 小于或大于 ONTAP 支持的大小。</block>
  <block id="077c35822587e579b6f9f7bf8dd018aa" category="list-text">LDEV 仅映射到一个端口。</block>
  <block id="c080299df472c3b3d98b2e86c3cdbfb8" category="list-text">为 LDEV 分配的 LUN ID 不一致。</block>
  <block id="55d3dc722242b02d84ab2478e409889c" category="list-text">LUN 只能在一个路径上使用。</block>
  <block id="90728b906a78c507b1e15fe5090db627" category="paragraph">如果您尝试分配具有后端配置错误的阵列 LUN 的所有权，而此错误会干扰 ONTAP 系统和存储阵列一起运行，则 ONTAP 会发出一条错误消息。您必须先修复此类错误，然后才能继续分配阵列 LUN 。</block>
  <block id="f2ff71670cd376e228a30b5ba452b8c5" category="paragraph">如果您尝试分配存在冗余错误的阵列 LUN ，则 ONTAP 会向您发出警报：例如，指向此阵列 LUN 的所有路径都连接到同一控制器，或者只有一个路径连接到阵列 LUN 。您可以在分配 LUN 所有权之前或之后修复冗余错误。</block>
  <block id="088fd3f1de21809060a598954ee004a9" category="list-text">输入以下命令以查看尚未分配给节点的阵列LUN：<block ref="4f81a5a37b761675f03e51a37f1ce7a5" prefix="" category="inline-code"></block></block>
  <block id="acc28269bee6adf00aaa6f3622701f6e" category="list-text">输入以下命令将阵列LUN分配给此节点：<block ref="d0df4539206a0852036d6a26322ea6a2" prefix="" category="inline-code"></block></block>
  <block id="14db239585c6ddb821bd10d5afa84d04" category="paragraph">如果要在分配磁盘后而不是之前修复冗余错误、则必须将参数与命令结合使用<block ref="02e554f8f135bc49b80e8fc45a341757" prefix=" " category="inline-code"></block><block ref="3c698d76925a2f101122edd72990fc94" prefix=" " category="inline-code"></block> 。</block>
  <block id="3eaa83165f727400d7fada1fc7738007" category="summary">必须在存储阵列上重新配置阵列LUN的大小或构成。如果阵列LUN已分配给ONTAP系统、则必须先使用ONTAP将阵列LUN的状态更改为未使用、然后存储阵列管理员才能重新配置它。</block>
  <block id="a07b18c872283289d5de975681d8192b" category="doc">更改阵列LUN大小或构成</block>
  <block id="a865b178c11cf73eea0c7c034585edd3" category="paragraph">阵列LUN必须是备用阵列LUN、才能将其状态更改为未使用。</block>
  <block id="2e49982dced1a45d49f8cdeeebe6cd4d" category="list-text">在ONTAP系统上、输入以下命令以删除所有权信息：<block ref="ebcb03777c681958272223b62ad56265" prefix=" " category="inline-code"></block></block>
  <block id="9a5cc4f8663b90bc54f88467750b855d" category="list-text">在存储阵列上、完成以下步骤：</block>
  <block id="2367771513a0b5742b002be0bbfe456a" category="list-text">取消阵列LUN与ONTAP系统的映射(取消显示)、使其无法再看到该阵列LUN。</block>
  <block id="9604019669bee6893d47f128e297a3b3" category="list-text">更改阵列LUN的大小或构成。</block>
  <block id="002f0db7db9e6e16dab2c32f7625c0e6" category="list-text">如果您希望ONTAP再次使用阵列LUN、请再次将该阵列LUN提供给ONTAP系统。</block>
  <block id="51fafe1a36a6cad7cecba732e79eb881" category="paragraph">此时、阵列LUN对提供该阵列LUN的FC启动程序端口可见、但它尚不能由任何ONTAP系统使用。</block>
  <block id="9feb3b63089476400c39f7d59c9f595e" category="list-text">在要成为阵列LUN所有者的ONTAP系统上输入以下命令：<block ref="d0df4539206a0852036d6a26322ea6a2" prefix=" " category="inline-code"></block></block>
  <block id="024acac7dfff041dcd2d7effedc4c5de" category="paragraph">删除所有权信息后、任何ONTAP系统都无法使用该阵列LUN、直到将该阵列LUN重新分配给某个系统为止。您可以将阵列LUN保留为备用阵列LUN、也可以将其添加到聚合中。您必须先将阵列LUN添加到聚合、然后才能将该阵列LUN用于存储。</block>
  <block id="6c1fc30b2ef31f48ed5462f06548169f" category="summary">如果要将阵列LUN添加到校验和类型与该LUN校验和类型不同的聚合、则必须更改该LUN的校验和类型。</block>
  <block id="ee934c6f49c90d6186c3fe91aa099079" category="doc">更改阵列LUN的校验和类型</block>
  <block id="fd693bea0a49ad17607341a8be97f1be" category="paragraph">您必须已在某些类型的工作负载的性能与每种校验和类型的存储容量利用率之间进行权衡。</block>
  <block id="23973c5c11f781c68af20dccd13eceda" category="paragraph">您也可以联系销售工程师、了解有关使用校验和的详细信息。</block>
  <block id="e0a84d583af9c4dc26dfacc839d5b014" category="list-text">您必须为计划添加到高级分区校验和(Advanced zoned Checksum、AZCS)聚合的阵列LUN分配*分区*校验和类型。将分区校验和阵列LUN添加到一个AZCS聚合后、它将成为高级分区校验和阵列LUN。同样、将分区校验和阵列LUN添加到分区聚合时、该LUN也是分区校验和类型。</block>
  <block id="a1543b6f86d6fc4528c2353d16ac2995" category="list-text">在分配所有权时、不能修改阵列LUN的校验和。您只能修改已分配的阵列LUN上的校验和。</block>
  <block id="8232d92ad87bd5d9a40ce7288bc75ce6" category="list-text">输入以下命令以更改校验和类型：<block ref="99c54aa98b93ee7cb6c4834bc7dc051c" prefix=" " category="inline-code"></block></block>
  <block id="870be34b0c5fd09be6875f10b287f749" category="paragraph">_disk name_是要更改校验和类型的阵列LUN。</block>
  <block id="af627ff03fe0939073a0052e3fa52844" category="paragraph">_owner_是将阵列LUN分配到的节点。</block>
  <block id="445210f76c20fe06f8d9a5dc079da2fa" category="paragraph">_new_校 验和_type_可以 是块或分区。</block>
  <block id="f6dd46754e6fc65a0bfef86379634172" category="paragraph"><block ref="a6e4a5eabdb1059fbc45301dfb2bc1cd" prefix="" category="inline-code"></block></block>
  <block id="1cc0176917ce93c6a607d3ebb8d7ff92" category="paragraph">阵列LUN的校验和类型将更改为您指定的新校验和类型。</block>
  <block id="f9cb109fc4d8572dec8e15d9c30ffe59" category="list-text">输入以下命令以访问noshell：<block ref="70ced1c6b9be9ce6281027bb7c3df3e3" prefix=" " category="inline-code"></block></block>
  <block id="33ae420cd2969bc75efe4f3fbeb119d1" category="paragraph">_NODE_NAME_是此系统的名称。</block>
  <block id="a2ef957e4e7a64b16a8aa22ed0c5add5" category="list-text">输入以下命令以退出nokeshell：<block ref="f24f62eeb789199b9b2e467df3b1876b" prefix=" " category="inline-code"></block></block>
  <block id="c223df8eaea85b6716dbbba090457ec7" category="summary">ONTAP要求您修复可能会阻止存储阵列和ONTAP系统正常运行的常见后端配置错误。使用storage array config show命令可帮助您确定是否存在后端配置错误。</block>
  <block id="e6f7cbf0a79288b887ea8fda39c4f690" category="doc">检查是否存在妨碍系统运行的后端配置错误</block>
  <block id="a43493afe3e623abc4563f12fa7972d3" category="paragraph">ONTAP要求您修复可能会阻止存储阵列和ONTAP系统正常运行的常见后端配置错误。使用<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 命令可帮助您确定是否存在后端配置错误。</block>
  <block id="34c1575b1c19b4caa035e3691be4f13b" category="list-text">输入以下命令：<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block></block>
  <block id="f01325d3bb9d94ed47e28ef32fbea823" category="paragraph">安装验证(和故障排除)的第一步是运行<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 命令。如果ONTAP在后端配置中检测到错误、则输出底部将显示以下消息<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> ：</block>
  <block id="a159a67ae7f9175ee4436918e29fde19" category="list-text">按照如下所示采取相应的操作：</block>
  <block id="bfa9de45095a3a90ebc55708a5ee6dd2" category="cell">条件</block>
  <block id="b6eb22a422cd49ad4ef0bc89b0de3c4a" category="paragraph"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix="" category="inline-code"></block> 指示您运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="d2f35a031498a91c132ffdc10f3a345d" category="paragraph">转至步骤3。</block>
  <block id="0996ed781ef1156b0349a1f8ace9092d" category="paragraph"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix="" category="inline-code"></block> 不会指示您运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="29ebf8f594ba52d1001656dc34905ff2" category="inline-xref-macro">验证后端配置是否与预期输出匹配</block>
  <block id="5a4ac7c1b412e08578737eaf4d27fc7d" category="paragraph">查看<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 输出以确保输出反映了所需的配置。请参见验证后端配置是否与预期输出匹配部分。(您无需继续执行此过程中的后续步骤。) <block ref="f15aaea1d12a23db5871c57c331ade95" category="inline-xref-macro-rx"></block></block>
  <block id="a234d1f4a253f7ec2acca53d1e0da67e" category="list-text">输入以下命令：<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block></block>
  <block id="0834db451aedf78b8aaa16d07ee4a2d8" category="paragraph"><block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>命令可用于查看阵列LUN级别的问题详细信息。</block>
  <block id="e19776dfc476c3b90a0f49a60b1ec3c0" category="list-text">查看错误消息并修复显示的任何错误。</block>
  <block id="40adbfa987339c32a5269a7070239fc2" category="paragraph">您必须修复中显示的任何错误<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>。请参见<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> "消息及其解决方法"一节、了解检测到的每个问题的原因<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 以及如何修复。 <block ref="0cc5a55ed5933ff542685ee31e3479f0" category="inline-xref-macro-rx"></block></block>
  <block id="d0e87c31c72dda833938c9d53ff26921" category="list-text">解决问题后、再次运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 以确认错误已修复。</block>
  <block id="fbd27678125fe4f9deafac19becaf976" category="paragraph">如果<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 问题仍然存在、请再次查看文档以了解有关操作的详细信息、或者联系技术支持。</block>
  <block id="5c833371493eb3239c4fc3835f7c6a5b" category="list-text">解决后端配置错误后、请再次运行、<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 以便您可以查看输出、以确保配置满足预期输出。</block>
  <block id="582b616966553150988191e55621a1a1" category="summary">如果您计划通过指定备用阵列LUN的名称将其添加到聚合中、则需要确保要添加的阵列LUN的校验和类型与聚合校验和类型相同。</block>
  <block id="f2eb661c4e73e06a79049d664fd1e286" category="doc">正在检查备用阵列LUN的校验和类型</block>
  <block id="be365d81e8dc0c846b06fbd13601fc3c" category="paragraph">不能在一个阵列LUN聚合中混用不同校验和类型的阵列LUN。聚合的校验和类型与添加到聚合中的阵列LUN的校验和类型必须相同。</block>
  <block id="3825c8456641256fe7283fdac0f92c1a" category="paragraph">如果您指定了要添加到聚合中的多个备用阵列LUN、则默认情况下、ONTAP会选择与聚合具有相同校验和类型的阵列LUN。</block>
  <block id="347da7dc16ca06a6ab97841064f05193" category="paragraph">使用分区校验和阵列LUN的所有新创建聚合的校验和类型均为_advanced zoned Checksum _(ZCS)。现有分区聚合仍支持分区校验和类型。添加到现有分区校验和聚合的分区校验和备用阵列LUN仍为分区校验和阵列LUN。添加到AZCS校验和类型聚合的分区校验和备用阵列LUN使用AZCS校验和方案管理校验和。</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="list-title">步骤</block>
  <block id="b1d27f02d59b274a042abaa0542cacab" category="list-text">输入以下命令、检查备用阵列LUN的校验和类型：</block>
  <block id="ce3e157d78d46681316fb3eba0af93e5" category="paragraph"><block ref="9263002b526f5a0078d8bb7c820884fc" prefix="" category="inline-code"></block></block>
  <block id="9bda931f12e3043fa5d354118847f791" category="paragraph">您可以将块校验和阵列LUN添加到块校验和聚合、并将分区阵列LUN添加到_advanced zoned zoned Checksum _(AZCS)聚合。</block>
  <block id="603fc9f8751712b6025885289d36a2d5" category="summary">您可以检查FC启动程序端口上可见阵列LUN的数量。在FC启动程序端口上可以看到的受支持阵列LUN数量因ONTAP版本而异。</block>
  <block id="ecc9b579c4a7537a9763c557fef02445" category="doc">检查FC启动程序端口上可见的阵列LUN数量</block>
  <block id="f85cf31e24964c0eb3c4f3aeb53e623b" category="list-text">检查FC启动程序端口上的可见编号：<block ref="664c71ee07b65fd2e9d595c954b7ee88" prefix=" " category="inline-code"></block></block>
  <block id="7d2abdde90d4d0ddc577631620721b72" category="paragraph"><block ref="4680646069beb766c55c77c87c6ce3ec" prefix="" category="inline-code"></block></block>
  <block id="9418a07bbfa95710eab22fb3617d9724" category="list-text">如果一个节点有多个阵列LUN组、请添加该节点所有LUN组的阵列LUN数量、以确定可供该节点的指定FC启动程序查看的阵列LUN总数。</block>
  <block id="634d4ae94686561e4d1979669e659452" category="paragraph">以下示例显示了所有节点的FC启动程序0A的输出。要确定_Specific _节点可通过特定FC启动程序查看的阵列LUN数量、必须从为该节点显示的所有目标端口查看该节点的条目。例如、要查找在vgv3070f51-01：0a上看到的阵列LUN数量、您可以将LUN组1 (HP)的LUN计数24添加到LUN组2 (DGC_RAID5_1)的LUN计数1中、这样、在vgv3070f51-01：0a上总共可以看到25个阵列LUN。</block>
  <block id="ce1aaef7c5c22a26099c39fd288392bf" category="paragraph">您可以按照相同的过程来确定在vgv3070f51-02：0a上可以看到的LUN组0和LUN组2 (也是25)的阵列LUN数量。</block>
  <block id="315b5b38f3c590bd1c76fff85258c2ba" category="summary">您可以将各个FC端口配置为ONTAP系统上的启动程序。启动程序模式可使端口连接到存储阵列。</block>
  <block id="2e74aaf310815f2ef37d312efe082180" category="doc">将FC端口配置为启动程序</block>
  <block id="b9d81ba929b865fed6f58fff6461a327" category="list-text">*可选：*如果适配器端口已配置LIF、请使用命令删除所有LIF<block ref="942a07c6842a4cc09fa4eee193feccd8" prefix=" " category="inline-code"></block> 。</block>
  <block id="e9bd2fb96d27a5c869c14ec781e2485d" category="paragraph">如果LIF位于端口集中、则必须先从端口集中删除LIF、然后才能删除LIF。</block>
  <block id="9854bc162236b7f315d3948d196f7c6b" category="paragraph">以下示例显示了如何删除SVM VS3上的LUN：<block ref="4be4aa4486afc2de6c4f3134606473c3" prefix=" " category="inline-code"></block></block>
  <block id="7d6874d0a97b266978bd99596083916f" category="list-text">使用命令使此端口脱机<block ref="f3ccd67c000996bf7db97fecceedeff5" prefix=" " category="inline-code"></block> 。</block>
  <block id="6a1636871817945e96fbc292091f41dc" category="paragraph">以下示例显示了如何使节点sysnode的端口0c脱机：<block ref="773682be5c61d74b9b46e967466370b7" prefix=" " category="inline-code"></block></block>
  <block id="ae35e360eb06818e68f7600bdd03c0f7" category="list-text">使用<block ref="68edd330bcf82ed973e5d3dd6b6cf7f7" prefix=" " category="inline-code"></block> 命令将脱机端口从目标更改为启动程序。</block>
  <block id="4e631c0979f29d878eae181d23457b37" category="paragraph">以下示例显示了如何将0c的端口类型从目标更改为启动程序：<block ref="b56fe9b32e7526f37c78a496fc4b8b62" prefix=" " category="inline-code"></block></block>
  <block id="82ae8f32c970f7e7ea866a96bbe2060f" category="list-text">重新启动托管已更改适配器的节点。</block>
  <block id="6cbb02142430105f4ab73a5ca2619864" category="list-text">使用<block ref="d775a7c491e3e6a78b2224c3792d44ac" prefix=" " category="inline-code"></block> 命令验证是否已针对您的配置正确配置FC端口。</block>
  <block id="dcd9180f6a419b77ddd4d4e058f9aa5f" category="paragraph">以下示例显示了0c的端口类型更改：</block>
  <block id="c4a8e441c8c5ca7056a0cd53a84b0cd3" category="paragraph"><block ref="d435a9288b0843e8e4bab9dfa6a3e3e5" prefix="" category="inline-code"></block></block>
  <block id="3f07a1950d9361bd174cce805808f13b" category="list-text">使用<block ref="d5a528ec5e5a0830fc5e146f202ca265" prefix=" " category="inline-code"></block> 命令将脱机端口恢复联机。</block>
  <block id="e479738aaf6755ff50e2d16215078253" category="paragraph">以下示例显示了如何使端口0c联机：<block ref="2e1468c17af42f7e4382370d99f6c374" prefix=" " category="inline-code"></block></block>
  <block id="5bf831f110557b80730a32a18876735b" category="summary">存储阵列管理员必须配置存储阵列并创建主机组、以使其他主机无法访问要由ONTAP使用的阵列LUN。</block>
  <block id="99d52a07c9514e8947b4e0228f3dbe36" category="doc">正在配置LUN安全性</block>
  <block id="c2966b222487595449932953a69915ee" category="paragraph">LUN安全性的概念与分区类似、不同之处在于LUN安全性是在存储阵列上设置的。LUN安全性可防止不同的服务器在SAN上使用彼此的存储。LUN安全性也可以称为_LUN屏蔽_。</block>
  <block id="4d64b04b623fcc6b822216c6dd4ab3fc" category="list-text">在存储阵列上设置LUN安全性。</block>
  <block id="811bf7450fcfd701928111de6561601f" category="paragraph">有关设置LUN安全性的信息、请参见存储阵列文档。</block>
  <block id="c531e683ce7d222c76b28a94e0e659ec" category="paragraph">有关供应商存储阵列的LUN安全性的任何其他详细信息、您还应参见<block ref="737823659babb212ffbc8948b616644f" category="inline-link-rx"></block> 。某些存储阵列必须专用于ONTAP系统。</block>
  <block id="3aa9fd1fcd4687585dead6b51b68b87a" category="list-text">为ONTAP系统创建主机组或等效主机组。</block>
  <block id="988f30e2442a655ba8e432004e711387" category="paragraph">在某些存储阵列中、术语_host group_用于描述一个配置参数、通过该参数、您可以指定主机对存储阵列上特定端口的访问权限。不同的存储阵列使用不同的术语来描述此配置参数。每个存储阵列供应商都有自己的主机组或等效主机组创建流程。</block>
  <block id="300a0492b022851e50376a948b5ecdca" category="summary">如果要配置 ONTAP 以与阵列 LUN 结合使用，则必须配置根聚合和根卷，为诊断和恢复操作预留空间以及设置集群。</block>
  <block id="6a478f2c1aa3b5c071c7350c437211ff" category="doc">在仅使用阵列 LUN 的系统上配置 ONTAP</block>
  <block id="d1b9838e152135ce9ffe100e6014cb3a" category="list-text">ONTAP 系统必须连接到存储阵列。</block>
  <block id="38319872cf169982110419df88248d72" category="list-text">存储阵列管理员必须已创建 LUN 并将其提供给 ONTAP 。</block>
  <block id="6b32da1f7cce9cb3998793b8ef2e7d47" category="list-text">存储阵列管理员必须已配置 LUN 安全性。</block>
  <block id="7750f529ccd4dfc7797bfc40a22ade86" category="paragraph">您必须配置要与阵列 LUN 结合使用的每个节点。如果节点位于 HA 对中，则必须先在一个节点上完成配置过程，然后再在配对节点上继续进行配置。</block>
  <block id="55f7c7f04bcc7d72fe2825944ebfc7b4" category="list-text">打开主节点的电源，并在控制台上显示以下消息时按Ctrl-C中断启动过程：<block ref="4bc036e1023f9cd7c0df88dc45ad8dc4" prefix=" " category="inline-code"></block>。</block>
  <block id="236d7189e86afabda592c7a3053c8721" category="list-text">在启动菜单上选择选项4 <block ref="9b0fd1ccfb55115d445ce888a54f8c6f" prefix="(" category="inline-code"></block>)。</block>
  <block id="a98eb1e6d9dfd94b037faeb2a3d5ee4a" category="paragraph">此时将显示可供 ONTAP 使用的阵列 LUN 的列表。此外，还指定了创建根卷所需的阵列 LUN 大小。创建根卷所需的大小因 ONTAP 系统而异。</block>
  <block id="232ff69144efec75e69fe200f1be2c22" category="list-text">如果先前未分配任何阵列 LUN ，则 ONTAP 会检测并显示可用的阵列 LUN ，如以下示例所示：</block>
  <block id="28bf3d6141a1e7e1c0efe03b0adedc19" category="list-text">如果之前已分配阵列LUN、例如、已通过维护模式分配、则这些阵列LUN会标记为<block ref="f5ddaf0ca7929578b408c909429f68f2" prefix=" " category="inline-code"></block> 或<block ref="7454739e907f5595ae61d84b8547f574" prefix=" " category="inline-code"></block> 显示在可用阵列LUN列表中、具体取决于这些阵列LUN是从安装ONTAP的节点选择的、还是从其HA配对节点选择的：</block>
  <block id="4ec5276efb5326cd2fdcf3e6383deaa2" category="paragraph">在此示例中、索引编号为3和6的阵列LUN会进行标记<block ref="f5ddaf0ca7929578b408c909429f68f2" prefix=" " category="inline-code"></block> 、因为它们之前是从此特定节点分配的：</block>
  <block id="d079f2e30de913d73887a98d1cee68af" category="list-text">选择与要分配为根卷的阵列 LUN 对应的索引编号。</block>
  <block id="0a6510897dc1ff3e4879e54d5d9b1945" category="paragraph">阵列 LUN 的大小必须足以创建根卷。</block>
  <block id="2e107389825d90b1845a4df5d0f4a6cd" category="paragraph">为创建根卷而选择的阵列LUN将标记为 <block ref="3dc81331999a78a7064846f33494427c" prefix="" category="inline-code"></block>。</block>
  <block id="f92afc3b026d78a33abacb0eee1d4b6b" category="paragraph">在以下示例中，索引编号为 3 的阵列 LUN 会标记为用于创建根卷：</block>
  <block id="19a35567fb97930c9e7468e6db094640" category="list-text">选择与要分配以在诊断和恢复选项中使用的阵列 LUN 对应的索引编号。</block>
  <block id="a49550c8bd50a25526042b3f4e8eee41" category="paragraph">阵列 LUN 的大小必须足以用于诊断和恢复选项。如果需要，您还可以选择多个阵列 LUN ，这些阵列 LUN 的总大小可以大于或等于指定大小。要选择多个条目，必须输入与要为诊断和恢复选项选择的阵列 LUN 对应的所有索引编号的逗号分隔值。</block>
  <block id="c58db60c9a8af2206e008f65968c9335" category="paragraph">以下示例显示了为创建根卷以及为诊断和恢复选项选择的阵列 LUN 的列表：</block>
  <block id="fc87123e9a833d53e62ae87e47aea7f3" category="paragraph">选择"no"(否)将清除LUN选择。</block>
  <block id="0ed10ee7d6bf9a9b01e623092941d24f" category="list-text">当系统提示您继续安装过程时、输入<block ref="415290769594460e2e485922904f345d" prefix=" " category="inline-code"></block> 。</block>
  <block id="e79badcaf0b3c7829bf21e2008722e24" category="paragraph">此时将创建根聚合和根卷，其余安装过程将继续进行。</block>
  <block id="e6db32df0d7371b10a45ab8ee955ef22" category="list-text">输入所需的详细信息以创建节点管理接口。</block>
  <block id="e054c18e078c1fcdf1a17bbe019cf061" category="paragraph">以下示例显示了节点管理接口屏幕，其中包含一条消息，用于确认创建节点管理接口：</block>
  <block id="6421ee396f6d3b6ded2686fbb0687587" category="paragraph">在要与阵列 LUN 结合使用的所有节点上配置 ONTAP 后，您应完成集群设置过程。</block>
  <block id="1a9dbc3089b2c22ecdefe28bf423258a" category="inline-link">软件设置</block>
  <block id="49fd6eac557fd3205a3431ae072641b8" category="paragraph"><block ref="49fd6eac557fd3205a3431ae072641b8" category="inline-link-rx"></block></block>
  <block id="a25592a584bd3a8f4e534f9bf7d57180" category="summary">要将ONTAP系统连接到存储阵列、需要将ONTAP系统、交换机和存储阵列连接到一起、并连接其他设备、例如磁带备份设备。</block>
  <block id="1b6d9d849bb1824777b46e45cd22d568" category="doc">将ONTAP系统连接到存储阵列</block>
  <block id="50a92ab00fdd34ad778a4aef400fce02" category="list-text">您必须已确定ONTAP系统用于连接到存储阵列的板载端口和扩展适配器端口。</block>
  <block id="350faba04ab7ea6a7a18541dcec27f6b" category="list-text">您必须已找到要用于连接到ONTAP系统的存储阵列上的端口。</block>
  <block id="fe75c978ee594aacc69c20f45faf6fd0" category="paragraph">此过程介绍如何通过两条路径将ONTAP系统连接到存储阵列、其中每个启动程序专用于一个目标端口。</block>
  <block id="5325348b9911038214ff443b1cfde4a7" category="list-text">将ONTAP系统连接到交换机、如下表所示：</block>
  <block id="0ba2b3e0a887666765eb2d690768c576" category="cell">对象</block>
  <block id="e3df4624e4d36502b5d044730eab97cc" category="cell">请按照以下步骤操作 ...</block>
  <block id="ea4e2067ffabbad1f9bdfd9233c5b40d" category="paragraph">独立系统</block>
  <block id="f175d3d6a71fc407c43e6093623e8b80" category="list-text">使用一根缆线从ONTAP系统上的一个FC启动程序端口连接到交换机1上的一个端口。</block>
  <block id="8872a8abd35a84fdccbc952e8a2d34ff" category="list-text">使用另一根缆线从冗余FC启动程序端口连接到交换机2上的端口。</block>
  <block id="3cdd93e247df7344473ca0add028b55e" category="paragraph">An HA pair</block>
  <block id="4baabe708da115e7ae7ca732f197661b" category="list-text">在HA对中的第一个节点上、使用一根缆线从一个FC启动程序端口连接到交换机1上的端口。</block>
  <block id="1ee4edffbcc47c5c01d85e5656b343fc" category="list-text">使用另一根缆线从同一节点上的冗余FC启动程序端口连接到交换机2上的端口。</block>
  <block id="9c4f20c199415ceaf4d63189b3732804" category="list-text">在HA对中的第二个节点上、使用一根缆线从一个FC启动程序端口连接到交换机1上的端口。</block>
  <block id="3f841a95ca8ab4aa41b2df9ea7aeac5b" category="list-text">按照下表中的说明将交换机连接到存储阵列、对于HA对、请按照下表中的图示进行操作：</block>
  <block id="f317f627be8f5bb574a2ea1a3f90f587" category="cell">对于独立系统...</block>
  <block id="f0fbc3c16c616f1821b4c99c27bb4fc5" category="cell">HA对</block>
  <block id="df977e4ba0783bd443ca078322093df0" category="list-text">将交换机1连接到存储阵列控制器1的端口1A。</block>
  <block id="8c636a7f7c67b22aba66e6513bdc48f8" category="list-text">将交换机2连接到存储阵列控制器2的端口2A。</block>
  <block id="04f6a168e00f8e30034d7622260c98a7" category="list-text">将交换机1连接到存储阵列控制器1的端口1B。</block>
  <block id="6f25906033eec14b6ba73b343b2d5925" category="list-text">将交换机2连接到存储阵列控制器2的端口2B。</block>
  <block id="a1235d8215e2068eac19079a60a06d6a" category="paragraph">下图显示了HA对的连接。</block>
  <block id="5128cb4dc3f02ceb7fe5900eb48b18a5" category="image-alt">从VS1 0A和VS2 0A连接到存储阵列控制器1</block>
  <block id="55413ff88f45e6e54084de93d9b8a075" category="list-text">*可选:*通过单独的FC启动程序端口或SCSI磁带适配器将ONTAP系统连接到磁带备份设备。</block>
  <block id="7d1731f9b96a6964835432e4d84459aa" category="list-text">验证存储阵列是否已正确配置和连接、以及是否已打开电源。</block>
  <block id="b036e06909146483c60cd905c765c3dc" category="paragraph">在打开ONTAP系统电源之前、必须先打开已配置并连接的存储阵列的电源。有关如何启动存储阵列的信息、请参见存储阵列文档。</block>
  <block id="186b57b26b08aa1b2590c8946599e0ea" category="list-text">如果您的部署包含交换机、请确保设置所有交换机ID、然后每10分钟打开一次。</block>
  <block id="03e12a92dec4d1d9374537d9de77373b" category="list-text">*可选：*如果适用，请打开任何磁带备份设备。</block>
  <block id="b3662b07a815b8e012f1750f20e55187" category="list-text">启动ONTAP系统并执行初始网络设置和配置。</block>
  <block id="2bb9d07c47504d8a5363e29509e152b8" category="list-text">如果在将ONTAP系统连接到存储阵列后存储阵列未自动发现ONTAP系统WWN、则必须手动获取这些WWN。</block>
  <block id="c1188940c17b719bb2a19577ad384eb9" category="paragraph">要使用存储阵列、您必须继续进行相应的ONTAP管理功能设置。</block>
  <block id="e580fddabc0fb7ced477570f32d47eda" category="summary">如果您怀疑目标队列深度设置导致存储阵列出现性能问题、则应检查为队列深度设置的值、并检查FC启动程序端口上的请求状态。</block>
  <block id="fcbd65f8a570b3e2846336b23b32d9c3" category="doc">显示目标队列深度统计信息</block>
  <block id="468416c3c58a2a3bb0ce1752fd9c2d4c" category="paragraph">您可以访问不同级别的详细信息来确定在处理目标端口上的请求时是否存在问题。以下步骤介绍如何确定目标端口队列深度的当前设置、确定端口上是否有正在等待的请求以及显示详细的端口统计信息以帮助您了解端口上的工作负载。</block>
  <block id="f6265bd92fb05948c18b759ee826f2fb" category="list-text">使用<block ref="d90ba20b63acab53952d68665c50ec47" prefix=" " category="inline-code"></block> 命令和<block ref="7aef5f885a9c89afe8ef4563814d1889" prefix=" " category="inline-code"></block> 参数显示目标端口队列深度的当前值。</block>
  <block id="22b21c97557f1847329ccfbe83eb89f5" category="list-text">使用<block ref="c8288298283aa3ba0414c826dea56685" prefix=" " category="inline-code"></block> 命令显示存储阵列上每个端口的队列深度设置。</block>
  <block id="85b23015f8ef17210a7680d0d5fd5f02" category="paragraph">值"`-`表示<block ref="d84f492dd27777cae3f18512dc9ad0eb" prefix=" " category="inline-code"></block> 端口没有特定的最大队列深度设置、而是使用在存储阵列级别设置的值。</block>
  <block id="685d918047527de3b59628d061a3847a" category="list-text">使用<block ref="ee77efc11bd001b53eb2e3ed61757d9c" prefix=" " category="inline-code"></block> 命令显示有关存储阵列目标端口的性能信息。</block>
  <block id="40c2f2616c68e4ae109b913ab76b72e9" category="paragraph">此命令的结果可帮助您确定是否存在与端口相关的性能问题。<block ref="8c186e0baaed86d8d3a168eb670fd7d2" prefix=" " category="inline-code"></block>和<block ref="102b4615843a16f419e44157a1d7655f" prefix=" " category="inline-code"></block> 值提供了端口性能的概要视图。如果这些值显示等待处理的请求百分比较高、或者显示端口处于繁忙状态的时间百分比较大、则您可能需要进一步调查端口的状态。</block>
  <block id="d13119ea5a934548d52209a6c0346883" category="list-text">您可以通过将命令与、、、或字段结合使用来获取有关端口的更多详细信息<block ref="3fafdfc990f44295dd78e53d672161b0" prefix=" " category="inline-code"></block><block ref="be73772ca077f2d32d3b5089ce2b0adf" prefix=" " category="inline-code"></block><block ref="a95000a233f538e334d9da64a21be102" prefix=" " category="inline-code"></block><block ref="150ce1fa8de4826d1cdffffbba1b4671" prefix=" " category="inline-code"></block><block ref="946669a5cac24544b8ec5df25d11da1f" prefix=" " category="inline-code"></block><block ref="5cedcf4c056f2095999836602ad3cf72" prefix=" " category="inline-code"></block> 。</block>
  <block id="4a6cea3a17b28c31b3808ca85aced689" category="summary">在对使用阵列LUN的ONTAP配置进行故障排除时、您应采用系统化的方法来确定问题的原因。</block>
  <block id="24ca8ca084330b44714752d8d0fe31e8" category="doc">使用阵列LUN对ONTAP配置进行故障排除入门</block>
  <block id="55391803b655776f42301700dc022cb3" category="paragraph">此过程建议了进行故障排除的顺序。</block>
  <block id="932484c0104cc9b00bcf3bf761e9589c" category="paragraph">在继续执行故障排除步骤时、您应保存收集到的有关问题的任何信息、以便在升级时向技术支持提供此信息。</block>
  <block id="692319f6f0b0f7e4d1158d56f7048472" category="list-text">确定问题是与_Front End_(影响所有相应平台的ONTAP问题)还是与_Back End_(交换机或存储阵列配置问题)有关。</block>
  <block id="4916a8b9bbb0d86c42830b5a4eaa5a13" category="paragraph">例如、如果您尝试使用ONTAP功能、但该功能未按预期工作、则问题可能出在前端</block>
  <block id="e7d4035481c354ccf0429d43ddf994b3" category="list-text">根据问题的性质、采取适当行动解决问题：</block>
  <block id="e629c0c47b2a83aba6344757eaccf6d4" category="cell">如果ONTAP配置具有...</block>
  <block id="9792a4eebc59c44369f1f98f9d27237a" category="cell">操作</block>
  <block id="942bdc545741273027bcccd61ff95c77" category="paragraph">前端问题</block>
  <block id="604c8f2a992ae8961da6877865f4954b" category="paragraph">按照ONTAP指南中的说明继续对ONTAP功能进行故障排除。</block>
  <block id="5358757de9216cc29d688612a3d72fe1" category="inline-link">ONTAP 9文档</block>
  <block id="05d1b66800ffa31a913a6add4305e4e3" category="paragraph"><block ref="05d1b66800ffa31a913a6add4305e4e3" category="inline-link-rx"></block></block>
  <block id="636a99a24ba5b56a6edeaf367c12fcce" category="paragraph">后端问题</block>
  <block id="f76dc55e046691cd947a5a93633fc9cf" category="list-text">查看互操作性表以确保支持以下内容：配置、存储阵列、存储阵列固件、交换机和交换机固件。</block>
  <block id="29c81145f8df4c302d2a5db797d28b64" category="paragraph"><block ref="29c81145f8df4c302d2a5db797d28b64" category="inline-link-rx"></block></block>
  <block id="2f6a3e71d016c987047038edaefc1c27" category="list-text">使用<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 命令检查系统是否可以检测到任何常见的后端配置错误。</block>
  <block id="2461898602fc976c5c86a86ad8ea9b4c" category="paragraph">如果ONTAP检测到后端配置错误、则必须运行<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block> 命令以获取有关此错误的详细信息。</block>
  <block id="51f11ffa04777efc1f9bb22df2d01691" category="list-text">如果问题的原因仍不明确、请检查以下来源、以确保您的系统符合使用存储阵列的要求：</block>
  <block id="5cc676e7998d4a720ec8361116f96702" category="inline-xref-macro">使用存储阵列验证安装</block>
  <block id="eea17493f39639b1b1111409a712e498" category="list-text"><block ref="eea17493f39639b1b1111409a712e498" category="inline-xref-macro-rx"></block></block>
  <block id="7c5ee56a01b06b00d2d910cc295d8c56" category="list-text"><block ref="7c5ee56a01b06b00d2d910cc295d8c56" category="inline-link-rx"></block></block>
  <block id="2dad342716fa6f6b49d782c9f3a39bc6" category="list-text">如果您仍需要帮助解决此问题、请联系技术支持。</block>
  <block id="51e0ebc5c53d9886426e8e4c2162b0db" category="summary">要使用阵列LUN的每个ONTAP节点上都必须安装V_StorageAttach许可证。它不是集群的单一许可证。只有在安装了许可证之后、才能在聚合中使用阵列LUN。</block>
  <block id="e64d1e0877e50804ff8487d692174af1" category="doc">安装使用阵列LUN所需的许可证</block>
  <block id="d08d557fb68080341a3c090ef0bbcf00" category="paragraph">要使用阵列LUN的每个ONTAP节点上都必须安装V_StorageAttach许可证。此许可证不是集群的单个许可证。只有在安装了许可证之后、才能在聚合中使用阵列LUN。</block>
  <block id="6dce6a8d34576d6e6d2f961c8b413963" category="list-text">必须安装集群。</block>
  <block id="46828fa53ffc65db6a237d68a35398f5" category="list-text">您必须具有 V_StorageAttach 许可证的许可证密钥。</block>
  <block id="45f6b7926a0d02840becf80d4f61f745" category="paragraph">如果已安装V_StorageAttach软件包的许可证密钥、则无需执行此过程。如果订购的ONTAP系统附带有磁盘、则出厂时通常会为您安装许可证包。或者、许多客户也会在安装过程早期安装所有必要的许可证。</block>
  <block id="9050684360ad91577f32f8976ccf2ac5" category="list-text">对于集群中用于阵列LUN的每个ONTAP节点、在该节点上输入以下命令：<block ref="d5d00caf4273b5190acca42902af14e8" prefix=" " category="inline-code"></block></block>
  <block id="9ff125781a71d9b47b6fdf66f5f4d916" category="list-text">查看输出以确认是否显示V_StorageAttach软件包。</block>
  <block id="c33a60a93d5f984f0fb77517e6251545" category="summary">您可以将备用阵列LUN的所有权更改为其他节点。您可能需要执行此操作来平衡节点上的负载。</block>
  <block id="1f78917d1e1af136d2dcca14450b72c8" category="doc">修改备用阵列LUN的分配</block>
  <block id="336b702abdf8a07dd39d90d8277633c7" category="paragraph">您可以将_spare_阵列LUN的所有权更改为其他节点。您可能需要执行此操作来平衡节点上的负载。</block>
  <block id="3962db7ba45c766594e5f3d4c928632e" category="list-text">在拥有要重新分配的阵列LUN的节点的控制台上、输入以下命令以查看节点上的备用阵列LUN列表：<block ref="92c79528995c0a5a36683429ba59f57b" prefix=" " category="inline-code"></block></block>
  <block id="804fab9c52fcc0cbe58ec3d85ceefb2a" category="paragraph">此时将列出节点拥有的阵列LUN、包括备用磁盘和聚合中的LUN。</block>
  <block id="2b4c9b4b4c146c654dfa6c5a77520c6d" category="list-text">确认要重新分配给其他节点的LUN是备用LUN。</block>
  <block id="1e13f7aea99b26f47581bf869c9f843d" category="list-text">输入以下命令将阵列LUN的所有权分配给其他节点：<block ref="227d5b302b7c59c94dd481455cc673e7" prefix=" " category="inline-code"></block></block>
  <block id="415d82c982d9b6a4eb8ae0ce7f4fa9f8" category="paragraph">如果未使用-force选项或阵列LUN已添加到聚合中、则阵列LUN所有权不会更改。</block>
  <block id="78d46ba3b75ae85c89bec081e4c93f39" category="list-text">输入以下命令、验证备用阵列LUN的所有权是否已更改为另一节点：<block ref="92c79528995c0a5a36683429ba59f57b" prefix=" " category="inline-code"></block></block>
  <block id="1239d0d1052d8679715cc4c348689d6c" category="paragraph">已更改为新所有者的备用阵列LUN应不再显示在备用磁盘列表中。如果阵列LUN仍显示、请重复此命令以更改所有权。</block>
  <block id="ecff3550d7b89a2fa0a58bdf21fe78c3" category="list-text">在目标节点上、输入以下命令、验证您更改了所有权的备用阵列LUN是否列为目标节点拥有的备用阵列LUN：<block ref="92c79528995c0a5a36683429ba59f57b" prefix=" " category="inline-code"></block></block>
  <block id="60d553b9b620e3af890b28e216e43e1a" category="paragraph">您必须先将阵列LUN添加到聚合中、然后才能将其用于存储。</block>
  <block id="1d7b78839f985b18e9aa5bf8e672f1d7" category="summary">如果ONTAP系统未连接到SAN交换机、则需要获取系统的FC启动程序端口的全球通用端口名称(World Wide Port Name、WWPN)、这些端口将用于将系统连接到交换机。</block>
  <block id="47414b5795303043ec7b69706fbe9c35" category="doc">手动获取WWPN</block>
  <block id="c0be45e810df5f46b52a80c0fa56bf58" category="paragraph">如果ONTAP系统未连接到SAN交换机、则需要获取系统的FC启动程序端口的全球通用端口名称(World Wide Port Name、WWPN)、这些端口将用于将系统连接到交换机。</block>
  <block id="b11eb2daca17adf0cbffb45083121b6d" category="paragraph">让交换机自动发现WWPN是获取WWPN的首选方法、因为您可以避免在交换机配置中键入WWPN可能导致的错误。</block>
  <block id="e64459a9358caac2dc62d75e083830ca" category="list-text">将系统的控制台连接连接至笔记本电脑。</block>
  <block id="8c81709ed3cc24cd26c782b8f68eb100" category="list-text">打开系统电源。</block>
  <block id="91d028ed677569cad6942bc1bc25df2f" category="paragraph">在控制台上看到以下消息时、按Ctrl-c中断启动过程：</block>
  <block id="f6e7cc6e1f1c698738c162f117abeee9" category="list-text">在启动选项菜单上选择维护模式选项。</block>
  <block id="cff7cd8252fb4986eda70f34e0a829ba" category="list-text">输入以下命令以列出系统的FC启动程序端口的WWPN：<block ref="859b25b572a37d0f2325ec564b95c2cf" prefix=" " category="inline-code"></block></block>
  <block id="5c8d34de371ffdc6963c01b102ecd168" category="paragraph">要列出特定适配器WWPN、请添加适配器名称、例如storage show adapter 0a。</block>
  <block id="20b20f6c960f270f10d37318eefbbce6" category="list-text">记录要使用的WWPN、然后退出维护模式。</block>
  <block id="c78ac4c8b6277f294bff887d92659a00" category="summary">在使用阵列LUN的配置中开始设置ONTAP系统之前、存储阵列管理员必须准备好用于ONTAP的存储。</block>
  <block id="0298c9d72aff4562d5434fe4a448c6a1" category="doc">准备用于 ONTAP 系统的存储阵列</block>
  <block id="6ceeef6f6fdaf06b95cae87e460cfe9b" category="paragraph">您计划在配置中使用的存储阵列，固件和交换机必须受特定 ONTAP 版本支持。</block>
  <block id="10f02f59043b28fac9ff50a9e24e6044" category="inline-link">NetApp 互操作性</block>
  <block id="8ae1a8b6dc4a3df150f27ca419fb9a6c" category="list-text"><block ref="8ae1a8b6dc4a3df150f27ca419fb9a6c" category="inline-link-rx"></block></block>
  <block id="b5281259f02365989ee0c66878541c97" category="paragraph">在 IMT 中，您可以使用 Storage 解决方案字段选择 MetroCluster 解决方案。您可以使用 * 组件资源管理器 * 来选择组件和 ONTAP 版本以细化搜索范围。您可以单击 * 显示结果 * 以显示与此条件匹配的受支持配置列表。</block>
  <block id="567997ebab95ad5c797a8c2164e69988" category="paragraph">要在存储阵列上执行此任务，您必须与存储阵列管理员进行协调。</block>
  <block id="c046d72d0a564f80aa86ddfc717508f5" category="list-text">在存储阵列上至少创建四个LUN、以供ONTAP系统使用。</block>
  <block id="e84bd5c1ce9e52320f71b58b8d99d175" category="paragraph">HA对中的每个节点都需要一个用于根卷的阵列LUN和一个用于核心转储的阵列LUN。</block>
  <block id="4040897121df220e5ae9b68b9fe58f41" category="list-text">在存储阵列上配置使用 ONTAP 所需的参数。</block>
  <block id="6dbd7bab7a873171c8bb767a512e814e" category="summary">在从服务中删除ONTAP系统之前、您必须释放分配给该系统的所有阵列LUN上的永久性预留。</block>
  <block id="694e4ac6b23cbd97c54791f34120e36d" category="doc">在从服务中删除ONTAP系统之前准备阵列LUN</block>
  <block id="daf517d421f837b1487a2359c7b31502" category="paragraph">在为阵列LUN分配ONTAP所有权时、ONTAP会在该阵列LUN上放置永久性预留(所有权锁定)、以确定哪个ONTAP系统拥有该LUN。如果您希望阵列LUN可供其他类型的主机使用、则必须删除ONTAP对这些阵列LUN设置的永久性预留； 如果您不删除ONTAP写入预留LUN的所有权和永久性预留、则某些阵列不允许销毁该LUN。</block>
  <block id="1c3dc9935ad5f7bd709fb9768b6aad77" category="paragraph">例如、Hitachi USP存储阵列没有用于从LUN中删除永久性预留的用户命令。如果在从服务中删除ONTAP系统之前未通过ONTAP删除永久性预留、则必须致电Hitachi技术支持以删除这些预留。</block>
  <block id="7bd0ace62e1eb38905cbfffeffed0d60" category="inline-link">什么是SCSI预留和SCSI永久性预留</block>
  <block id="cacd53dff0dbe7cc08abb3818818ae58" category="paragraph">请参见知识库文章<block ref="f4c66dc35bc3498543d562a7004cd75c" category="inline-link-rx"></block></block>
  <block id="4c2225a1bc03d8447a8dff9e4d19257a" category="summary">如果存储阵列管理员不再希望将特定阵列LUN用于ONTAP、则必须删除ONTAP写入LUN的信息(例如大小和所有权)、然后该管理员才能重新配置LUN以供其他主机使用。</block>
  <block id="800c07d8346b1f1709c06b6c1162e103" category="doc">删除ONTAP使用的一个阵列LUN</block>
  <block id="93a2757844afe51f9ed5f419809fe556" category="paragraph">如果存储阵列管理员不再希望ONTAP使用的LUN位于某个聚合中、则必须先使该聚合脱机并销毁该聚合、然后再开始此过程。使聚合脱机并将其销毁会将数据LUN更改为备用LUN。</block>
  <block id="3788691350f9939488488a1c693838b1" category="list-text">输入以下命令：<block ref="e25781c649ac99fbc10be56be58af860" prefix=" " category="inline-code"></block></block>
  <block id="64387376ae2031469a6098ae9e364247" category="paragraph">_LUN名称_是阵列LUN的名称。</block>
  <block id="2a6be4e693501703e74378ae046bc0ab" category="summary">对于大多数实施、默认目标队列深度均可接受、但在遇到性能问题时可以更改。</block>
  <block id="9fe083821c448d855ca8cdae94f5f894" category="doc">设置目标队列深度</block>
  <block id="2e2e06f9ceec122e6eed5b9c6148018a" category="paragraph">您可以按存储阵列设置目标队列深度、也可以按目标端口设置目标队列深度。</block>
  <block id="6542d6aee8890218459bde46c53b4a24" category="list-text">使用以下命令之一在存储阵列的所有目标端口或特定目标端口上设置目标端口队列深度。</block>
  <block id="5d920b501536441ea32ecc24679c72a2" category="cell">如果要...</block>
  <block id="afe7dc605448ad8236681165eec5d146" category="cell">使用的命令顺序</block>
  <block id="d11865d110d6d2e8a64fee8839776532" category="paragraph">在存储阵列的所有目标端口上设置目标端口队列深度</block>
  <block id="0c183fdfa61b9fc5b13e905923c2291e" category="paragraph"><block ref="8a76e05712367753ebfcc59ac22c3fed" prefix="" category="inline-code"></block><block ref="b2e0162eb8f612e0890951bbfc3e2321" prefix=" " category="inline-code"></block></block>
  <block id="4bd38acadc2c771df3461c003a2bc08b" category="paragraph">在存储阵列的特定目标端口上设置目标端口队列深度</block>
  <block id="eadc1aaf2887492be3298770895b6a09" category="paragraph"><block ref="8a76e05712367753ebfcc59ac22c3fed" prefix="" category="inline-code"></block><block ref="f8405dfa813a2135cf539eb09670ffa6" prefix=" " category="inline-code"></block></block>
  <block id="c1ab645f73cf51f89ba7b500ced3be75" category="paragraph">有关这些命令的详细信息，请参见手册页。</block>
  <block id="8fb7dfcaa6c1baa0187120a7c70df092" category="summary">对于大多数实施、默认目标队列深度均可接受、但您可以根据需要更改默认值。</block>
  <block id="ec69dde58463fd9815d0ad313f3c3c5c" category="doc">设置目标队列深度(8.2之前的ONTAP)</block>
  <block id="a56ef47143545e383ac700473443089d" category="paragraph">此设置针对每个ONTAP系统、适用于所有存储阵列上的所有目标端口。对于运行8.2之前版本的ONTAP系统、可以使用此选项。</block>
  <block id="fe3ced12f3f343c5228c4d694e899992" category="list-text">使用以下选项设置目标队列深度：<block ref="230c91d7b4cb45fbc7692b8b9a5e479c" prefix=" " category="inline-code"></block></block>
  <block id="fe8c65acbb946c64f69549547f50bfd7" category="summary">交换机配置通常由存储或SAN管理员完成。必须对交换机进行分区、以便ONTAP系统和存储阵列可以相互识别。您必须使用单启动程序分区作为分区策略。</block>
  <block id="cf8325fcd0a12fc5b7ba7b03aade9a4b" category="doc">设置交换机</block>
  <block id="c9c303622b62a1656690d36b25380747" category="list-text">登录到存储阵列并获取存储阵列的FC适配器的WWPN。</block>
  <block id="527e2988fb3449940e9940fb1908b2d6" category="list-text">使用光纤通道交换机命令对每个交换机进行分区、以便存储阵列和ONTAP系统可以看到彼此的WWPN。</block>
  <block id="7c2b79b1035897c9c44047ad2d404806" category="paragraph">请考虑以下HA对中的ONTAP系统示例：</block>
  <block id="6b17218addc79e22862f94be055a3257" category="paragraph">在示例配置中、分区如下所示：</block>
  <block id="e6bdf8a82bcc5f9e1b16ccce49cfaf4e" category="cell">ONTAP系统和端口</block>
  <block id="d29a3441d0a48cbe30f90a80e762f20f" category="cell">存储阵列控制器和端口</block>
  <block id="b4b967fcf545cabffffd85682ec7762c" category="paragraph">VS1、0A</block>
  <block id="e1d75aec4f5b675817f60c76759543f3" category="paragraph">控制器1、1A</block>
  <block id="9c00c503a7cf368e88ba7c89099dfc2d" category="paragraph">VS2、0A</block>
  <block id="c6b49282710baa6f5d91e2c7eb48fd95" category="paragraph">控制器1、1B</block>
  <block id="dfb069caa1188168d6bd80e4d0c5e560" category="paragraph">vs1、0c</block>
  <block id="0c83808b9b45ddb63e156c966fe89e80" category="paragraph">控制器2、2A</block>
  <block id="4131681b603af62a302f33c2c6aaf26c" category="paragraph">vs2、0c</block>
  <block id="32667801375988b1872564604d62d5da" category="paragraph">控制器2、2B</block>
  <block id="b1898e9888b1a31d3d0e9f9b94d7b18a" category="summary">解决storage errors, show检测到的后端配置错误后，您必须检查现有的后端配置是否与您的预期配置匹配，并修复因任何不匹配而引起的问题。</block>
  <block id="38349660c2789d959848bff17dfb5622" category="doc">验证后端配置是否与预期配置匹配</block>
  <block id="bef28f218170122dd0764424bc76c90a" category="paragraph">解决检测到的后端配置错误后<block ref="3544855ba5183863f1439ae70a230dfb" prefix=" " category="inline-code"></block>，您必须检查现有的后端配置是否与预期配置匹配，并修复因任何不匹配而引起的问题。</block>
  <block id="7d54fe2542a3fd1613f769479b43e17f" category="paragraph"><block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block>输出按存储阵列对有关LUN组、LUN计数和路径的信息进行了分组、如下HA对示例所示：</block>
  <block id="1bc72fd24c6e45d276bfb648c4bd7489" category="list-text">检查<block ref="5801fda6c4274abf451b8ce898d11b8c" prefix=" " category="inline-code"></block> 下表中每个问题陈述的输出、并参考相应的解决信息。</block>
  <block id="c619a4b48ff1637a7cff6f16008f4b2e" category="cell">如果您发现此问题...</block>
  <block id="7c236ddf0ec4993bd99d47ae4550fe54" category="cell">查看此信息...</block>
  <block id="f3fa667d5e4190cf61fe306379739919" category="paragraph">空LUN组</block>
  <block id="d08b933bc245676629987cddccb03433" category="paragraph"><block ref="d08b933bc245676629987cddccb03433" category="inline-xref-macro-rx"></block></block>
  <block id="fc723c1ea12a442fbc8d8a7fd8ddba53" category="paragraph">缺少预期的存储阵列</block>
  <block id="58a73e62d7223e3d067917d13a8e7626" category="inline-xref-macro">您可能无法看到所需的所有存储阵列的原因</block>
  <block id="a2dff501dba57f698ffa2181ebbbdba7" category="paragraph"><block ref="a2dff501dba57f698ffa2181ebbbdba7" category="inline-xref-macro-rx"></block></block>
  <block id="cb4464366e00ea651cda8297b3ed3189" category="paragraph">阵列LUN组多于预期</block>
  <block id="394ee90ecc94bf1ae4f105f0dcc560a2" category="paragraph"><block ref="394ee90ecc94bf1ae4f105f0dcc560a2" category="inline-xref-macro-rx"></block></block>
  <block id="0838fbbe2f609cbb1a886776879f0852" category="paragraph">阵列LUN组数少于预期</block>
  <block id="f3a0113eb5a6b2a177d3e346d6b0865a" category="paragraph"><block ref="f3a0113eb5a6b2a177d3e346d6b0865a" category="inline-xref-macro-rx"></block></block>
  <block id="e60948e14158bccecb7a66d4e4e6e5db" category="paragraph">阵列LUN组不会显示预期的LUN数量</block>
  <block id="66107acd72c446b27435474497c0886e" category="paragraph"><block ref="66107acd72c446b27435474497c0886e" category="inline-xref-macro-rx"></block></block>
  <block id="3b1add525c81b89c720365077f111e59" category="paragraph">路径数少于预期</block>
  <block id="8765ce9ed4414230dba75a5179f42ddf" category="paragraph">路径数超出预期</block>
  <block id="9cb4d212bbd569e52d2eeb810f3c1d44" category="paragraph"><block ref="9cb4d212bbd569e52d2eeb810f3c1d44" category="inline-xref-macro-rx"></block></block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="de6edae22bc37b97b38a15c7f8af62e2" category="paragraph"><block ref="de6edae22bc37b97b38a15c7f8af62e2" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="a93bc0a57623c2facaa010825c808507" category="paragraph"><block ref="a93bc0a57623c2facaa010825c808507" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="547ea2e305891e64d8e744949b0aca2c" category="paragraph"><block ref="547ea2e305891e64d8e744949b0aca2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="50921fca0d376fca62102a5e608994e2" category="paragraph"><block ref="50921fca0d376fca62102a5e608994e2" category="inline-link-rx"></block></block>
  <block id="b4de17ead867a3cf0b9d11e57e562672" category="section-title">机器翻译</block>
  <block id="dd3918c571093dff2b94f7cef5066d01" category="inline-link-macro">netapp.com</block>
  <block id="5db028f960e19ec42098e3252e4fb1e3" category="paragraph">有关本地化内容的重要信息、请参见 <block ref="7e89bb7928e951b6f80ad1dab5c58475" category="inline-link-macro-rx"></block></block>
  <block id="c8f6b8b5a91077642063f56b2f6b0c8f" category="sidebar">ONTAP FlexArray文档</block>
  <block id="eb02a8139a36a42c6ff4d75a70670478" category="sidebar">实施E-Series存储</block>
  <block id="602ef4fe4394c117a6dae7eefca200b7" category="sidebar">实施第三方存储</block>
  <block id="08b64985fd8d0c0933dd86c2b7d3cc02" category="sidebar">所有存储阵列的配置准则</block>
  <block id="9d0c0dd17e6e2a8206a0b3a01595676b" category="sidebar">安装 FlexArray</block>
  <block id="8d784ca832d17ed0c707b18057621ba7" category="sidebar">ONTAP FlexArray文档</block>
  <block id="d648f2a68a54fd1b3329efc3cf24d29c" category="sidebar">法律声明</block>
  <block id="ac3a9a8b2498360d2c76d582e712146e" category="sidebar">实施第三方存储</block>
  <block id="e0db3e65c27cd60f3a9c76597be913ba" category="sidebar">FlexArray虚拟化技术概述—​using用于存储的阵列LUN</block>
</blocks>